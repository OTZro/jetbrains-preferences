<application>
  <component name="VimEditorSettings">
    <editor>
      <key-repeat enabled="true" />
    </editor>
  </component>
  <component name="VimHistorySettings">
    <history>
      <history-search>
        <entry>ATTACHMENT</entry>
        <entry>WebSocket</entry>
        <entry>message_group_member</entry>
        <entry>isCross</entry>
        <entry>inBlack</entry>
        <entry>user</entry>
        <entry>$user</entry>
        <entry>projectGro</entry>
        <entry>follow</entry>
        <entry>attachment</entry>
        <entry>users_compos</entry>
        <entry encoding="base64">XDxyZXF1ZXN0XD4=</entry>
        <entry encoding="base64">XDxmdW5jdGlvblw+</entry>
        <entry encoding="base64">XDx1c2VcPg==</entry>
        <entry encoding="base64">XDxwdWJsaWNcPg==</entry>
        <entry>keyword</entry>
        <entry>csrf</entry>
        <entry>picture</entry>
        <entry encoding="base64">XDxDb250cmFjdHNcPg==</entry>
        <entry>:136</entry>
      </history-search>
      <history-cmd>
        <entry>70</entry>
        <entry>116</entry>
        <entry>238</entry>
        <entry>141</entry>
        <entry encoding="base64">JzwsJz4yMzk5</entry>
        <entry>2399</entry>
        <entry>2424</entry>
        <entry>202</entry>
        <entry>140</entry>
        <entry>36</entry>
        <entry>99</entry>
        <entry>529</entry>
        <entry>50</entry>
        <entry>109</entry>
        <entry>17</entry>
        <entry>138</entry>
        <entry>624</entry>
        <entry>1260</entry>
        <entry>2487</entry>
        <entry>w</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
  </component>
  <component name="VimKeySettings">
    <shortcut-conflicts>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed U</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed I</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed Q</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed W</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed 2</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed J</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed K</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
  <component name="VimMarksSettings">
    <globalmarks />
    <filemarks>
      <file name="$USER_HOME$/gofreight/fms/frontend/node_modules/ag-grid-community/dist/lib/rendering/cellRenderers/iCellRenderer.d.ts" timestamp="1593574478078" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/accounting/prepaid_expanse/controller.js" timestamp="1593578330247" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/accounting/prepaid_expanse/app.component.ts" timestamp="1593579721076">
        <mark key="[" line="142" column="0" />
        <mark key="]" line="142" column="0" />
        <mark key="." line="142" column="0" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/accounting/prepaid_expanse/prepaid-expense.typs.ts" timestamp="1593576106369" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/center/hc-pagination-list-col-approval-action.component.ts" timestamp="1593578862013" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/accounting/prepaid_expanse/app.component.html" timestamp="1593579722630">
        <mark key="[" line="101" column="36" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/frontend/src/lib/angular/utility/grid-handler.ts" timestamp="1593577289713" />
      <file name="/payment-plan-data.service.ts" timestamp="1593574691149" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/center/app.component.ts" timestamp="1593578618499" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/lib/angular/utility/form-utility.ts" timestamp="1593577858200" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/lib/angular/shared-ag-grid/checkbox-header/checkbox-header.ts" timestamp="1593578573817" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/lib/angular/shared-ag-grid/date-picker-cell/date-picker-cell.component.html" timestamp="1593579165972" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/lib/angular/shared-ag-grid/cell-renderers/hc-pagination-list-col-text.ts" timestamp="1593574392821" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/lib/angular/shared-directive/date-range-picker.directive.ts" timestamp="1593579305031">
        <mark key="[" line="232" column="15" />
        <mark key="]" line="232" column="15" />
        <mark key="." line="232" column="15" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/app/freight/query_utility/accounting.py" timestamp="1593575653033" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/lib/angular/shared-ag-grid/date-picker-cell/date-picker-cell.component.ts" timestamp="1593579547167">
        <mark key="[" line="67" column="41" />
        <mark key="]" line="67" column="0" />
        <mark key="^" line="57" column="26" />
        <mark key="." line="67" column="0" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/accounting/fixed_asset/app.component.ts" timestamp="1593575479866" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/accounting/payment-plan/payment-plan-data-service/payment-plan-data.service.ts" timestamp="1593574641065" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/lib/angular/shared-ag-grid/readonly-input-cell/readonly-input-cell.component.ts" timestamp="1593574322201" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/lib/angular/shared-component/hc-tp-select/hc-tp-select.component.ts" timestamp="1593574918019" />
    </filemarks>
    <jumps>
      <jump line="1236" column="63" filename="$USER_HOME$/gofreight/fms/app/freight/views_reports/utility.py" />
      <jump line="1232" column="4" filename="$USER_HOME$/gofreight/fms/app/freight/views_reports/utility.py" />
      <jump line="134" column="29" filename="$USER_HOME$/gofreight/fms/app/jobflow/views.py" />
      <jump line="69" column="39" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/setting/app.component.html" />
      <jump line="0" column="0" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/setting/app.component.html" />
      <jump line="5" column="4" filename="$USER_HOME$/gofreight/fms/frontend/src/component_form/trade_partner/form_trade_partner_info_picker.html" />
      <jump line="28" column="0" filename="$USER_HOME$/gofreight/fms/frontend/src/lib/angular/bootstrap-tool/hc-popover-hover.directive.ts" />
      <jump line="163" column="39" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/sales/trade_partner_entry/index.html" />
      <jump line="6" column="19" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/setting/rule.type.ts" />
      <jump line="34" column="24" filename="/amendment.py" />
      <jump line="8" column="34" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/accounting/prepaid_expanse/app.component.text_def.ts" />
      <jump line="45" column="105" filename="$USER_HOME$/gofreight/fms/test/accounting/transaction/updater/utility.py" />
      <jump line="118" column="4" filename="$USER_HOME$/gofreight/fms/test/accounting/transaction/updater/utility.py" />
      <jump line="52" column="82" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/center/app.component.html" />
      <jump line="24" column="42" filename="$USER_HOME$/gofreight/fms/app/accounting/transaction/db_updater/amortization.py" />
      <jump line="9" column="24" filename="$USER_HOME$/gofreight/ui-select/package.json" />
      <jump line="0" column="0" filename="/Dummy.txt" />
    </jumps>
  </component>
  <component name="VimRegisterSettings">
    <registers>
      <register name="a" type="4">
        <keys>
          <key char="70" code="0" mods="0" />
          <key char="60" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="36" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="&quot;" type="2">
        <text encoding="base64">ICAgIGNvbnNvbGUubG9nKCd1cGRhdGUnKTsK</text>
      </register>
      <register name="b" type="4">
        <keys>
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="91" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="93" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="91" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="93" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="118" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="c" type="4">
        <keys>
          <key char="94" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="41" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="d" type="4">
        <text>2ddj2dd</text>
      </register>
      <register name="f" type="4">
        <keys>
          <key char="108" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="91" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="93" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="91" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="93" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="j" type="4">
        <text>2ddkkkk2dd</text>
      </register>
      <register name="l" type="4">
        <keys>
          <key char="108" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="-" type="4">
        <text>minDate</text>
      </register>
      <register name="m" type="4">
        <keys>
          <key char="48" code="0" mods="0" />
          <key char="71" code="0" mods="0" />
          <key char="49" code="0" mods="0" />
          <key char="71" code="0" mods="0" />
          <key char="79" code="0" mods="0" />
          <key char="60" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="71" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="63" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="113" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="n" type="4">
        <keys>
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="/" type="4">
        <text>:136</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">ICAgICAgdHJhZGVQYXJ0bmVyTGlzdCA9IF8udW5pcXVlQnkodHJhZGVQYXJ0bmVyTGlzdCwgdHAgPT4gdHAuY29kZSk7Cg==</text>
      </register>
      <register name="p" type="4">
        <keys>
          <key char="99" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="59" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="95" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="1" type="2">
        <text encoding="base64">ICAgIGNvbnNvbGUubG9nKCd1cGRhdGUnKTsK</text>
      </register>
      <register name="q" type="4">
        <text>kkjk</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICAgICAgY29uc29sZS5sb2coJ0dvdCBldmVudCcpOwo=</text>
      </register>
      <register name="3" type="2">
        <text encoding="base64">ICAgIHRoaXMuZ3JpZENvbnRhaW5lci5ncmlkRXZlbnRTZXJ2aWNlOwo=</text>
      </register>
      <register name="4" type="4">
        <text encoding="base64">ewogIEBJbnB1dCgpIGRhdGFMaXN0OiBUUHJlcGFpZEV4cGVuc2VbXTsKICBASW5wdXQoKSBvdXRlckxpc3Q6IHsgY2hhbmdlT3JkZXI6IChvcmRlckJ5OiBzdHJpbmcpID0+IHZvaWQgfTsKICBAT3V0cHV0KCkgZm9ybURpcnR5Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpOwogIEBWaWV3Q2hpbGQoSGNHcmlkQ29udGFpbmVyQ29tcG9uZW50LCB7IHN0YXRpYzogdHJ1ZSB9KSBncmlkQ29udGFpbmVyOiBIY0dyaWRDb250YWluZXJDb21wb25lbnQ7CgogIGZvcm1Hcm91cDogRm9ybUdyb3VwOwogIGdyaWRIYW5kbGVyOiBHcmlkSGFuZGxlcjsKICBjb21tZW5jZU1pbkRhdGVNYXBwaW5nOiBSZWNvcmQ8c3RyaW5nLCBEYXRlIHwgbnVsbD4gPSB7fTsKICBtaW5EYXRlR2V0dGVyOiAocm93RGF0ZTogVFByZXBhaWRFeHBlbnNlKSA9PiBEYXRlIHwgbnVsbDsKICBtYWluQ3VycmVuY3k6IENob2ljZUludGVyZmFjZTsKICB1c2VyRGVmYXVsdE9mZmljZTogT2ZmaWNlSW50ZXJmYWNlOwogIHB1YmxpYyBfVCA9IF9UOwoKICBjdXN0b21HcmlkT3B0aW9uczogR3JpZE9wdGlvbnMgPSB7CiAgICBub1Jvd3NPdmVybGF5Q29tcG9uZW50OiBIY05vUm93c1JlbmRlcmVyLAogICAgY29udGV4dDogewogICAgICBhZGRSb3dDYWxsYmFjazogKCkgPT4gewogICAgICAgIHRoaXMuY3JlYXRlKCk7CiAgICAgIH0sCiAgICAgIG5vUm93VGV4dDogdGhpcy5fVC5OT19ST1dfVEVYVCwKICAgIH0sCiAgfTsKCiAgb25EYXRhTGlzdENoYW5nZSQkID0gbmV3IFN1YmplY3Q8VFByZXBhaWRFeHBlbnNlW10+KCk7CgogIHN1YnNjcmlwdGlvbnM6IHsgW2lkOiBzdHJpbmddOiBTdWJzY3JpcHRpb24gfSA9IHt9OwogIGNoZWNrQm94RGlzYWJsZVJ1bGUgPSAocm93SW5kZXg6IG51bWJlciwgcGFyYW06IElDZWxsUmVuZGVyZXJQYXJhbXMpOiBib29sZWFuID0+IHsKICAgIGNvbnN0IHByZXBhaWQgPSBwYXJhbS5kYXRhIGFzIFRQcmVwYWlkRXhwZW5zZTsKICAgIGlmIChwcmVwYWlkLmlkID09PSB1bmRlZmluZWQgfHwgcHJlcGFpZC5pZCA9PT0gbnVsbCB8fCB0aGlzLmNvbW1lbmNlTWluRGF0ZU1hcHBpbmdbcHJlcGFpZC5vZmZpY2VdID09PSBudWxsKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGNvbnN0IGNvbW1lbmNlTWluRGF0ZSA9IHRoaXMuY29tbWVuY2VNaW5EYXRlTWFwcGluZ1twcmVwYWlkLm9mZmljZV0gYXMgRGF0ZTsKICAgIHJldHVybiBnZXREYXRlRnJvbVNlcnZlclN0cihwcmVwYWlkLmNvbW1lbmNlX2RhdGUpIDwgY29tbWVuY2VNaW5EYXRlOwogIH07CgogIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpiZWZvcmV1bmxvYWQnLCBbJyRldmVudCddKQogIG9uQmVmb3JldW5sb2FkKGV2ZW50OiBhbnkpOiB2b2lkIHsKICAgIGlmICh0aGlzLnByZXBhaWRFeHBlbnNlRm9ybUFycmF5LmRpcnR5KSB7CiAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gX1QuTVNHLkNPTkZJUk1fV0lUSE9VVF9TQVZJTkc7CiAgICB9CiAgfQoKICBjb25zdHJ1Y3RvcigKICAgIHByaXZhdGUgZmI6IEZvcm1CdWlsZGVyLAogICAgcHJpdmF0ZSBwcmVwYWlkRXhwZW5zZVNlcnZpY2U6IFByZXBhaWRFeHBlbnNlRGF0YVNlcnZpY2UsCiAgICBwcml2YXRlIGZvcm1FcnJvclNlcnZpY2U6IEZvcm1FcnJvclNlcnZpY2UsCiAgICBwcml2YXRlIGN1cnJlbmN5U2VydmljZTogQ3VycmVuY3lTZXJ2aWNlLAogICAgcHJpdmF0ZSBjaG9pY2VTZXJ2aWNlOiBDaG9pY2VTZXJ2aWNlLAogICAgcHJpdmF0ZSBncmlkUHJlZmVyZW5jZVNlcnZpY2U6IE1vY2tHcmlkUHJlZmVyZW5jZVNlcnZpY2UsCiAgICBwcml2YXRlIGRlY2ltYWxQaXBlOiBIY0RlY2ltYWxQaXBlLAogICAgcHVibGljIHBlcm1pc3Npb25TZXJ2aWNlOiBQZXJtaXNzaW9uU2VydmljZSwKICAgIHByaXZhdGUgb2ZmaWNlU2VydmljZTogT2ZmaWNlU2VydmljZSwKICAgIHByaXZhdGUgaHR0cDogSHR0cENsaWVudCwKICApIHsKICAgIHRoaXMuYnVpbGRGb3JtKCk7CiAgfQoKICBidWlsZEZvcm0oKTogdm9pZCB7CiAgICB0aGlzLmZvcm1Hcm91cCA9IHRoaXMuZmIuZ3JvdXAoewogICAgICBwcmVwYWlkRXhwZW5zZXM6IHRoaXMuZmIuYXJyYXkoW10pLAogICAgICBkZWxldGVQcmVwYWlkRXhwZW5zZXM6IFtbXV0sCiAgICB9KTsKICB9CgogIG5nT25Jbml0KCk6IHZvaWQgewogICAgdGhpcy5ncmlkQ29udGFpbmVyLmdyaWRFdmVudFNlcnZpY2UuY29sdW1uU29ydGVkRXZlbnQkLnN1YnNjcmliZShuYW1lID0+IHsKICAgICAgdGhpcy5vdXRlckxpc3QuY2hhbmdlT3JkZXIobmFtZSk7CiAgICB9KTsKICAgIGNvbWJpbmVMYXRlc3QoWwogICAgICB0aGlzLm9uRGF0YUxpc3RDaGFuZ2UkJCwKICAgICAgdGhpcy5sYXN0QmxvY2tEYXRlJCwKICAgICAgdGhpcy5jdXJyZW5jeVNlcnZpY2UubWFpbkN1cnJlbmN5JCwKICAgICAgdGhpcy5wZXJtaXNzaW9uU2VydmljZS5QJCwKICAgICAgdGhpcy5vZmZpY2VTZXJ2aWNlLmFsbE9mZmljZXMkLAogICAgXSkuc3Vic2NyaWJlKChbaXRlbXMsIGxhc3RCbG9ja0RhdGVTdHIsIG1haW5DdXJyZW5jeSwgUCwgb2ZmaWNlc10pID0+IHsKICAgICAgT2JqZWN0LmtleXMobGFzdEJsb2NrRGF0ZVN0cikuZm9yRWFjaChvZmZpY2UgPT4gewogICAgICAgIHRoaXMuY29tbWVuY2VNaW5EYXRlTWFwcGluZ1tvZmZpY2VdID0gdGhpcy5ldmFsdWF0ZU1pbkNvbW1lbmNlRGF0ZSgKICAgICAgICAgIGdldERhdGVGcm9tU2VydmVyU3RyKGxhc3RCbG9ja0RhdGVTdHJbb2ZmaWNlXSksCiAgICAgICAgKTsKICAgICAgfSk7CiAgICAgIHRoaXMubWFpbkN1cnJlbmN5ID0gbWFpbkN1cnJlbmN5OwogICAgICB0aGlzLnVzZXJEZWZhdWx0T2ZmaWNlID0gb2ZmaWNlcy5kZWZhdWx0T2ZmaWNlOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBpdGVtcyA9IGl0ZW1zLm1hcChpdGVtID0+IHsKICAgICAgICAgIGlmICh0aGlzLmNvbW1lbmNlTWluRGF0ZU1hcHBpbmdbaXRlbS5vZmZpY2VdICE9PSBudWxsKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbW1lbmNlTWluRGF0ZSA9IHRoaXMuY29tbWVuY2VNaW5EYXRlTWFwcGluZ1tpdGVtLm9mZmljZV0gYXMgRGF0ZTsKICAgICAgICAgICAgaXRlbS5zdGF0dXMgPSBnZXREYXRlRnJvbVNlcnZlclN0cihpdGVtLmNvbW1lbmNlX2RhdGUpIDwgY29tbWVuY2VNaW5EYXRlID8gU1RBVFVTX0xPQ0sgOiAnJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0pOwogICAgICAgIHRoaXMubWluRGF0ZUdldHRlciA9IHJvd0RhdGEgPT4gewogICAgICAgICAgcmV0dXJuIHRoaXMuY29tbWVuY2VNaW5EYXRlTWFwcGluZ1tyb3dEYXRhLm9mZmljZV07CiAgICAgICAgfTsKICAgICAgICB0aGlzLmdyaWRDb250YWluZXIuc2VuZFJlZnJlc2hDb2x1bW5EZW1hbmQoKTsKICAgICAgICB0aGlzLmdyaWRIYW5kbGVyLnJlc2V0Um93cyhpdGVtcyk7CiAgICAgICAgZm9yIChjb25zdCBpZCBpbiB0aGlzLnN1YnNjcmlwdGlvbnMpIHsKICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc1tpZF0udW5zdWJzY3JpYmUoKTsKICAgICAgICAgIGRlbGV0ZSB0aGlzLnN1YnNjcmlwdGlvbnNbaWRdOwogICAgICAgIH0KICAgICAgICB0aGlzLnByZXBhaWRFeHBlbnNlRm9ybUFycmF5LmNvbnRyb2xzCiAgICAgICAgICAuZmlsdGVyKGNvbnRyb2wgPT4gY29udHJvbC5nZXQoJ3N0YXR1cycpPy52YWx1ZSA9PT0gU1RBVFVTX0xPQ0spCiAgICAgICAgICAuZm9yRWFjaChjb250cm9sID0+IHsKICAgICAgICAgICAgY29udHJvbC5kaXNhYmxlKCk7CiAgICAgICAgICB9KTsKICAgICAgICBpZiAoIVAuQVNTRVRfUFJFUEFJRF9FWFBFTlNFX0VESVQpIHsKICAgICAgICAgIHRoaXMucHJlcGFpZEV4cGVuc2VGb3JtQXJyYXkuZGlzYWJsZSgpOwogICAgICAgICAgdGhpcy5jaGVja0JveERpc2FibGVSdWxlID0gKCkgPT4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgdGhpcy5wcmVwYWlkRXhwZW5zZUZvcm1BcnJheS5jb250cm9scy5mb3JFYWNoKGNvbnRyb2wgPT4gewogICAgICAgICAgdGhpcy5hcHBseVJ1bGUoY29udHJvbC52YWx1ZSwgY29udHJvbCk7CiAgICAgICAgICB0aGlzLnN1YnNjcmliZUNvbnRyb2xCZWhhdmlvcihjb250cm9sKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnByZXBhaWRFeHBlbnNlRm9ybUFycmF5LnN0YXR1c0NoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHsKICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIHN1Y2ggJ2RpcnR5Q2hhbmdlJyBvYnNlcnZhYmxlLCBzbyB3ZSB1c2Ugc3RhdHVzQ2hhbmdlcyBhcyB0aGUgZXZlbnQgd2UgY2hlY2sgZGlydHkgdXBkYXRlLgogICAgICAgICAgLy8gQnV0IHdlIGNhbid0IGdldCB0aGUgbGF0ZXN0IGRpcnR5IGluZm8gaW4gdGhpcyBvYnNlcnZhYmxlIHN1YnNjcmlwdGlvbiBzb21ldGltZXMod2hlbiB3ZSBtYXJrIFByaXN0aW5lIG1hbnVhbGx5LAogICAgICAgICAgLy8gc28gdXNlIHNldFRpbWVvdXQgdG8gZ2V0IHRoZSBsYXRlc3QgZGlydHkgaW5mby4KICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLmZvcm1EaXJ0eUNoYW5nZS5lbWl0KHRoaXMucHJlcGFpZEV4cGVuc2VGb3JtQXJyYXkuZGlydHkpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5mb3JtR3JvdXAubWFya0FzUHJpc3RpbmUoKTsKICAgICAgfSk7CiAgICB9KTsKICAgIHRoaXMuc3Vic2NyaWJlU2F2ZSgpOwogIH0KCiAgZXZhbHVhdGVNaW5Db21tZW5jZURhdGUobGFzdEJsb2NrRGF0ZTogRGF0ZSB8IG51bGwpOiBEYXRlIHwgbnVsbCB7CiAgICBpZiAobGFzdEJsb2NrRGF0ZSAhPT0gbnVsbCkgewogICAgICBsZXQgbWluRGF0ZTogRGF0ZTsKICAgICAgLy8gSWYgZGF0ZSBvZiBsYXN0QmxvY2tEYXRlIGlzIDF+MTQgb24gRmVicnVhcnkgb3IgaXMgMX4xNSBvbiB0aGUgb3RoZXIgbW9udGg6CiAgICAgIC8vICAgc2V0IG1pbkNvbW1lbmNlRGF0ZSB0byAxNCAob24gRmVicnVhcnkpIG9yIDE1IChvbiB0aGUgb3RoZXIgbW9udGgpCiAgICAgIC8vIGVsc2U6CiAgICAgIC8vICAgc2V0IG1pbkNvbW1lbmNlRGF0ZSB0byB0aGUgbmV4dCBkYXkgb2YgbGFzdEJsb2NrRGF0ZQogICAgICBpZiAoCiAgICAgICAgKGxhc3RCbG9ja0RhdGUuZ2V0TW9udGgoKSA9PT0gMSAmJiBsYXN0QmxvY2tEYXRlLmdldERhdGUoKSA8IDE1KSB8fAogICAgICAgIChsYXN0QmxvY2tEYXRlLmdldE1vbnRoKCkgIT09IDEgJiYgbGFzdEJsb2NrRGF0ZS5nZXREYXRlKCkgPCAxNikKICAgICAgKSB7CiAgICAgICAgbWluRGF0ZSA9CiAgICAgICAgICBsYXN0QmxvY2tEYXRlLmdldE1vbnRoKCkgPT09IDEKICAgICAgICAgICAgPyBuZXcgRGF0ZShsYXN0QmxvY2tEYXRlLmdldEZ1bGxZZWFyKCksIGxhc3RCbG9ja0RhdGUuZ2V0TW9udGgoKSwgMTUpCiAgICAgICAgICAgIDogbmV3IERhdGUobGFzdEJsb2NrRGF0ZS5nZXRGdWxsWWVhcigpLCBsYXN0QmxvY2tEYXRlLmdldE1vbnRoKCksIDE2KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtaW5EYXRlID0gbmV3IERhdGUobGFzdEJsb2NrRGF0ZS5nZXRGdWxsWWVhcigpLCBsYXN0QmxvY2tEYXRlLmdldE1vbnRoKCksIGxhc3RCbG9ja0RhdGUuZ2V0RGF0ZSgpICsgMSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG1pbkRhdGU7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHsKICAgIGlmIChjaGFuZ2VzLmRhdGFMaXN0KSB7CiAgICAgIHRoaXMub25EYXRhTGlzdENoYW5nZSQkLm5leHQodGhpcy5kYXRhTGlzdCk7CiAgICB9CiAgfQoKICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7CiAgICB0aGlzLmdyaWRIYW5kbGVyID0gbmV3IEdyaWRIYW5kbGVyKAogICAgICAoKSA9PiB0aGlzLmNyZWF0ZVByZXBhaWRFeHBlbnNlRm9ybSgpLAogICAgICB0aGlzLmdyaWRDb250YWluZXIsCiAgICAgIHRoaXMucHJlcGFpZEV4cGVuc2VGb3JtQXJyYXksCiAgICApOwogIH0KCiAgc3Vic2NyaWJlQ29udHJvbEJlaGF2aW9yKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IHZvaWQgewogICAgY29uc3QgaWQgPSB0aGlzLmdldFN1YnNjcmlwdGlvbklkKGNvbnRyb2wpOwogICAgdGhpcy51bnN1YnNjcmliZShjb250cm9sKTsKICAgIHRoaXMuc3Vic2NyaXB0aW9uc1tpZF0gPSB2YWx1ZUNoYW5nZUZyb21Vc2VyJDxUUHJlcGFpZEV4cGVuc2U+KGNvbnRyb2wpLnN1YnNjcmliZShpdGVtID0+IHsKICAgICAgdGhpcy5hcHBseVJ1bGUoaXRlbSwgY29udHJvbCk7CiAgICAgIC8vIHRoaXMuZ3JpZENvbnRhaW5lci5zZW5kUmVmcmVzaENvbHVtbkRlbWFuZCgpOwogICAgICBjb25zdCBtaW5Db21tZW5jZURhdGUgPSB0aGlzLmNvbW1lbmNlTWluRGF0ZU1hcHBpbmdbaXRlbS5vZmZpY2VdOwogICAgICBpZiAoaXRlbS5jb21tZW5jZV9kYXRlICYmIG1pbkNvbW1lbmNlRGF0ZSkgewogICAgICAgIGlmIChuZXcgRGF0ZShpdGVtLmNvbW1lbmNlX2RhdGUpIDwgbWluQ29tbWVuY2VEYXRlKSB7CiAgICAgICAgICBjb250cm9sLmdldCgnY29tbWVuY2VfZGF0ZScpPy5wYXRjaFZhbHVlKCcnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0KCiAgdW5zdWJzY3JpYmUoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogdm9pZCB7CiAgICBjb25zdCBpZCA9IHRoaXMuZ2V0U3Vic2NyaXB0aW9uSWQoY29udHJvbCk7CiAgICB0aGlzLnN1YnNjcmlwdGlvbnNbaWRdPy51bnN1YnNjcmliZSgpOwogICAgZGVsZXRlIHRoaXMuc3Vic2NyaXB0aW9uc1tpZF07CiAgfQoKICBnZXRTdWJzY3JpcHRpb25JZChjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiBzdHJpbmcgewogICAgcmV0dXJuIGNvbnRyb2wuZ2V0KCd1dWlkJyk/LnZhbHVlID8gY29udHJvbC5nZXQoJ3V1aWQnKT8udmFsdWUgOiBjb250cm9sLmdldCgnaWQnKT8udmFsdWU7CiAgfQoKICBhcHBseVJ1bGUoaXRlbTogVFByZXBhaWRFeHBlbnNlLCBjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiB2b2lkIHsKICAgIGNvbnN0IGl0ZW1XaXRoRGVwcmVjaWF0aW9uID0gdGhpcy5wcmVwYWlkRXhwZW5zZVNlcnZpY2UuY2FsY3VsYXRlQWNjdW11bGF0ZWRFeHBlbnNlKGl0ZW0pOwogICAgY29udHJvbAogICAgICAuZ2V0KCdhY2N1bXVsYXRlZF9leHBlbnNlJykKICAgICAgPy5wYXRjaFZhbHVlKHRoaXMuZGVjaW1hbFBpcGUudHJhbnNmb3JtKGl0ZW1XaXRoRGVwcmVjaWF0aW9uLmFjY3VtdWxhdGVkX2V4cGVuc2UpKTsKICAgIGNvbnRyb2wuZ2V0KCdib29rX3ZhbHVlJyk/LnBhdGNoVmFsdWUodGhpcy5kZWNpbWFsUGlwZS50cmFuc2Zvcm0oaXRlbVdpdGhEZXByZWNpYXRpb24uYm9va192YWx1ZSkpOwogICAgY29udHJvbC5nZXQoJ2VuZF9vZl90aGVfdGVybScpPy5wYXRjaFZhbHVlKGl0ZW1XaXRoRGVwcmVjaWF0aW9uLmVuZF9vZl90aGVfdGVybSk7CgogICAgY29udHJvbC5nZXQoJ2N1cnJlbmN5Jyk/LnBhdGNoVmFsdWUodGhpcy5tYWluQ3VycmVuY3kuaWQpOwogICAgY29udHJvbC5nZXQoJ2N1cnJlbmN5Jyk/LmRpc2FibGUoKTsKICAgIGNvbnRyb2wuZ2V0KCdlbmRfb2ZfdGhlX3Rlcm0nKT8uZGlzYWJsZSgpOwogICAgaWYgKGNvbnRyb2wuZGlzYWJsZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQogIH0KCiAgY3JlYXRlUHJlcGFpZEV4cGVuc2VGb3JtKCk6IEZvcm1Hcm91cCB7CiAgICByZXR1cm4gdGhpcy5mYi5ncm91cCh7CiAgICAgIGlkOiBbbnVsbF0sCiAgICAgIHByZXBhaWRfZXhwZW5zZV9ubzogW251bGwsIFZhbGlkYXRvcnMucmVxdWlyZWRdLAogICAgICBwcmVwYWlkX3R5cGU6IFtQUkVQQUlEX1RZUEUuUFJFUEFJRF9FWFBFTlNFLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSwKICAgICAgZGVzY3JpcHRpb246IFtudWxsLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSwKICAgICAgZXhwZW5zZV9nbF9jb2RlOiBbbnVsbCwgVmFsaWRhdG9ycy5yZXF1aXJlZF0sCiAgICAgIHBheW1lbnRfZGF0ZTogW251bGwsIFZhbGlkYXRvcnMucmVxdWlyZWRdLAogICAgICBjb21tZW5jZV9kYXRlOiBbbnVsbCwgW1ZhbGlkYXRvcnMucmVxdWlyZWQsIHRoaXMuY29tbWVuY2VEYXRlVmFsaWRhdG9yKCldXSwKICAgICAgdGVybTogW251bGwsIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCBwb3NpdGl2ZVZhbGlkYXRvcigpLCBpbnRlZ2VyVmFsaWRhdG9yKCksIG5vblplcm9WYWxpZGF0b3IoKV1dLAogICAgICBhbW91bnQ6IFtudWxsLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgcG9zaXRpdmVWYWxpZGF0b3IoKV1dLAogICAgICBjdXJyZW5jeTogW251bGwsIFZhbGlkYXRvcnMucmVxdWlyZWRdLAogICAgICBkZXByZWNpYXRpb25fbWV0aG9kOiBbJ1MnLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSwKICAgICAgb2ZmaWNlOiBbdGhpcy51c2VyRGVmYXVsdE9mZmljZS5pZCwgVmFsaWRhdG9ycy5yZXF1aXJlZF0sCiAgICAgIGFjY3VtdWxhdGVkX2V4cGVuc2U6IFtudWxsXSwKICAgICAgYm9va192YWx1ZTogW251bGxdLAogICAgICBlbmRfb2ZfdGhlX3Rlcm06IFtudWxsXSwKICAgICAgc3RhdHVzOiBbbnVsbF0sCiAgICAgIHV1aWQ6IFtudWxsXSwKICAgIH0pOwogIH0KCiAgY29tbWVuY2VEYXRlVmFsaWRhdG9yKCk6IFZhbGlkYXRvckZuIHsKICAgIHJldHVybiAoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSB8IG51bGwgPT4gewogICAgICBpZiAoIWNvbnRyb2wucGFyZW50KSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgY29uc3QgY29tbWVuY2VEYXRlQ3RybCA9IGNvbnRyb2wucGFyZW50LmdldCgnY29tbWVuY2VfZGF0ZScpIGFzIEZvcm1Db250cm9sOwogICAgICBjb25zdCBvZmZpY2VDdHJsID0gY29udHJvbC5wYXJlbnQuZ2V0KCdvZmZpY2UnKSBhcyBGb3JtQ29udHJvbDsKICAgICAgaWYgKHRoaXMuY29tbWVuY2VNaW5EYXRlTWFwcGluZ1tvZmZpY2VDdHJsLnZhbHVlXSA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGNvbnN0IGNvbW1lbmNlTWluRGF0ZSA9IHRoaXMuY29tbWVuY2VNaW5EYXRlTWFwcGluZ1tvZmZpY2VDdHJsLnZhbHVlXSBhcyBEYXRlOwoKICAgICAgcmV0dXJuIG1pbkRhdGVWYWxpZGF0b3IoY29tbWVuY2VNaW5EYXRlKShjb21tZW5jZURhdGVDdHJsKTsKICAgIH07CiAgfQoKICBzdWJzY3JpYmVTYXZlKCk6IHZvaWQgewogICAgdGhpcy5wcmVwYWlkRXhwZW5zZVNlcnZpY2Uuc2F2ZWQkLnN1YnNjcmliZSgKICAgICAgcHJlcGFpZEV4cGVuc2UgPT4gewogICAgICAgIHNob3dTdWNjZXNzRmVlZGJhY2tNc2coX1QuTVNHLlNBVkVfREFUQV9TVUNDKTsKICAgICAgICB0aGlzLmZvcm1Hcm91cC5nZXQoJ2RlbGV0ZVByZXBhaWRFeHBlbnNlcycpPy5zZXRWYWx1ZShbXSk7CiAgICAgICAgcHJlcGFpZEV4cGVuc2UuZm9yRWFjaChwcmVwYWlkRXhwZW5zZSA9PiB7CiAgICAgICAgICBpZiAocHJlcGFpZEV4cGVuc2UudXVpZCAhPT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLnByZXBhaWRFeHBlbnNlRm9ybUFycmF5LmNvbnRyb2xzCiAgICAgICAgICAgICAgLmZpbHRlcihjb250cm9sID0+IGNvbnRyb2wuZ2V0KCd1dWlkJyk/LnZhbHVlID09PSBwcmVwYWlkRXhwZW5zZS51dWlkKVswXQogICAgICAgICAgICAgIC5wYXRjaFZhbHVlKHByZXBhaWRFeHBlbnNlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMucHJlcGFpZEV4cGVuc2VGb3JtQXJyYXkuY29udHJvbHMKICAgICAgICAgICAgICAuZmlsdGVyKGNvbnRyb2wgPT4gY29udHJvbC5nZXQoJ2lkJyk/LnZhbHVlID09PSBwcmVwYWlkRXhwZW5zZS5pZClbMF0KICAgICAgICAgICAgICAucGF0Y2hWYWx1ZShwcmVwYWlkRXhwZW5zZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5mb3JtR3JvdXAubWFya0FzUHJpc3RpbmUoKTsKICAgICAgICBoaWRlU3BpbigpOwogICAgICB9LAogICAgICAoZXJyb3I6IEh0dHBFcnJvclJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5zdWJzY3JpYmVTYXZlKCk7CiAgICAgICAgaGlkZVNwaW4oKTsKICAgICAgICBzaG93RXJyb3JGZWVkYmFja01zZyhgJHtfVC5NU0cuU0FWRV9EQVRBX0ZBSUx9OiAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgICAgIH0sCiAgICApOwogIH0KCiAgY3JlYXRlKCk6IHZvaWQgewogICAgdGhpcy5ncmlkSGFuZGxlci5hcHBlbmRSb3dzKDEpOwogICAgY29uc3QgY29udHJvbCA9IHRoaXMucHJlcGFpZEV4cGVuc2VGb3JtQXJyYXkuYXQodGhpcy5wcmVwYWlkRXhwZW5zZUZvcm1BcnJheS5sZW5ndGggLSAxKTsKICAgIGNvbnRyb2wuZ2V0KCd1dWlkJyk/LnNldFZhbHVlKHV1aWR2NCgpKTsKICAgIGNvbnRyb2wubWFya0FzRGlydHkoKTsKICAgIHRoaXMuYXBwbHlSdWxlKGNvbnRyb2wudmFsdWUsIGNvbnRyb2wpOwogICAgdGhpcy5zdWJzY3JpYmVDb250cm9sQmVoYXZpb3IoY29udHJvbCk7CiAgfQoKICBkZWxldGUoKTogdm9pZCB7CiAgICBjb25zdCBzZWxlY3RlZEluZGljZXMgPSB0aGlzLmdyaWRDb250YWluZXIuZ2V0U2VsZWN0ZWRJbmRpY2VzKCk7CiAgICBjb25zdCBzZWxlY3RlZERhdGE6IFRQcmVwYWlkRXhwZW5zZVtdID0gc2VsZWN0ZWRJbmRpY2VzPy5tYXAoaW5kZXggPT4gewogICAgICByZXR1cm4gdGhpcy5wcmVwYWlkRXhwZW5zZUZvcm1BcnJheS5nZXRSYXdWYWx1ZSgpW2luZGV4XTsKICAgIH0pOwogICAgc2VsZWN0ZWRJbmRpY2VzPy5mb3JFYWNoKGluZGV4ID0+IHsKICAgICAgY29uc3QgY29udHJvbCA9IHRoaXMucHJlcGFpZEV4cGVuc2VGb3JtQXJyYXkuYXQoaW5kZXgpOwogICAgICB0aGlzLnVuc3Vic2NyaWJlKGNvbnRyb2wpOwogICAgfSk7CiAgICB0aGlzLmZvcm1Hcm91cAogICAgICAuZ2V0KCdkZWxldGVQcmVwYWlkRXhwZW5zZXMnKQogICAgICA/LnBhdGNoVmFsdWUoWwogICAgICAgIC4uLnRoaXMuZm9ybUdyb3VwLmdldCgnZGVsZXRlUHJlcGFpZEV4cGVuc2VzJyk/LnZhbHVlLAogICAgICAgIC4uLnNlbGVjdGVkRGF0YS5maWx0ZXIocHJlcGFpZEV4cGVuc2UgPT4gcHJlcGFpZEV4cGVuc2UuaWQpLm1hcChwcmVwYWlkRXhwZW5zZSA9PiBwcmVwYWlkRXhwZW5zZS5pZCksCiAgICAgIF0pOwogICAgdGhpcy5ncmlkSGFuZGxlci5yZW1vdmVTZWxlY3RlZFJvd3MoKTsKICAgIC8vIFRPRE8gSGVhZGVyIENoZWNrIEJveCB3b24ndCBjbGVhciBhZnRlciByb3cgZGVsZXRlZCB3aGVuIHRoZXJlIGFyZSBzb21lIGRpc2FibGVkIHJvd3MuIEl0IHNlZW1zIGEgYnVnIG9mIGFnLWdyaWQKICAgIC8vICAgICAgTWFudWFsbHkgY2FsbCBhbiB1bnNlbGVjdGVkIGV2ZW50IHRvIHdvcmsgYXJvdW5kIGl0CiAgICB0aGlzLmdyaWRDb250YWluZXIuZ3JpZEV2ZW50U2VydmljZS51bnNlbGVjdGVkLm5leHQoKTsKICB9CgogIHNhdmUoKTogdm9pZCB7CiAgICBpZiAodGhpcy5mb3JtR3JvdXAuaW52YWxpZCkgewogICAgICBjb25zdCBlcnJvcnMgPSBnZXRGb3JtVmFsaWRhdGlvbkVycm9ycyh0aGlzLmZvcm1Hcm91cCk7CiAgICAgIHRoaXMuZm9ybUVycm9yU2VydmljZS5lbWl0RXZlbnQoRk9STV9FUlJPUl9FVkVOVC5TVEFSVF9TSE9XX0VSUk9SKTsKICAgICAgdGhpcy5mb3JtRXJyb3JTZXJ2aWNlLmVtaXRFdmVudChGT1JNX0VSUk9SX0VWRU5ULkZPQ1VTX0lOVkFMSURfRklFTEQpOwogICAgICBjb25zdCBlcnJvck1lc3NhZ2VTZXQgPSBuZXcgU2V0PHN0cmluZz4oKTsKICAgICAgZXJyb3JzLmZvckVhY2goZXJyb3IgPT4gewogICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UoZXJyb3IsIHsKICAgICAgICAgIFtWQUxJREFURV9FUlJPUl9NSU5fREFURV06IHsKICAgICAgICAgICAgY29tbWVuY2VfZGF0ZTogX1QuRVJST1JTLkNPTU1FTkNFX0RBVEVfTEVTU19USEFOX0xBU1RfQkxPQ0tfREFURSwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgICAgaWYgKCFlcnJvck1lc3NhZ2VTZXQuaGFzKG1lc3NhZ2UpKSB7CiAgICAgICAgICBzaG93RXJyb3JGZWVkYmFja01zZyhtZXNzYWdlKTsKICAgICAgICAgIGVycm9yTWVzc2FnZVNldC5hZGQobWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgc2hvd1NwaW4oKTsKICAgIGNvbnN0IHByZXBhaWRFeHBlbnNlOiBUUHJlcGFpZEV4cGVuc2VbXSA9IHRoaXMucHJlcGFpZEV4cGVuc2VGb3JtQXJyYXkuY29udHJvbHMKICAgICAgLmZpbHRlcihjb250cm9sID0+IGNvbnRyb2wuZGlydHkpCiAgICAgIC5tYXAoY29udHJvbCA9PiBjb250cm9sLnZhbHVlKTsKICAgIHRoaXMucHJlcGFpZEV4cGVuc2VTZXJ2aWNlLnNhdmUocHJlcGFpZEV4cGVuc2UsIHRoaXMuZGVsZXRlUHJlcGFpZEV4cGVuc2VzPy52YWx1ZSk7CiAgfQoKICBnZXQgY3VycmVuY3kkKCk6IE9ic2VydmFibGU8Q2hvaWNlSW50ZXJmYWNlW10+IHsKICAgIHJldHVybiB0aGlzLmN1cnJlbmN5U2VydmljZS5jdXJyZW5jeUNob2ljZXMkOwogIH0KCiAgZ2V0IG9mZmljZSQoKTogT2JzZXJ2YWJsZTxDaG9pY2VJbnRlcmZhY2VbXT4gewogICAgcmV0dXJuIHRoaXMuY2hvaWNlU2VydmljZS5nZXRDaG9pY2VTdWJqZWN0KClbJ29mZmljZSQnXTsKICB9CgogIGdldCBwcmVwYWlkX3R5cGUkKCk6IE9ic2VydmFibGU8Q2hvaWNlSW50ZXJmYWNlW10+IHsKICAgIHJldHVybiB0aGlzLmNob2ljZVNlcnZpY2UuZ2V0Q2hvaWNlU3ViamVjdCgpWydwcmVwYWlkX2V4cGVuc2VfcHJlcGFpZF90eXBlJCddOwogIH0KCiAgZ2V0IGV4cGVuc2VfdHlwZSQoKTogT2JzZXJ2YWJsZTxDaG9pY2VJbnRlcmZhY2VbXT4gewogICAgcmV0dXJuIHRoaXMuY2hvaWNlU2VydmljZS5nZXRDaG9pY2VTdWJqZWN0KClbJ3ByZXBhaWRfZXhwZW5zZV9leHBlbnNlX3R5cGUkJ107CiAgfQoKICBnZXQgcHJlcGFpZEV4cGVuc2VGb3JtQXJyYXkoKTogRm9ybUFycmF5IHsKICAgIHJldHVybiB0aGlzLmZvcm1Hcm91cC5nZXQoJ3ByZXBhaWRFeHBlbnNlcycpIGFzIEZvcm1BcnJheTsKICB9CgogIGdldCBkZWxldGVQcmVwYWlkRXhwZW5zZXMoKTogRm9ybUNvbnRyb2wgewogICAgcmV0dXJuIHRoaXMuZm9ybUdyb3VwLmdldCgnZGVsZXRlUHJlcGFpZEV4cGVuc2VzJykgYXMgRm9ybUNvbnRyb2w7CiAgfQoKICBnZXQgbGFzdEJsb2NrRGF0ZSQoKTogT2JzZXJ2YWJsZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiB7CiAgICByZXR1cm4gdGhpcy5odHRwLmdldDxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PignYXBpL2FsbC1sYXN0LWJsb2NrLWRhdGUvJyk7CiAgfQoKICBjZWxsQ2xhc3NSdWxlcyA9IHsKICAgICdyb3ctc3Bhbi1vZGQnOiAocGFyYW06IHsgcm93SW5kZXg6IG51bWJlciB9KTogYm9vbGVhbiA9PiBwYXJhbS5yb3dJbmRleCAlIDIgIT09IDAsCiAgICAncm93LXNwYW4tZXZlbic6IChwYXJhbTogeyByb3dJbmRleDogbnVtYmVyIH0pOiBib29sZWFuID0+IHBhcmFtLnJvd0luZGV4ICUgMiA9PT0gMCwKICB9Owp9</text>
      </register>
      <register name="t" type="4">
        <keys>
          <key char="106" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="113" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="56" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="5" type="2">
        <text encoding="base64">aW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEVycm9yUmVzcG9uc2UgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7CmltcG9ydCB7CiAgQWZ0ZXJWaWV3SW5pdCwKICBDb21wb25lbnQsCiAgRXZlbnRFbWl0dGVyLAogIEhvc3RMaXN0ZW5lciwKICBJbnB1dCwKICBPbkNoYW5nZXMsCiAgT25Jbml0LAogIE91dHB1dCwKICBTaW1wbGVDaGFuZ2VzLAogIFZpZXdDaGlsZCwKfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKaW1wb3J0IHsKICBBYnN0cmFjdENvbnRyb2wsCiAgRm9ybUFycmF5LAogIEZvcm1CdWlsZGVyLAogIEZvcm1Db250cm9sLAogIEZvcm1Hcm91cCwKICBWYWxpZGF0b3JGbiwKICBWYWxpZGF0b3JzLAp9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJzsKaW1wb3J0IHsgZG93bmdyYWRlQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvdXBncmFkZS9zdGF0aWMnOwppbXBvcnQgeyBHcmlkT3B0aW9ucywgSUNlbGxSZW5kZXJlclBhcmFtcyB9IGZyb20gJ2FnLWdyaWQtY29tbXVuaXR5JzsKaW1wb3J0IHsgQ2hvaWNlU2VydmljZSB9IGZyb20gJ0xpYi9hbmd1bGFyL2NvcmUtc2VydmljZXMvY2hpb2NlLnNlcnZpY2UnOwppbXBvcnQgeyBDdXJyZW5jeVNlcnZpY2UgfSBmcm9tICdMaWIvYW5ndWxhci9jb3JlLXNlcnZpY2VzL2N1cnJlbmN5LnNlcnZpY2UnOwppbXBvcnQgeyBHcmlkUHJlZmVyZW5jZVNlcnZpY2UgfSBmcm9tICdMaWIvYW5ndWxhci9jb3JlLXNlcnZpY2VzL2dyaWQtcHJlZmVyZW5jZS5zZXJ2aWNlJzsKaW1wb3J0IHsgTW9ja0dyaWRQcmVmZXJlbmNlU2VydmljZSB9IGZyb20gJ0xpYi9hbmd1bGFyL2NvcmUtc2VydmljZXMvbW9jay1ncmlkLXByZWZlcmVuY2Uuc2VydmljZSc7CmltcG9ydCB7IE9mZmljZVNlcnZpY2UgfSBmcm9tICdMaWIvYW5ndWxhci9jb3JlLXNlcnZpY2VzL29mZmljZS5zZXJ2aWNlJzsKaW1wb3J0IHsgUGVybWlzc2lvblNlcnZpY2UgfSBmcm9tICdMaWIvYW5ndWxhci9jb3JlLXNlcnZpY2VzL3Blcm1pc3Npb24uc2VydmljZSc7CmltcG9ydCB7IEhjTm9Sb3dzUmVuZGVyZXIgfSBmcm9tICdMaWIvYW5ndWxhci9zaGFyZWQtYWctZ3JpZC9jZWxsLXJlbmRlcmVycy9oYy1uby1yb3dzLXJlbmRlcmVyJzsKaW1wb3J0IHsgSGNHcmlkQ29udGFpbmVyQ29tcG9uZW50IH0gZnJvbSAnTGliL2FuZ3VsYXIvc2hhcmVkLWFnLWdyaWQvaGMtZ3JpZC1jb250YWluZXIvaGMtZ3JpZC1jb250YWluZXIuY29tcG9uZW50JzsKaW1wb3J0IHsgRk9STV9FUlJPUl9FVkVOVCwgRm9ybUVycm9yU2VydmljZSB9IGZyb20gJ0xpYi9hbmd1bGFyL3NoYXJlZC1kaXJlY3RpdmUvZm9ybS1lcnJvci1zZXJ2aWNlJzsKaW1wb3J0IHsgSGNEZWNpbWFsUGlwZSB9IGZyb20gJ0xpYi9hbmd1bGFyL3NoYXJlZC1waXBlL2hjLWRlY2ltYWwucGlwZSc7CmltcG9ydCB7IENob2ljZUludGVyZmFjZSB9IGZyb20gJ0xpYi9hbmd1bGFyL3R5cGVzL2Nob2ljZS5pbnRlcmZhY2UnOwppbXBvcnQgeyBPZmZpY2VJbnRlcmZhY2UgfSBmcm9tICdMaWIvYW5ndWxhci90eXBlcy9vZmZpY2UuaW50ZXJmYWNlJzsKaW1wb3J0IHsgVEVycm9yLCBlcnJvck1lc3NhZ2UsIGdldEZvcm1WYWxpZGF0aW9uRXJyb3JzIH0gZnJvbSAnTGliL2FuZ3VsYXIvdXRpbGl0eS9mb3JtLWVycm9yLWhhbmRsZXInOwppbXBvcnQgeyB2YWx1ZUNoYW5nZUZyb21Vc2VyJCwgdmFsdWVXaXRoU291cmNlJCB9IGZyb20gJ0xpYi9hbmd1bGFyL3V0aWxpdHkvZm9ybS11dGlsaXR5JzsKaW1wb3J0IHsKICBWQUxJREFURV9FUlJPUl9NSU5fREFURSwKICBpbnRlZ2VyVmFsaWRhdG9yLAogIG1pbkRhdGVWYWxpZGF0b3IsCiAgbm9uWmVyb1ZhbGlkYXRvciwKICBwb3NpdGl2ZVZhbGlkYXRvciwKfSBmcm9tICdMaWIvYW5ndWxhci91dGlsaXR5L2Zvcm0tdmFsaWRhdG9yJzsKaW1wb3J0IHsgR3JpZEhhbmRsZXIgfSBmcm9tICdMaWIvYW5ndWxhci91dGlsaXR5L2dyaWQtaGFuZGxlcic7CmltcG9ydCB7CiAgYW5ndWxhciwKICBjcmVhdGVTdHJpbmdGb3JtYXR0ZXIsCiAgZ2V0RGF0ZUZyb21TZXJ2ZXJTdHIsCiAgZ2V0VWlTdHJGcm9tRGF0ZSwKICBoaWRlU3BpbiwKICBzaG93RXJyb3JGZWVkYmFja01zZywKICBzaG93U3BpbiwKICBzaG93U3VjY2Vzc0ZlZWRiYWNrTXNnLAp9IGZyb20gJ0xpYi90cy9nbG9iYWwnOwppbXBvcnQgewogIFBSRVBBSURfVFlQRSwKICBQcmVwYWlkRXhwZW5zZURhdGFTZXJ2aWNlLAp9IGZyb20gJ1BhZ2UvZnJlaWdodC9hY2NvdW50aW5nL3ByZXBhaWRfZXhwYW5zZS9wcmVwYWlkLWV4cGVuc2UtZGF0YS5zZXJ2aWNlJzsKaW1wb3J0IHsgVFByZXBhaWRFeHBlbnNlIH0gZnJvbSAnUGFnZS9mcmVpZ2h0L2FjY291bnRpbmcvcHJlcGFpZF9leHBhbnNlL3ByZXBhaWQtZXhwZW5zZS50eXBzJzsKaW1wb3J0IHsgU1RBVFVTX0xPQ0sgfSBmcm9tICdQYWdlL2ZyZWlnaHQvYWNjb3VudGluZy9wcmVwYWlkX2V4cGFuc2Uvc3RhdHVzLWNlbGwuY29tcG9uZW50JzsKaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3ViamVjdCwgU3Vic2NyaXB0aW9uLCBjb21iaW5lTGF0ZXN0IH0gZnJvbSAncnhqcyc7CmltcG9ydCB7IGZpbHRlciwgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnOwppbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJzsKCmltcG9ydCB7IF9UIH0gZnJvbSAnLi9hcHAuY29tcG9uZW50LnRleHRfZGVmJzsKCmZ1bmN0aW9uIGNob2ljZVNlcnZpY2VGYWN0b3J5KGh0dHA6IEh0dHBDbGllbnQpOiBDaG9pY2VTZXJ2aWNlIHsKICBjb25zdCBzZXJ2aWNlID0gbmV3IENob2ljZVNlcnZpY2UoaHR0cCk7CiAgc2VydmljZS5pbml0KFsnb2ZmaWNlJywgJ3ByZXBhaWRfZXhwZW5zZV9wcmVwYWlkX3R5cGUnLCAncHJlcGFpZF9leHBlbnNlX2V4cGVuc2VfdHlwZSddLCB7fSk7CiAgcmV0dXJuIHNlcnZpY2U7Cn0KCkBDb21wb25lbnQoewogIHRlbXBsYXRlVXJsOiAnLi9hcHAuY29tcG9uZW50Lmh0bWwnLAogIHNlbGVjdG9yOiAnYXBwLXJvb3QnLAogIHZpZXdQcm92aWRlcnM6IFtGb3JtRXJyb3JTZXJ2aWNlXSwKICBwcm92aWRlcnM6IFsKICAgIEZvcm1FcnJvclNlcnZpY2UsCiAgICB7IHByb3ZpZGU6IENob2ljZVNlcnZpY2UsIHVzZUZhY3Rvcnk6IGNob2ljZVNlcnZpY2VGYWN0b3J5LCBkZXBzOiBbSHR0cENsaWVudF0gfSwKICAgIHsgcHJvdmlkZTogR3JpZFByZWZlcmVuY2VTZXJ2aWNlLCB1c2VFeGlzdGluZzogTW9ja0dyaWRQcmVmZXJlbmNlU2VydmljZSB9LAogIF0sCn0pCmV4cG9ydCBjbGFzcyBBcHBDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCB7CiAgQElucHV0KCkgZGF0YUxpc3Q6IFRQcmVwYWlkRXhwZW5zZVtdOwogIEBJbnB1dCgpIG91dGVyTGlzdDogeyBjaGFuZ2VPcmRlcjogKG9yZGVyQnk6IHN0cmluZykgPT4gdm9pZCB9OwogIEBPdXRwdXQoKSBmb3JtRGlydHlDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7CiAgQFZpZXdDaGlsZChIY0dyaWRDb250YWluZXJDb21wb25lbnQsIHsgc3RhdGljOiB0cnVlIH0pIGdyaWRDb250YWluZXI6IEhjR3JpZENvbnRhaW5lckNvbXBvbmVudDsKCiAgZm9ybUdyb3VwOiBGb3JtR3JvdXA7CiAgZ3JpZEhhbmRsZXI6IEdyaWRIYW5kbGVyOwogIGNvbW1lbmNlTWluRGF0ZU1hcHBpbmc6IFJlY29yZDxzdHJpbmcsIERhdGUgfCBudWxsPiA9IHt9OwogIG1pbkRhdGVHZXR0ZXI6IChyb3dEYXRlOiBUUHJlcGFpZEV4cGVuc2UpID0+IERhdGUgfCBudWxsOwogIG1haW5DdXJyZW5jeTogQ2hvaWNlSW50ZXJmYWNlOwogIHVzZXJEZWZhdWx0T2ZmaWNlOiBPZmZpY2VJbnRlcmZhY2U7CiAgcHVibGljIF9UID0gX1Q7CgogIGN1c3RvbUdyaWRPcHRpb25zOiBHcmlkT3B0aW9ucyA9IHsKICAgIG5vUm93c092ZXJsYXlDb21wb25lbnQ6IEhjTm9Sb3dzUmVuZGVyZXIsCiAgICBjb250ZXh0OiB7CiAgICAgIGFkZFJvd0NhbGxiYWNrOiAoKSA9PiB7CiAgICAgICAgdGhpcy5jcmVhdGUoKTsKICAgICAgfSwKICAgICAgbm9Sb3dUZXh0OiB0aGlzLl9ULk5PX1JPV19URVhULAogICAgfSwKICB9OwoKICBvbkRhdGFMaXN0Q2hhbmdlJCQgPSBuZXcgU3ViamVjdDxUUHJlcGFpZEV4cGVuc2VbXT4oKTsKCiAgc3Vic2NyaXB0aW9uczogeyBbaWQ6IHN0cmluZ106IFN1YnNjcmlwdGlvbiB9ID0ge307CiAgY2hlY2tCb3hEaXNhYmxlUnVsZSA9IChyb3dJbmRleDogbnVtYmVyLCBwYXJhbTogSUNlbGxSZW5kZXJlclBhcmFtcyk6IGJvb2xlYW4gPT4gewogICAgY29uc3QgcHJlcGFpZCA9IHBhcmFtLmRhdGEgYXMgVFByZXBhaWRFeHBlbnNlOwogICAgaWYgKHByZXBhaWQuaWQgPT09IHVuZGVmaW5lZCB8fCBwcmVwYWlkLmlkID09PSBudWxsIHx8IHRoaXMuY29tbWVuY2VNaW5EYXRlTWFwcGluZ1twcmVwYWlkLm9mZmljZV0gPT09IG51bGwpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgY29uc3QgY29tbWVuY2VNaW5EYXRlID0gdGhpcy5jb21tZW5jZU1pbkRhdGVNYXBwaW5nW3ByZXBhaWQub2ZmaWNlXSBhcyBEYXRlOwogICAgcmV0dXJuIGdldERhdGVGcm9tU2VydmVyU3RyKHByZXBhaWQuY29tbWVuY2VfZGF0ZSkgPCBjb21tZW5jZU1pbkRhdGU7CiAgfTsKCiAgQEhvc3RMaXN0ZW5lcignd2luZG93OmJlZm9yZXVubG9hZCcsIFsnJGV2ZW50J10pCiAgb25CZWZvcmV1bmxvYWQoZXZlbnQ6IGFueSk6IHZvaWQgewogICAgaWYgKHRoaXMucHJlcGFpZEV4cGVuc2VGb3JtQXJyYXkuZGlydHkpIHsKICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBfVC5NU0cuQ09ORklSTV9XSVRIT1VUX1NBVklORzsKICAgIH0KICB9CgogIGNvbnN0cnVjdG9yKAogICAgcHJpdmF0ZSBmYjogRm9ybUJ1aWxkZXIsCiAgICBwcml2YXRlIHByZXBhaWRFeHBlbnNlU2VydmljZTogUHJlcGFpZEV4cGVuc2VEYXRhU2VydmljZSwKICAgIHByaXZhdGUgZm9ybUVycm9yU2VydmljZTogRm9ybUVycm9yU2VydmljZSwKICAgIHByaXZhdGUgY3VycmVuY3lTZXJ2aWNlOiBDdXJyZW5jeVNlcnZpY2UsCiAgICBwcml2YXRlIGNob2ljZVNlcnZpY2U6IENob2ljZVNlcnZpY2UsCiAgICBwcml2YXRlIGdyaWRQcmVmZXJlbmNlU2VydmljZTogTW9ja0dyaWRQcmVmZXJlbmNlU2VydmljZSwKICAgIHByaXZhdGUgZGVjaW1hbFBpcGU6IEhjRGVjaW1hbFBpcGUsCiAgICBwdWJsaWMgcGVybWlzc2lvblNlcnZpY2U6IFBlcm1pc3Npb25TZXJ2aWNlLAogICAgcHJpdmF0ZSBvZmZpY2VTZXJ2aWNlOiBPZmZpY2VTZXJ2aWNlLAogICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LAogICkgewogICAgdGhpcy5idWlsZEZvcm0oKTsKICB9CgogIGJ1aWxkRm9ybSgpOiB2b2lkIHsKICAgIHRoaXMuZm9ybUdyb3VwID0gdGhpcy5mYi5ncm91cCh7CiAgICAgIHByZXBhaWRFeHBlbnNlczogdGhpcy5mYi5hcnJheShbXSksCiAgICAgIGRlbGV0ZVByZXBhaWRFeHBlbnNlczogW1tdXSwKICAgIH0pOwogIH0KCiAgbmdPbkluaXQoKTogdm9pZCB7CiAgICB0aGlzLmdyaWRDb250YWluZXIuZ3JpZEV2ZW50U2VydmljZS5jb2x1bW5Tb3J0ZWRFdmVudCQuc3Vic2NyaWJlKG5hbWUgPT4gewogICAgICB0aGlzLm91dGVyTGlzdC5jaGFuZ2VPcmRlcihuYW1lKTsKICAgIH0pOwogICAgY29tYmluZUxhdGVzdChbCiAgICAgIHRoaXMub25EYXRhTGlzdENoYW5nZSQkLAogICAgICB0aGlzLmxhc3RCbG9ja0RhdGUkLAogICAgICB0aGlzLmN1cnJlbmN5U2VydmljZS5tYWluQ3VycmVuY3kkLAogICAgICB0aGlzLnBlcm1pc3Npb25TZXJ2aWNlLlAkLAogICAgICB0aGlzLm9mZmljZVNlcnZpY2UuYWxsT2ZmaWNlcyQsCiAgICBdKS5zdWJzY3JpYmUoKFtpdGVtcywgbGFzdEJsb2NrRGF0ZVN0ciwgbWFpbkN1cnJlbmN5LCBQLCBvZmZpY2VzXSkgPT4gewogICAgICBPYmplY3Qua2V5cyhsYXN0QmxvY2tEYXRlU3RyKS5mb3JFYWNoKG9mZmljZSA9PiB7CiAgICAgICAgdGhpcy5jb21tZW5jZU1pbkRhdGVNYXBwaW5nW29mZmljZV0gPSB0aGlzLmV2YWx1YXRlTWluQ29tbWVuY2VEYXRlKAogICAgICAgICAgZ2V0RGF0ZUZyb21TZXJ2ZXJTdHIobGFzdEJsb2NrRGF0ZVN0cltvZmZpY2VdKSwKICAgICAgICApOwogICAgICB9KTsKICAgICAgdGhpcy5tYWluQ3VycmVuY3kgPSBtYWluQ3VycmVuY3k7CiAgICAgIHRoaXMudXNlckRlZmF1bHRPZmZpY2UgPSBvZmZpY2VzLmRlZmF1bHRPZmZpY2U7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGl0ZW1zID0gaXRlbXMubWFwKGl0ZW0gPT4gewogICAgICAgICAgaWYgKHRoaXMuY29tbWVuY2VNaW5EYXRlTWFwcGluZ1tpdGVtLm9mZmljZV0gIT09IG51bGwpIHsKICAgICAgICAgICAgY29uc3QgY29tbWVuY2VNaW5EYXRlID0gdGhpcy5jb21tZW5jZU1pbkRhdGVNYXBwaW5nW2l0ZW0ub2ZmaWNlXSBhcyBEYXRlOwogICAgICAgICAgICBpdGVtLnN0YXR1cyA9IGdldERhdGVGcm9tU2VydmVyU3RyKGl0ZW0uY29tbWVuY2VfZGF0ZSkgPCBjb21tZW5jZU1pbkRhdGUgPyBTVEFUVVNfTE9DSyA6ICcnOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5taW5EYXRlR2V0dGVyID0gcm93RGF0YSA9PiB7CiAgICAgICAgICByZXR1cm4gdGhpcy5jb21tZW5jZU1pbkRhdGVNYXBwaW5nW3Jvd0RhdGEub2ZmaWNlXTsKICAgICAgICB9OwogICAgICAgIHRoaXMuZ3JpZENvbnRhaW5lci5zZW5kUmVmcmVzaENvbHVtbkRlbWFuZCgpOwogICAgICAgIHRoaXMuZ3JpZEhhbmRsZXIucmVzZXRSb3dzKGl0ZW1zKTsKICAgICAgICBmb3IgKGNvbnN0IGlkIGluIHRoaXMuc3Vic2NyaXB0aW9ucykgewogICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zW2lkXS51bnN1YnNjcmliZSgpOwogICAgICAgICAgZGVsZXRlIHRoaXMuc3Vic2NyaXB0aW9uc1tpZF07CiAgICAgICAgfQogICAgICAgIHRoaXMucHJlcGFpZEV4cGVuc2VGb3JtQXJyYXkuY29udHJvbHMKICAgICAgICAgIC5maWx0ZXIoY29udHJvbCA9PiBjb250cm9sLmdldCgnc3RhdHVzJyk/LnZhbHVlID09PSBTVEFUVVNfTE9DSykKICAgICAgICAgIC5mb3JFYWNoKGNvbnRyb2wgPT4gewogICAgICAgICAgICBjb250cm9sLmRpc2FibGUoKTsKICAgICAgICAgIH0pOwogICAgICAgIGlmICghUC5BU1NFVF9QUkVQQUlEX0VYUEVOU0VfRURJVCkgewogICAgICAgICAgdGhpcy5wcmVwYWlkRXhwZW5zZUZvcm1BcnJheS5kaXNhYmxlKCk7CiAgICAgICAgICB0aGlzLmNoZWNrQm94RGlzYWJsZVJ1bGUgPSAoKSA9PiB0cnVlOwogICAgICAgIH0KICAgICAgICB0aGlzLnByZXBhaWRFeHBlbnNlRm9ybUFycmF5LmNvbnRyb2xzLmZvckVhY2goY29udHJvbCA9PiB7CiAgICAgICAgICB0aGlzLmFwcGx5UnVsZShjb250cm9sLnZhbHVlLCBjb250cm9sKTsKICAgICAgICAgIHRoaXMuc3Vic2NyaWJlQ29udHJvbEJlaGF2aW9yKGNvbnRyb2wpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMucHJlcGFpZEV4cGVuc2VGb3JtQXJyYXkuc3RhdHVzQ2hhbmdlcy5zdWJzY3JpYmUoKCkgPT4gewogICAgICAgICAgLy8gVGhlcmUgaXMgbm8gc3VjaCAnZGlydHlDaGFuZ2UnIG9ic2VydmFibGUsIHNvIHdlIHVzZSBzdGF0dXNDaGFuZ2VzIGFzIHRoZSBldmVudCB3ZSBjaGVjayBkaXJ0eSB1cGRhdGUuCiAgICAgICAgICAvLyBCdXQgd2UgY2FuJ3QgZ2V0IHRoZSBsYXRlc3QgZGlydHkgaW5mbyBpbiB0aGlzIG9ic2VydmFibGUgc3Vic2NyaXB0aW9uIHNvbWV0aW1lcyh3aGVuIHdlIG1hcmsgUHJpc3RpbmUgbWFudWFsbHksCiAgICAgICAgICAvLyBzbyB1c2Ugc2V0VGltZW91dCB0byBnZXQgdGhlIGxhdGVzdCBkaXJ0eSBpbmZvLgogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZm9ybURpcnR5Q2hhbmdlLmVtaXQodGhpcy5wcmVwYWlkRXhwZW5zZUZvcm1BcnJheS5kaXJ0eSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmZvcm1Hcm91cC5tYXJrQXNQcmlzdGluZSgpOwogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy5zdWJzY3JpYmVTYXZlKCk7CiAgfQoKICBldmFsdWF0ZU1pbkNvbW1lbmNlRGF0ZShsYXN0QmxvY2tEYXRlOiBEYXRlIHwgbnVsbCk6IERhdGUgfCBudWxsIHsKICAgIGlmIChsYXN0QmxvY2tEYXRlICE9PSBudWxsKSB7CiAgICAgIGxldCBtaW5EYXRlOiBEYXRlOwogICAgICAvLyBJZiBkYXRlIG9mIGxhc3RCbG9ja0RhdGUgaXMgMX4xNCBvbiBGZWJydWFyeSBvciBpcyAxfjE1IG9uIHRoZSBvdGhlciBtb250aDoKICAgICAgLy8gICBzZXQgbWluQ29tbWVuY2VEYXRlIHRvIDE0IChvbiBGZWJydWFyeSkgb3IgMTUgKG9uIHRoZSBvdGhlciBtb250aCkKICAgICAgLy8gZWxzZToKICAgICAgLy8gICBzZXQgbWluQ29tbWVuY2VEYXRlIHRvIHRoZSBuZXh0IGRheSBvZiBsYXN0QmxvY2tEYXRlCiAgICAgIGlmICgKICAgICAgICAobGFzdEJsb2NrRGF0ZS5nZXRNb250aCgpID09PSAxICYmIGxhc3RCbG9ja0RhdGUuZ2V0RGF0ZSgpIDwgMTUpIHx8CiAgICAgICAgKGxhc3RCbG9ja0RhdGUuZ2V0TW9udGgoKSAhPT0gMSAmJiBsYXN0QmxvY2tEYXRlLmdldERhdGUoKSA8IDE2KQogICAgICApIHsKICAgICAgICBtaW5EYXRlID0KICAgICAgICAgIGxhc3RCbG9ja0RhdGUuZ2V0TW9udGgoKSA9PT0gMQogICAgICAgICAgICA/IG5ldyBEYXRlKGxhc3RCbG9ja0RhdGUuZ2V0RnVsbFllYXIoKSwgbGFzdEJsb2NrRGF0ZS5nZXRNb250aCgpLCAxNSkKICAgICAgICAgICAgOiBuZXcgRGF0ZShsYXN0QmxvY2tEYXRlLmdldEZ1bGxZZWFyKCksIGxhc3RCbG9ja0RhdGUuZ2V0TW9udGgoKSwgMTYpOwogICAgICB9IGVsc2UgewogICAgICAgIG1pbkRhdGUgPSBuZXcgRGF0ZShsYXN0QmxvY2tEYXRlLmdldEZ1bGxZZWFyKCksIGxhc3RCbG9ja0RhdGUuZ2V0TW9udGgoKSwgbGFzdEJsb2NrRGF0ZS5nZXREYXRlKCkgKyAxKTsKICAgICAgfQogICAgICByZXR1cm4gbWluRGF0ZTsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQgewogICAgaWYgKGNoYW5nZXMuZGF0YUxpc3QpIHsKICAgICAgdGhpcy5vbkRhdGFMaXN0Q2hhbmdlJCQubmV4dCh0aGlzLmRhdGFMaXN0KTsKICAgIH0KICB9CgogIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHsKICAgIHRoaXMuZ3JpZEhhbmRsZXIgPSBuZXcgR3JpZEhhbmRsZXIoCiAgICAgICgpID0+IHRoaXMuY3JlYXRlUHJlcGFpZEV4cGVuc2VGb3JtKCksCiAgICAgIHRoaXMuZ3JpZENvbnRhaW5lciwKICAgICAgdGhpcy5wcmVwYWlkRXhwZW5zZUZvcm1BcnJheSwKICAgICk7CiAgfQoKICBzdWJzY3JpYmVDb250cm9sQmVoYXZpb3IoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogdm9pZCB7CiAgICBjb25zdCBpZCA9IHRoaXMuZ2V0U3Vic2NyaXB0aW9uSWQoY29udHJvbCk7CiAgICB0aGlzLnVuc3Vic2NyaWJlKGNvbnRyb2wpOwogICAgdGhpcy5zdWJzY3JpcHRpb25zW2lkXSA9IHZhbHVlQ2hhbmdlRnJvbVVzZXIkPFRQcmVwYWlkRXhwZW5zZT4oY29udHJvbCkuc3Vic2NyaWJlKGl0ZW0gPT4gewogICAgICB0aGlzLmFwcGx5UnVsZShpdGVtLCBjb250cm9sKTsKICAgICAgLy8gdGhpcy5ncmlkQ29udGFpbmVyLnNlbmRSZWZyZXNoQ29sdW1uRGVtYW5kKCk7CiAgICAgIGNvbnN0IG1pbkNvbW1lbmNlRGF0ZSA9IHRoaXMuY29tbWVuY2VNaW5EYXRlTWFwcGluZ1tpdGVtLm9mZmljZV07CiAgICAgIGlmIChpdGVtLmNvbW1lbmNlX2RhdGUgJiYgbWluQ29tbWVuY2VEYXRlKSB7CiAgICAgICAgaWYgKG5ldyBEYXRlKGl0ZW0uY29tbWVuY2VfZGF0ZSkgPCBtaW5Db21tZW5jZURhdGUpIHsKICAgICAgICAgIGNvbnRyb2wuZ2V0KCdjb21tZW5jZV9kYXRlJyk/LnBhdGNoVmFsdWUoJycpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICB1bnN1YnNjcmliZShjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiB2b2lkIHsKICAgIGNvbnN0IGlkID0gdGhpcy5nZXRTdWJzY3JpcHRpb25JZChjb250cm9sKTsKICAgIHRoaXMuc3Vic2NyaXB0aW9uc1tpZF0/LnVuc3Vic2NyaWJlKCk7CiAgICBkZWxldGUgdGhpcy5zdWJzY3JpcHRpb25zW2lkXTsKICB9CgogIGdldFN1YnNjcmlwdGlvbklkKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IHN0cmluZyB7CiAgICByZXR1cm4gY29udHJvbC5nZXQoJ3V1aWQnKT8udmFsdWUgPyBjb250cm9sLmdldCgndXVpZCcpPy52YWx1ZSA6IGNvbnRyb2wuZ2V0KCdpZCcpPy52YWx1ZTsKICB9CgogIGFwcGx5UnVsZShpdGVtOiBUUHJlcGFpZEV4cGVuc2UsIGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IHZvaWQgewogICAgY29uc3QgaXRlbVdpdGhEZXByZWNpYXRpb24gPSB0aGlzLnByZXBhaWRFeHBlbnNlU2VydmljZS5jYWxjdWxhdGVBY2N1bXVsYXRlZEV4cGVuc2UoaXRlbSk7CiAgICBjb250cm9sCiAgICAgIC5nZXQoJ2FjY3VtdWxhdGVkX2V4cGVuc2UnKQogICAgICA/LnBhdGNoVmFsdWUodGhpcy5kZWNpbWFsUGlwZS50cmFuc2Zvcm0oaXRlbVdpdGhEZXByZWNpYXRpb24uYWNjdW11bGF0ZWRfZXhwZW5zZSkpOwogICAgY29udHJvbC5nZXQoJ2Jvb2tfdmFsdWUnKT8ucGF0Y2hWYWx1ZSh0aGlzLmRlY2ltYWxQaXBlLnRyYW5zZm9ybShpdGVtV2l0aERlcHJlY2lhdGlvbi5ib29rX3ZhbHVlKSk7CiAgICBjb250cm9sLmdldCgnZW5kX29mX3RoZV90ZXJtJyk/LnBhdGNoVmFsdWUoaXRlbVdpdGhEZXByZWNpYXRpb24uZW5kX29mX3RoZV90ZXJtKTsKCiAgICBjb250cm9sLmdldCgnY3VycmVuY3knKT8ucGF0Y2hWYWx1ZSh0aGlzLm1haW5DdXJyZW5jeS5pZCk7CiAgICBjb250cm9sLmdldCgnY3VycmVuY3knKT8uZGlzYWJsZSgpOwogICAgY29udHJvbC5nZXQoJ2VuZF9vZl90aGVfdGVybScpPy5kaXNhYmxlKCk7CiAgICBpZiAoY29udHJvbC5kaXNhYmxlZCkgewogICAgICByZXR1cm47CiAgICB9CiAgfQoKICBjcmVhdGVQcmVwYWlkRXhwZW5zZUZvcm0oKTogRm9ybUdyb3VwIHsKICAgIHJldHVybiB0aGlzLmZiLmdyb3VwKHsKICAgICAgaWQ6IFtudWxsXSwKICAgICAgcHJlcGFpZF9leHBlbnNlX25vOiBbbnVsbCwgVmFsaWRhdG9ycy5yZXF1aXJlZF0sCiAgICAgIHByZXBhaWRfdHlwZTogW1BSRVBBSURfVFlQRS5QUkVQQUlEX0VYUEVOU0UsIFZhbGlkYXRvcnMucmVxdWlyZWRdLAogICAgICBkZXNjcmlwdGlvbjogW251bGwsIFZhbGlkYXRvcnMucmVxdWlyZWRdLAogICAgICBleHBlbnNlX2dsX2NvZGU6IFtudWxsLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSwKICAgICAgcGF5bWVudF9kYXRlOiBbbnVsbCwgVmFsaWRhdG9ycy5yZXF1aXJlZF0sCiAgICAgIGNvbW1lbmNlX2RhdGU6IFtudWxsLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgdGhpcy5jb21tZW5jZURhdGVWYWxpZGF0b3IoKV1dLAogICAgICB0ZXJtOiBbbnVsbCwgW1ZhbGlkYXRvcnMucmVxdWlyZWQsIHBvc2l0aXZlVmFsaWRhdG9yKCksIGludGVnZXJWYWxpZGF0b3IoKSwgbm9uWmVyb1ZhbGlkYXRvcigpXV0sCiAgICAgIGFtb3VudDogW251bGwsIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCBwb3NpdGl2ZVZhbGlkYXRvcigpXV0sCiAgICAgIGN1cnJlbmN5OiBbbnVsbCwgVmFsaWRhdG9ycy5yZXF1aXJlZF0sCiAgICAgIGRlcHJlY2lhdGlvbl9tZXRob2Q6IFsnUycsIFZhbGlkYXRvcnMucmVxdWlyZWRdLAogICAgICBvZmZpY2U6IFt0aGlzLnVzZXJEZWZhdWx0T2ZmaWNlLmlkLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSwKICAgICAgYWNjdW11bGF0ZWRfZXhwZW5zZTogW251bGxdLAogICAgICBib29rX3ZhbHVlOiBbbnVsbF0sCiAgICAgIGVuZF9vZl90aGVfdGVybTogW251bGxdLAogICAgICBzdGF0dXM6IFtudWxsXSwKICAgICAgdXVpZDogW251bGxdLAogICAgfSk7CiAgfQoKICBjb21tZW5jZURhdGVWYWxpZGF0b3IoKTogVmFsaWRhdG9yRm4gewogICAgcmV0dXJuIChjb250cm9sOiBBYnN0cmFjdENvbnRyb2wpOiB7IFtrZXk6IHN0cmluZ106IGFueSB9IHwgbnVsbCA9PiB7CiAgICAgIGlmICghY29udHJvbC5wYXJlbnQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICBjb25zdCBjb21tZW5jZURhdGVDdHJsID0gY29udHJvbC5wYXJlbnQuZ2V0KCdjb21tZW5jZV9kYXRlJykgYXMgRm9ybUNvbnRyb2w7CiAgICAgIGNvbnN0IG9mZmljZUN0cmwgPSBjb250cm9sLnBhcmVudC5nZXQoJ29mZmljZScpIGFzIEZvcm1Db250cm9sOwogICAgICBpZiAodGhpcy5jb21tZW5jZU1pbkRhdGVNYXBwaW5nW29mZmljZUN0cmwudmFsdWVdID09PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgY29uc3QgY29tbWVuY2VNaW5EYXRlID0gdGhpcy5jb21tZW5jZU1pbkRhdGVNYXBwaW5nW29mZmljZUN0cmwudmFsdWVdIGFzIERhdGU7CgogICAgICByZXR1cm4gbWluRGF0ZVZhbGlkYXRvcihjb21tZW5jZU1pbkRhdGUpKGNvbW1lbmNlRGF0ZUN0cmwpOwogICAgfTsKICB9CgogIHN1YnNjcmliZVNhdmUoKTogdm9pZCB7CiAgICB0aGlzLnByZXBhaWRFeHBlbnNlU2VydmljZS5zYXZlZCQuc3Vic2NyaWJlKAogICAgICBwcmVwYWlkRXhwZW5zZSA9PiB7CiAgICAgICAgc2hvd1N1Y2Nlc3NGZWVkYmFja01zZyhfVC5NU0cuU0FWRV9EQVRBX1NVQ0MpOwogICAgICAgIHRoaXMuZm9ybUdyb3VwLmdldCgnZGVsZXRlUHJlcGFpZEV4cGVuc2VzJyk/LnNldFZhbHVlKFtdKTsKICAgICAgICBwcmVwYWlkRXhwZW5zZS5mb3JFYWNoKHByZXBhaWRFeHBlbnNlID0+IHsKICAgICAgICAgIGlmIChwcmVwYWlkRXhwZW5zZS51dWlkICE9PSBudWxsKSB7CiAgICAgICAgICAgIHRoaXMucHJlcGFpZEV4cGVuc2VGb3JtQXJyYXkuY29udHJvbHMKICAgICAgICAgICAgICAuZmlsdGVyKGNvbnRyb2wgPT4gY29udHJvbC5nZXQoJ3V1aWQnKT8udmFsdWUgPT09IHByZXBhaWRFeHBlbnNlLnV1aWQpWzBdCiAgICAgICAgICAgICAgLnBhdGNoVmFsdWUocHJlcGFpZEV4cGVuc2UpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5wcmVwYWlkRXhwZW5zZUZvcm1BcnJheS5jb250cm9scwogICAgICAgICAgICAgIC5maWx0ZXIoY29udHJvbCA9PiBjb250cm9sLmdldCgnaWQnKT8udmFsdWUgPT09IHByZXBhaWRFeHBlbnNlLmlkKVswXQogICAgICAgICAgICAgIC5wYXRjaFZhbHVlKHByZXBhaWRFeHBlbnNlKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLmZvcm1Hcm91cC5tYXJrQXNQcmlzdGluZSgpOwogICAgICAgIGhpZGVTcGluKCk7CiAgICAgIH0sCiAgICAgIChlcnJvcjogSHR0cEVycm9yUmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLnN1YnNjcmliZVNhdmUoKTsKICAgICAgICBoaWRlU3BpbigpOwogICAgICAgIHNob3dFcnJvckZlZWRiYWNrTXNnKGAke19ULk1TRy5TQVZFX0RBVEFfRkFJTH06ICR7ZXJyb3IubWVzc2FnZX1gKTsKICAgICAgfSwKICAgICk7CiAgfQoKICBjcmVhdGUoKTogdm9pZCB7CiAgICB0aGlzLmdyaWRIYW5kbGVyLmFwcGVuZFJvd3MoMSk7CiAgICBjb25zdCBjb250cm9sID0gdGhpcy5wcmVwYWlkRXhwZW5zZUZvcm1BcnJheS5hdCh0aGlzLnByZXBhaWRFeHBlbnNlRm9ybUFycmF5Lmxlbmd0aCAtIDEpOwogICAgY29udHJvbC5nZXQoJ3V1aWQnKT8uc2V0VmFsdWUodXVpZHY0KCkpOwogICAgY29udHJvbC5tYXJrQXNEaXJ0eSgpOwogICAgdGhpcy5hcHBseVJ1bGUoY29udHJvbC52YWx1ZSwgY29udHJvbCk7CiAgICB0aGlzLnN1YnNjcmliZUNvbnRyb2xCZWhhdmlvcihjb250cm9sKTsKICB9CgogIGRlbGV0ZSgpOiB2b2lkIHsKICAgIGNvbnN0IHNlbGVjdGVkSW5kaWNlcyA9IHRoaXMuZ3JpZENvbnRhaW5lci5nZXRTZWxlY3RlZEluZGljZXMoKTsKICAgIGNvbnN0IHNlbGVjdGVkRGF0YTogVFByZXBhaWRFeHBlbnNlW10gPSBzZWxlY3RlZEluZGljZXM/Lm1hcChpbmRleCA9PiB7CiAgICAgIHJldHVybiB0aGlzLnByZXBhaWRFeHBlbnNlRm9ybUFycmF5LmdldFJhd1ZhbHVlKClbaW5kZXhdOwogICAgfSk7CiAgICBzZWxlY3RlZEluZGljZXM/LmZvckVhY2goaW5kZXggPT4gewogICAgICBjb25zdCBjb250cm9sID0gdGhpcy5wcmVwYWlkRXhwZW5zZUZvcm1BcnJheS5hdChpbmRleCk7CiAgICAgIHRoaXMudW5zdWJzY3JpYmUoY29udHJvbCk7CiAgICB9KTsKICAgIHRoaXMuZm9ybUdyb3VwCiAgICAgIC5nZXQoJ2RlbGV0ZVByZXBhaWRFeHBlbnNlcycpCiAgICAgID8ucGF0Y2hWYWx1ZShbCiAgICAgICAgLi4udGhpcy5mb3JtR3JvdXAuZ2V0KCdkZWxldGVQcmVwYWlkRXhwZW5zZXMnKT8udmFsdWUsCiAgICAgICAgLi4uc2VsZWN0ZWREYXRhLmZpbHRlcihwcmVwYWlkRXhwZW5zZSA9PiBwcmVwYWlkRXhwZW5zZS5pZCkubWFwKHByZXBhaWRFeHBlbnNlID0+IHByZXBhaWRFeHBlbnNlLmlkKSwKICAgICAgXSk7CiAgICB0aGlzLmdyaWRIYW5kbGVyLnJlbW92ZVNlbGVjdGVkUm93cygpOwogICAgLy8gVE9ETyBIZWFkZXIgQ2hlY2sgQm94IHdvbid0IGNsZWFyIGFmdGVyIHJvdyBkZWxldGVkIHdoZW4gdGhlcmUgYXJlIHNvbWUgZGlzYWJsZWQgcm93cy4gSXQgc2VlbXMgYSBidWcgb2YgYWctZ3JpZAogICAgLy8gICAgICBNYW51YWxseSBjYWxsIGFuIHVuc2VsZWN0ZWQgZXZlbnQgdG8gd29yayBhcm91bmQgaXQKICAgIHRoaXMuZ3JpZENvbnRhaW5lci5ncmlkRXZlbnRTZXJ2aWNlLnVuc2VsZWN0ZWQubmV4dCgpOwogIH0KCiAgc2F2ZSgpOiB2b2lkIHsKICAgIGlmICh0aGlzLmZvcm1Hcm91cC5pbnZhbGlkKSB7CiAgICAgIGNvbnN0IGVycm9ycyA9IGdldEZvcm1WYWxpZGF0aW9uRXJyb3JzKHRoaXMuZm9ybUdyb3VwKTsKICAgICAgdGhpcy5mb3JtRXJyb3JTZXJ2aWNlLmVtaXRFdmVudChGT1JNX0VSUk9SX0VWRU5ULlNUQVJUX1NIT1dfRVJST1IpOwogICAgICB0aGlzLmZvcm1FcnJvclNlcnZpY2UuZW1pdEV2ZW50KEZPUk1fRVJST1JfRVZFTlQuRk9DVVNfSU5WQUxJRF9GSUVMRCk7CiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZVNldCA9IG5ldyBTZXQ8c3RyaW5nPigpOwogICAgICBlcnJvcnMuZm9yRWFjaChlcnJvciA9PiB7CiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGVycm9yTWVzc2FnZShlcnJvciwgewogICAgICAgICAgW1ZBTElEQVRFX0VSUk9SX01JTl9EQVRFXTogewogICAgICAgICAgICBjb21tZW5jZV9kYXRlOiBfVC5FUlJPUlMuQ09NTUVOQ0VfREFURV9MRVNTX1RIQU5fTEFTVF9CTE9DS19EQVRFLAogICAgICAgICAgfSwKICAgICAgICB9KTsKICAgICAgICBpZiAoIWVycm9yTWVzc2FnZVNldC5oYXMobWVzc2FnZSkpIHsKICAgICAgICAgIHNob3dFcnJvckZlZWRiYWNrTXNnKG1lc3NhZ2UpOwogICAgICAgICAgZXJyb3JNZXNzYWdlU2V0LmFkZChtZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBzaG93U3BpbigpOwogICAgY29uc3QgcHJlcGFpZEV4cGVuc2U6IFRQcmVwYWlkRXhwZW5zZVtdID0gdGhpcy5wcmVwYWlkRXhwZW5zZUZvcm1BcnJheS5jb250cm9scwogICAgICAuZmlsdGVyKGNvbnRyb2wgPT4gY29udHJvbC5kaXJ0eSkKICAgICAgLm1hcChjb250cm9sID0+IGNvbnRyb2wudmFsdWUpOwogICAgdGhpcy5wcmVwYWlkRXhwZW5zZVNlcnZpY2Uuc2F2ZShwcmVwYWlkRXhwZW5zZSwgdGhpcy5kZWxldGVQcmVwYWlkRXhwZW5zZXM/LnZhbHVlKTsKICB9CgogIGdldCBjdXJyZW5jeSQoKTogT2JzZXJ2YWJsZTxDaG9pY2VJbnRlcmZhY2VbXT4gewogICAgcmV0dXJuIHRoaXMuY3VycmVuY3lTZXJ2aWNlLmN1cnJlbmN5Q2hvaWNlcyQ7CiAgfQoKICBnZXQgb2ZmaWNlJCgpOiBPYnNlcnZhYmxlPENob2ljZUludGVyZmFjZVtdPiB7CiAgICByZXR1cm4gdGhpcy5jaG9pY2VTZXJ2aWNlLmdldENob2ljZVN1YmplY3QoKVsnb2ZmaWNlJCddOwogIH0KCiAgZ2V0IHByZXBhaWRfdHlwZSQoKTogT2JzZXJ2YWJsZTxDaG9pY2VJbnRlcmZhY2VbXT4gewogICAgcmV0dXJuIHRoaXMuY2hvaWNlU2VydmljZS5nZXRDaG9pY2VTdWJqZWN0KClbJ3ByZXBhaWRfZXhwZW5zZV9wcmVwYWlkX3R5cGUkJ107CiAgfQoKICBnZXQgZXhwZW5zZV90eXBlJCgpOiBPYnNlcnZhYmxlPENob2ljZUludGVyZmFjZVtdPiB7CiAgICByZXR1cm4gdGhpcy5jaG9pY2VTZXJ2aWNlLmdldENob2ljZVN1YmplY3QoKVsncHJlcGFpZF9leHBlbnNlX2V4cGVuc2VfdHlwZSQnXTsKICB9CgogIGdldCBwcmVwYWlkRXhwZW5zZUZvcm1BcnJheSgpOiBGb3JtQXJyYXkgewogICAgcmV0dXJuIHRoaXMuZm9ybUdyb3VwLmdldCgncHJlcGFpZEV4cGVuc2VzJykgYXMgRm9ybUFycmF5OwogIH0KCiAgZ2V0IGRlbGV0ZVByZXBhaWRFeHBlbnNlcygpOiBGb3JtQ29udHJvbCB7CiAgICByZXR1cm4gdGhpcy5mb3JtR3JvdXAuZ2V0KCdkZWxldGVQcmVwYWlkRXhwZW5zZXMnKSBhcyBGb3JtQ29udHJvbDsKICB9CgogIGdldCBsYXN0QmxvY2tEYXRlJCgpOiBPYnNlcnZhYmxlPFJlY29yZDxzdHJpbmcsIHN0cmluZz4+IHsKICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0PFJlY29yZDxzdHJpbmcsIHN0cmluZz4+KCdhcGkvYWxsLWxhc3QtYmxvY2stZGF0ZS8nKTsKICB9CgogIGNlbGxDbGFzc1J1bGVzID0gewogICAgJ3Jvdy1zcGFuLW9kZCc6IChwYXJhbTogeyByb3dJbmRleDogbnVtYmVyIH0pOiBib29sZWFuID0+IHBhcmFtLnJvd0luZGV4ICUgMiAhPT0gMCwKICAgICdyb3ctc3Bhbi1ldmVuJzogKHBhcmFtOiB7IHJvd0luZGV4OiBudW1iZXIgfSk6IGJvb2xlYW4gPT4gcGFyYW0ucm93SW5kZXggJSAyID09PSAwLAogIH07Cn0KCmFuZ3VsYXIubW9kdWxlKCdoY0FwcCcpLmRpcmVjdGl2ZSgnYXBwUm9vdCcsIGRvd25ncmFkZUNvbXBvbmVudCh7IGNvbXBvbmVudDogQXBwQ29tcG9uZW50IH0pKTsK</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="v" type="4">
        <keys>
          <key char="94" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="118" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="7" type="2">
        <text encoding="base64">ICAgICAgLnBpcGUoCiAgICAgICAgZmlsdGVyKGl0ZW0gPT4gaXRlbS5mcm9tVXNlciksCiAgICAgICAgbWFwKHZhbHVlID0+IHZhbHVlLnZhbHVlKSwKICAgICAgKQ==</text>
      </register>
      <register name="w" type="4">
        <keys>
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="91" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="93" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="8" type="2">
        <text encoding="base64">ICAgICAgICBjb25zb2xlLmxvZyhyb3dEYXRhLmlkLCByb3dEYXRhLm9mZmljZSwgdGhpcy5taW5EYXRlKTsK</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">ICAgIGRlYnVnZ2VyOwo=</text>
      </register>
      <register name="y" type="4">
        <text />
      </register>
      <register name=":" type="4">
        <text>w</text>
      </register>
    </registers>
  </component>
  <component name="VimSearchSettings">
    <search>
      <last-dir>0</last-dir>
      <show-last>false</show-last>
    </search>
  </component>
  <component name="VimSettings">
    <state version="6" enabled="true" />
    <notifications>
      <idea-join enabled="false" />
      <idea-put enabled="false" />
    </notifications>
  </component>
</application>