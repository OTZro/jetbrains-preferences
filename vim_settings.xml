<application>
  <component name="VimEditorSettings">
    <editor>
      <key-repeat enabled="true" />
    </editor>
  </component>
  <component name="VimHistorySettings">
    <history>
      <history-search>
        <entry>ATTACHMENT</entry>
        <entry>WebSocket</entry>
        <entry>message_group_member</entry>
        <entry>isCross</entry>
        <entry>inBlack</entry>
        <entry>user</entry>
        <entry>$user</entry>
        <entry>projectGro</entry>
        <entry>follow</entry>
        <entry>attachment</entry>
        <entry>users_compos</entry>
        <entry encoding="base64">XDxyZXF1ZXN0XD4=</entry>
        <entry encoding="base64">XDxmdW5jdGlvblw+</entry>
        <entry encoding="base64">XDx1c2VcPg==</entry>
        <entry encoding="base64">XDxwdWJsaWNcPg==</entry>
        <entry>keyword</entry>
        <entry>csrf</entry>
        <entry>picture</entry>
        <entry encoding="base64">XDxDb250cmFjdHNcPg==</entry>
        <entry>:136</entry>
      </history-search>
      <history-cmd>
        <entry>417</entry>
        <entry>246</entry>
        <entry>471</entry>
        <entry>17</entry>
        <entry>80</entry>
        <entry>200</entry>
        <entry>47</entry>
        <entry>97</entry>
        <entry>409</entry>
        <entry>376</entry>
        <entry>136</entry>
        <entry>129</entry>
        <entry>124</entry>
        <entry>74</entry>
        <entry>210</entry>
        <entry>67</entry>
        <entry>733</entry>
        <entry>157</entry>
        <entry>193</entry>
        <entry>875</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
  </component>
  <component name="VimKeySettings">
    <shortcut-conflicts>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed U</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed I</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed Q</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed W</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed 2</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed J</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed K</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
  <component name="VimMarksSettings">
    <globalmarks />
    <filemarks>
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/center/controller.js" timestamp="1596607014728">
        <mark key="[" line="51" column="31" />
        <mark key="]" line="51" column="0" />
        <mark key="." line="51" column="0" />
        <mark key="^" line="51" column="22" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/app/accounting/payment_plan/list/api.py" timestamp="1596610810048">
        <mark key="[" line="53" column="83" />
        <mark key="]" line="51" column="11" />
        <mark key="." line="51" column="11" />
      </file>
      <file name="/Python Console" timestamp="1596609525124">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/app/accounting/payment_plan/list/sz.py" timestamp="1596611969885">
        <mark key="[" line="95" column="11" />
        <mark key="]" line="94" column="16" />
        <mark key="." line="94" column="15" />
        <mark key="^" line="94" column="16" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/center/app.component.ts" timestamp="1596612497808">
        <mark key="[" line="4" column="111" />
        <mark key="]" line="85" column="0" />
        <mark key="." line="85" column="0" />
        <mark key="^" line="125" column="39" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/app/jobflow/approval/service.py" timestamp="1596612909328">
        <mark key="[" line="379" column="0" />
        <mark key="]" line="379" column="0" />
        <mark key="^" line="278" column="35" />
        <mark key="." line="379" column="0" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/frontend/src/lib/aj/pagination.js" timestamp="1596606952939">
        <mark key="^" line="184" column="11" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/frontend/src/lib/angular/shared-ag-grid/cell-renderers/hc-pagination-list-col-text.ts" timestamp="1596612524806">
        <mark key="[" line="45" column="16" />
        <mark key="]" line="45" column="0" />
        <mark key="." line="45" column="0" />
      </file>
      <file name="/app.component.ts" timestamp="1596612414389" />
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/center/app.component.html" timestamp="1596612420500">
        <mark key="[" line="110" column="138" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/app/accounting/payment_plan/entry/api.py" timestamp="1596612695330">
        <mark key="[" line="248" column="58" />
        <mark key="]" line="252" column="24" />
        <mark key="^" line="73" column="17" />
        <mark key="." line="252" column="24" />
      </file>
      <file name="/Django Console" timestamp="1596613659110">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/.env" timestamp="1596613334166">
        <mark key="[" line="21" column="0" />
        <mark key="]" line="21" column="0" />
        <mark key="." line="21" column="0" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/accounting/payment-plan/payment-plan-basic/payment-plan-basic.component.ts" timestamp="1596601513305" />
      <file name="$USER_HOME$/gofreight/fms/app/accounting/payment_plan/services/invoice_block_service.py" timestamp="1596614289192" />
      <file name="$USER_HOME$/gofreight/fms/lib/log/log_def.py" timestamp="1596608650631">
        <mark key="[" line="130" column="0" />
        <mark key="]" line="130" column="0" />
        <mark key="^" line="130" column="20" />
        <mark key="." line="130" column="0" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/test/accounting/payment_plan/test_payment_plan_api.py" timestamp="1596613898422">
        <mark key="[" line="150" column="33" />
        <mark key="]" line="150" column="33" />
        <mark key="." line="150" column="33" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/app/freight/models/accounting.py" timestamp="1596614057457">
        <mark key="[" line="1522" column="0" />
        <mark key="]" line="1522" column="0" />
        <mark key="^" line="1512" column="43" />
        <mark key="." line="1522" column="0" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/app/freight/migrations/0030_v1_20_olc_0096_make_payment_plan_can_approve.py" timestamp="1596613993970">
        <mark key="[" line="17" column="0" />
        <mark key="]" line="17" column="0" />
        <mark key="." line="17" column="0" />
      </file>
      <file name="$USER_HOME$/gofreight/fms/frontend/src/page/freight/accounting/payment-plan/app.component.ts" timestamp="1596608720691">
        <mark key="[" line="339" column="2" />
      </file>
    </filemarks>
    <jumps>
      <jump line="1236" column="63" filename="$USER_HOME$/gofreight/fms/app/freight/views_reports/utility.py" />
      <jump line="1232" column="4" filename="$USER_HOME$/gofreight/fms/app/freight/views_reports/utility.py" />
      <jump line="134" column="29" filename="$USER_HOME$/gofreight/fms/app/jobflow/views.py" />
      <jump line="69" column="39" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/setting/app.component.html" />
      <jump line="0" column="0" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/setting/app.component.html" />
      <jump line="5" column="4" filename="$USER_HOME$/gofreight/fms/frontend/src/component_form/trade_partner/form_trade_partner_info_picker.html" />
      <jump line="28" column="0" filename="$USER_HOME$/gofreight/fms/frontend/src/lib/angular/bootstrap-tool/hc-popover-hover.directive.ts" />
      <jump line="163" column="39" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/sales/trade_partner_entry/index.html" />
      <jump line="6" column="19" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/setting/rule.type.ts" />
      <jump line="34" column="24" filename="/amendment.py" />
      <jump line="8" column="34" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/accounting/prepaid_expanse/app.component.text_def.ts" />
      <jump line="45" column="105" filename="$USER_HOME$/gofreight/fms/test/accounting/transaction/updater/utility.py" />
      <jump line="118" column="4" filename="$USER_HOME$/gofreight/fms/test/accounting/transaction/updater/utility.py" />
      <jump line="52" column="82" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/center/app.component.html" />
      <jump line="24" column="42" filename="$USER_HOME$/gofreight/fms/app/accounting/transaction/db_updater/amortization.py" />
      <jump line="9" column="24" filename="$USER_HOME$/gofreight/ui-select/package.json" />
      <jump line="0" column="0" filename="/Dummy.txt" />
      <jump line="2" column="16" filename="$USER_HOME$/code/stock-analyze/docker/app/rootfs/etc/services.d/fetch/run" />
      <jump line="18" column="93" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/shipment/booking/booking_accounting_wizard/app.component.html" />
      <jump line="233" column="6" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/shipment/booking/booking_accounting_wizard/app.component.ts" />
      <jump line="71" column="87" filename="$USER_HOME$/gofreight/fms/frontend/src/page/freight/approval/center/app.component.html" />
    </jumps>
  </component>
  <component name="VimRegisterSettings">
    <registers>
      <register name="a" type="4">
        <keys>
          <key char="70" code="0" mods="0" />
          <key char="60" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="36" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="&quot;" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="b" type="4">
        <keys>
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="91" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="93" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="91" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="93" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="118" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="c" type="4">
        <keys>
          <key char="94" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="41" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="d" type="4">
        <text>2ddj2dd</text>
      </register>
      <register name="f" type="4">
        <keys>
          <key char="108" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="91" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="93" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="91" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="93" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="j" type="4">
        <text>2ddkkkk2dd</text>
      </register>
      <register name="l" type="4">
        <keys>
          <key char="108" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="-" type="4">
        <text>should_block_linked_invoice</text>
      </register>
      <register name="m" type="4">
        <keys>
          <key char="48" code="0" mods="0" />
          <key char="71" code="0" mods="0" />
          <key char="49" code="0" mods="0" />
          <key char="71" code="0" mods="0" />
          <key char="79" code="0" mods="0" />
          <key char="60" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="71" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="63" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="113" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="n" type="4">
        <keys>
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="/" type="4">
        <text>:136</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">ICAgICAgICAgIGpxRWwuZGF0YSgnZGF0ZXJhbmdlcGlja2VyJykuc2V0U3RhcnREYXRlKG1pbkRhdGUpOwo=</text>
      </register>
      <register name="p" type="4">
        <keys>
          <key char="99" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="59" code="0" mods="0" />
          <key char="32" code="0" mods="0" />
          <key char="95" code="0" mods="0" />
          <key char="40" code="0" mods="0" />
          <key char="39" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="44" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="1" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="q" type="4">
        <text>kkjk</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICAgICAgICAgICAgcGF5bWVudF9wbGFuLnBheW1lbnRfcGxhbl9kZXRhaWxfc2V0IFwKICAgICAgICAgICAgICAgIC5maWx0ZXIoZnJlaWdodF9pbmZvX19pbnZvaWNlX2lkPWludikgXAogICAgICAgICAgICAgICAgLnVwZGF0ZShpc19mcmVpZ2h0X2luZm9faW52b2ljZV9ibG9ja19iZWZvcmVfcGxhbj1pbnYuaXNfYmxvY2sp</text>
      </register>
      <register name="3" type="2">
        <text encoding="base64">ICAgICAgICAK</text>
      </register>
      <register name="4" type="4">
        <text>migrations.AddField(
            model_name='paymentplandetail',
            name='is_freight_info_invoice_block_before_plan',
            field=models.BooleanField(default=False),
        ),</text>
      </register>
      <register name="t" type="4">
        <keys>
          <key char="106" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="121" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="107" code="0" mods="0" />
          <key char="112" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="110" code="0" mods="0" />
          <key char="103" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="113" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="116" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="119" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="111" code="0" mods="0" />
          <key char="114" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="106" code="0" mods="0" />
          <key char="56" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="100" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="5" type="2">
        <text encoding="base64">ICAgIGlzX2ZyZWlnaHRfaW5mb19pbnZvaWNlX2Jsb2NrX2JlZm9yZV9wbGFuID0gbW9kZWxzLkJvb2xlYW5GaWVsZChkZWZhdWx0PUZhbHNlKQo=</text>
      </register>
      <register name="6" type="8">
        <text encoding="base64">cF9wbGFuXzEgPSAKcF9wbGFuXzEgPSA=</text>
      </register>
      <register name="v" type="4">
        <keys>
          <key char="94" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="104" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="99" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="118" code="0" mods="0" />
          <key char="97" code="0" mods="0" />
          <key char="108" code="0" mods="0" />
          <key char="117" code="0" mods="0" />
          <key char="101" code="0" mods="0" />
          <key char="45" code="0" mods="0" />
          <key char="115" code="0" mods="0" />
          <key char="109" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="7" type="2">
        <text encoding="base64">ZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZQpmcm9tIGRlY2ltYWwgaW1wb3J0IERlY2ltYWwKCmZyb20gZGphbmdvLnRlc3QgaW1wb3J0IHRhZwoKZnJvbSBhcHAuYWNjb3VudGluZy5wYXltZW50X3BsYW4uZW50cnkuc3pfcXVlcnkgaW1wb3J0IFBheW1lbnRQbGFuRGV0YWlsRW50cnlTZXJpYWxpemVyCmZyb20gYXBwLmFjY291bnRpbmcucGF5bWVudF9wbGFuLnNlcnZpY2VzLmludm9pY2VfYW1vdW50X3NlcnZpY2UgaW1wb3J0IHNlcnZpY2UKZnJvbSBhcHAuZnJlaWdodC5tb2RlbHMuYWNjb3VudGluZyBpbXBvcnQgQ3VycmVuY3kKZnJvbSBsaWIgaW1wb3J0IHV0aWwKZnJvbSBsaWIubG9nIGltcG9ydCBsb2dfZGVmCmZyb20gdGVzdC5iYXNlIGltcG9ydCBGbXNBUElUZXN0Q2FzZQoKZnJvbSBtb2RlbF9tb21teSBpbXBvcnQgbW9tbXkKZnJvbSByZXN0X2ZyYW1ld29yayBpbXBvcnQgc3RhdHVzCgpmcm9tIGFwcC5mcmVpZ2h0IGltcG9ydCBtb2RlbHMgYXMgZm1zX21vZGVscwpmcm9tIGFwcC5mcmVpZ2h0LnNlcmlhbGl6ZXJzIGltcG9ydCBwYXJ0aWFsX2tleW5hbWUgYXMga25zCgpfVVJMX1BBWU1FTlRfUExBTl9DUkVBVEVfQVBJID0gJy9hcGkvcGF5bWVudC1wbGFuLycKX1VSTF9QQVlNRU5UX1BMQU5fVVBEQVRFX0FQSV9GTVQgPSAnL2FwaS9wYXltZW50LXBsYW4vJWQvJwoKX1VSTF9QQVlNRU5UX1BMQU5fU0hJUE1FTlRfTElTVF9BUEkgPSAnL2FwaS9wYXltZW50LXBsYW4vZnJlaWdodC9saXN0LycKCgpjbGFzcyBUZXN0UGF5bWVudFBsYW5BcGkoRm1zQVBJVGVzdENhc2UpOgogICAgbWF4RGlmZiA9IE5vbmUKCiAgICBkZWYgdGVzdF9jcmVhdGVfcGF5bWVudF9wbGFuX3dpdGhfZnVsbF9kYXRhKHNlbGYpOgogICAgICAgICMgYXJyYW5nZQogICAgICAgIGV4cGVjdGVkX3Bvc3RfZGF0ZSA9IGRhdGUoMjAyMCwgNSwgMjYpCiAgICAgICAgZXhwZWN0ZWRfYXV0b19nZW5fcGxhbl9ubyA9ICdQTi0wMDAwMDAxJwogICAgICAgIGV4cGVjdGVkX3RwID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlRyYWRlUGFydG5lcikKCiAgICAgICAgZXhwZWN0ZWRfb2ZmaWNlID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLk9mZmljZSkKICAgICAgICBleHBlY3RlZF9vZmZpY2VfZGVwYXJ0bWVudCA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5PZmZpY2VEZXBhcnRtZW50KQoKICAgICAgICBleHBlY3RlZF9mcnRfZGF0YSA9IGtucy5GcmVpZ2h0SW5mb1NlcmlhbGl6ZXIoCiAgICAgICAgICAgIG1vbW15Lm1ha2UoCiAgICAgICAgICAgICAgICBmbXNfbW9kZWxzLkZyZWlnaHRJbmZvLAogICAgICAgICAgICAgICAgaW52b2ljZT1tb21teS5tYWtlKAogICAgICAgICAgICAgICAgICAgIGZtc19tb2RlbHMuSW52b2ljZSwgbWJsPW1vbW15Lm1ha2UoZm1zX21vZGVscy5TaGlwbWVudE1CTCkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICkKICAgICAgICApLmRhdGEKCiAgICAgICAgZXhwZWN0ZWRfZV9pbnZfYmlsbGluZyA9ICdSTUJfQScKCiAgICAgICAgZXhwZWN0ZWRfc2hpcG1lbnRfbW9kZSA9ICdPJwogICAgICAgIGV4cGVjdGVkX2N1cnJlbmN5X21vZGUgPSAnQycKICAgICAgICBleHBlY3RlZF9jdXJyZW5jeSA9IG1vbW15Lm1ha2UoQ3VycmVuY3ksIG5hbWU9J1JNQicpCiAgICAgICAgZXhwZWN0ZWRfY2N5X3JhdGUgPSBEZWNpbWFsKCcxLjUnKQoKICAgICAgICAjIGFjdGlvbgogICAgICAgIHJlcXVlc3RfZGF0YSA9IHsKICAgICAgICAgICAgJ3Bvc3RfZGF0ZSc6IHN0cihleHBlY3RlZF9wb3N0X2RhdGUpLAogICAgICAgICAgICAnY3VzdG9tZXInOiBrbnMuVHJhZGVQYXJ0bmVyU2VyaWFsaXplcihleHBlY3RlZF90cCkuZGF0YSwKICAgICAgICAgICAgJ29mZmljZSc6IGV4cGVjdGVkX29mZmljZS5pZCwKICAgICAgICAgICAgJ29mZmljZV9kZXBhcnRtZW50JzogZXhwZWN0ZWRfb2ZmaWNlX2RlcGFydG1lbnQuaWQsCiAgICAgICAgICAgICdwYXltZW50X3BsYW5fZGV0YWlsX3NldCc6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAnZnJlaWdodF9pbmZvJzogZXhwZWN0ZWRfZnJ0X2RhdGEsCiAgICAgICAgICAgICAgICAgICAgJ2VfaW52X2JpbGxpbmcnOiBleHBlY3RlZF9lX2ludl9iaWxsaW5nLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdLAogICAgICAgICAgICAnZV9pbnZfcGxhbic6IHsKICAgICAgICAgICAgICAgICdzaGlwbWVudF9tb2RlJzogZXhwZWN0ZWRfc2hpcG1lbnRfbW9kZSwKICAgICAgICAgICAgICAgICdjdXJyZW5jeV9tb2RlJzogZXhwZWN0ZWRfY3VycmVuY3lfbW9kZSwKICAgICAgICAgICAgICAgICdjdXJyZW5jeSc6IGV4cGVjdGVkX2N1cnJlbmN5LmlkLAogICAgICAgICAgICAgICAgJ2NjeV9yYXRlJzogc3RyKGV4cGVjdGVkX2NjeV9yYXRlKSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ2FnZW50X2xvY2FsX3N0YXRlbWVudF9sb2dzJzogW10sCiAgICAgICAgfQoKICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LnBvc3QoX1VSTF9QQVlNRU5UX1BMQU5fQ1JFQVRFX0FQSSwgZGF0YT1yZXF1ZXN0X2RhdGEpCgogICAgICAgICMgYXNzZXJ0CiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXNwb25zZS5zdGF0dXNfY29kZSwgc3RhdHVzLkhUVFBfMjAxX0NSRUFURUQpCgogICAgICAgIHBsYW4gPSBmbXNfbW9kZWxzLlBheW1lbnRQbGFuLm9iamVjdHMuZmlyc3QoKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXhwZWN0ZWRfcG9zdF9kYXRlLCBwbGFuLnBvc3RfZGF0ZSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV4cGVjdGVkX2F1dG9fZ2VuX3BsYW5fbm8sIHBsYW4ucGF5bWVudF9wbGFuX25vKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXhwZWN0ZWRfdHAuY29kZSwgcGxhbi5jdXN0b21lcl9pZCkKCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChleHBlY3RlZF9vZmZpY2UsIHBsYW4ub2ZmaWNlKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXhwZWN0ZWRfb2ZmaWNlX2RlcGFydG1lbnQsIHBsYW4ub2ZmaWNlX2RlcGFydG1lbnQpCgogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXhwZWN0ZWRfc2hpcG1lbnRfbW9kZSwgcGxhbi5lX2ludl9wbGFuLnNoaXBtZW50X21vZGUpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChleHBlY3RlZF9jdXJyZW5jeV9tb2RlLCBwbGFuLmVfaW52X3BsYW4uY3VycmVuY3lfbW9kZSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV4cGVjdGVkX2N1cnJlbmN5LCBwbGFuLmVfaW52X3BsYW4uY3VycmVuY3kpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChleHBlY3RlZF9jY3lfcmF0ZSwgcGxhbi5lX2ludl9wbGFuLmNjeV9yYXRlKQoKICAgICAgICBmaXJzdF9wYXlfZGV0YWlsID0gcGxhbi5wYXltZW50X3BsYW5fZGV0YWlsX3NldC5maXJzdCgpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChleHBlY3RlZF9lX2ludl9iaWxsaW5nLCBmaXJzdF9wYXlfZGV0YWlsLmVfaW52X2JpbGxpbmcpCgogICAgICAgIGxhc3RfdXNlcl9sb2cgPSBmbXNfbW9kZWxzLlVzZXJIaXN0b3J5TG9nLm9iamVjdHMubGFzdCgpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwbGFuLCBsYXN0X3VzZXJfbG9nLnBheW1lbnRfcGxhbikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvZ19kZWYuTE9HX0FDVElPTl9QQVlfUExBTl9DUkVBVEUsIGxhc3RfdXNlcl9sb2cuYWN0aW9uKQoKICAgIGRlZiB0ZXN0X2NyZWF0ZV9wYXltZW50X3BsYW5fc2hvdWxkX2Jsb2NrX2xpbmtlZF9pbnZvaWNlKHNlbGYpOgogICAgICAgICMgYXJyYW5nZQogICAgICAgIGV4cGVjdGVkX3Bvc3RfZGF0ZSA9IGRhdGUoMjAyMCwgNSwgMjYpCiAgICAgICAgZXhwZWN0ZWRfdHAgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuVHJhZGVQYXJ0bmVyKQoKICAgICAgICBleHBlY3RlZF9vZmZpY2UgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuT2ZmaWNlKQogICAgICAgIGV4cGVjdGVkX29mZmljZV9kZXBhcnRtZW50ID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLk9mZmljZURlcGFydG1lbnQpCgogICAgICAgIGZyZWlnaHQgPSBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLkZyZWlnaHRJbmZvLAogICAgICAgICAgICBpbnZvaWNlPW1vbW15Lm1ha2UoCiAgICAgICAgICAgICAgICBmbXNfbW9kZWxzLkludm9pY2UsIG1ibD1tb21teS5tYWtlKGZtc19tb2RlbHMuU2hpcG1lbnRNQkwpCiAgICAgICAgICAgICksCiAgICAgICAgKQogICAgICAgIGV4cGVjdGVkX2ZydF9kYXRhID0ga25zLkZyZWlnaHRJbmZvU2VyaWFsaXplcihmcmVpZ2h0KS5kYXRhCgogICAgICAgIGV4cGVjdGVkX2VfaW52X2JpbGxpbmcgPSAnUk1CX0EnCgogICAgICAgIGV4cGVjdGVkX3NoaXBtZW50X21vZGUgPSAnTycKICAgICAgICBleHBlY3RlZF9jdXJyZW5jeV9tb2RlID0gJ0MnCiAgICAgICAgZXhwZWN0ZWRfY3VycmVuY3kgPSBtb21teS5tYWtlKEN1cnJlbmN5LCBuYW1lPSdSTUInKQogICAgICAgIGV4cGVjdGVkX2NjeV9yYXRlID0gRGVjaW1hbCgnMS41JykKCiAgICAgICAgIyBhY3Rpb24KICAgICAgICByZXF1ZXN0X2RhdGEgPSB7CiAgICAgICAgICAgICdwb3N0X2RhdGUnOiBzdHIoZXhwZWN0ZWRfcG9zdF9kYXRlKSwKICAgICAgICAgICAgJ2N1c3RvbWVyJzoga25zLlRyYWRlUGFydG5lclNlcmlhbGl6ZXIoZXhwZWN0ZWRfdHApLmRhdGEsCiAgICAgICAgICAgICdvZmZpY2UnOiBleHBlY3RlZF9vZmZpY2UuaWQsCiAgICAgICAgICAgICdvZmZpY2VfZGVwYXJ0bWVudCc6IGV4cGVjdGVkX29mZmljZV9kZXBhcnRtZW50LmlkLAogICAgICAgICAgICAncGF5bWVudF9wbGFuX2RldGFpbF9zZXQnOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJ2ZyZWlnaHRfaW5mbyc6IGV4cGVjdGVkX2ZydF9kYXRhLAogICAgICAgICAgICAgICAgICAgICdlX2ludl9iaWxsaW5nJzogZXhwZWN0ZWRfZV9pbnZfYmlsbGluZywKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKICAgICAgICAgICAgJ2VfaW52X3BsYW4nOiB7CiAgICAgICAgICAgICAgICAnc2hpcG1lbnRfbW9kZSc6IGV4cGVjdGVkX3NoaXBtZW50X21vZGUsCiAgICAgICAgICAgICAgICAnY3VycmVuY3lfbW9kZSc6IGV4cGVjdGVkX2N1cnJlbmN5X21vZGUsCiAgICAgICAgICAgICAgICAnY3VycmVuY3knOiBleHBlY3RlZF9jdXJyZW5jeS5pZCwKICAgICAgICAgICAgICAgICdjY3lfcmF0ZSc6IHN0cihleHBlY3RlZF9jY3lfcmF0ZSksCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICdhZ2VudF9sb2NhbF9zdGF0ZW1lbnRfbG9ncyc6IFtdLAogICAgICAgIH0KCiAgICAgICAgcmVzcG9uc2UgPSBzZWxmLmNsaWVudC5wb3N0KF9VUkxfUEFZTUVOVF9QTEFOX0NSRUFURV9BUEksIGRhdGE9cmVxdWVzdF9kYXRhKQoKICAgICAgICAjIGFzc2VydAogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzcG9uc2Uuc3RhdHVzX2NvZGUsIHN0YXR1cy5IVFRQXzIwMV9DUkVBVEVEKQoKICAgICAgICBmcmVpZ2h0LnJlZnJlc2hfZnJvbV9kYigpCiAgICAgICAgc2VsZi5hc3NlcnRUcnVlKGZyZWlnaHQuaW52b2ljZS5pc19ibG9jaykKCiAgICBkZWYgdGVzdF91cGRhdGVfc2ltcGxlX3BheW1lbnRfcGxhbihzZWxmKToKICAgICAgICAjIGFycmFuZ2UKICAgICAgICBleHBlY3RlZF9wYXltZW50X3BsYW5fbm8gPSAnVVBEQVRFRCcKICAgICAgICBleHBlY3RlZF90cCA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5UcmFkZVBhcnRuZXIpCgogICAgICAgIGNjeV91c2QgPSBtb21teS5tYWtlKEN1cnJlbmN5LCBuYW1lPSdVU0QnKQogICAgICAgIHBsYW4gPSBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuLAogICAgICAgICAgICBwYXltZW50X3BsYW5fbm89J09SSUdJTicsCiAgICAgICAgICAgIGN1c3RvbWVyPW1vbW15Lm1ha2UoZm1zX21vZGVscy5UcmFkZVBhcnRuZXIpLAogICAgICAgICkKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuRGV0YWlsLAogICAgICAgICAgICBmcmVpZ2h0X2luZm89bW9tbXkubWFrZSgKICAgICAgICAgICAgICAgIGZtc19tb2RlbHMuRnJlaWdodEluZm8sCiAgICAgICAgICAgICAgICBjdXJyZW5jeT1jY3lfdXNkLAogICAgICAgICAgICAgICAgaW52b2ljZT1tb21teS5tYWtlKAogICAgICAgICAgICAgICAgICAgIGZtc19tb2RlbHMuSW52b2ljZSwgbWJsPW1vbW15Lm1ha2UoZm1zX21vZGVscy5TaGlwbWVudE1CTCkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHBheW1lbnRfcGxhbj1wbGFuLAogICAgICAgICkKCiAgICAgICAgIyBhY3Rpb24KICAgICAgICByZXF1ZXN0X2RhdGEgPSB7CiAgICAgICAgICAgICdwYXltZW50X3BsYW5fbm8nOiBleHBlY3RlZF9wYXltZW50X3BsYW5fbm8sCiAgICAgICAgICAgICdjdXN0b21lcic6IGtucy5UcmFkZVBhcnRuZXJTZXJpYWxpemVyKGV4cGVjdGVkX3RwKS5kYXRhLAogICAgICAgIH0KCiAgICAgICAgdXJsID0gX1VSTF9QQVlNRU5UX1BMQU5fVVBEQVRFX0FQSV9GTVQgJSBwbGFuLnBrCiAgICAgICAgcmVzcG9uc2UgPSBzZWxmLmNsaWVudC5wdXQodXJsLCBkYXRhPXJlcXVlc3RfZGF0YSkKCiAgICAgICAgIyBhc3NlcnQKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3BvbnNlLnN0YXR1c19jb2RlLCBzdGF0dXMuSFRUUF8yMDBfT0spCgogICAgICAgIHBsYW4ucmVmcmVzaF9mcm9tX2RiKCkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV4cGVjdGVkX3BheW1lbnRfcGxhbl9ubywgcGxhbi5wYXltZW50X3BsYW5fbm8pCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChleHBlY3RlZF90cCwgcGxhbi5jdXN0b21lcikKCiAgICAgICAgbGFzdF91c2VyX2xvZyA9IGZtc19tb2RlbHMuVXNlckhpc3RvcnlMb2cub2JqZWN0cy5sYXN0KCkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHBsYW4sIGxhc3RfdXNlcl9sb2cucGF5bWVudF9wbGFuKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobG9nX2RlZi5MT0dfQUNUSU9OX1BBWV9QTEFOX0VESVQsIGxhc3RfdXNlcl9sb2cuYWN0aW9uKQoKICAgIGRlZiB0ZXN0X3VwZGF0ZV9wYXltZW50X3BsYW5fd2l0aF9lX2ludm9pY2VfaW5mbyhzZWxmKToKICAgICAgICAjIGFycmFuZ2UKICAgICAgICBleHBlY3RlZF9zaGlwbWVudF9tb2RlID0gJ08nCiAgICAgICAgZXhwZWN0ZWRfY2N5X21vZGUgPSAnUycKICAgICAgICBleHBlY3RlZF9jY3kgPSBtb21teS5tYWtlKEN1cnJlbmN5LCBuYW1lPSdVU0QnKQogICAgICAgIGV4cGVjdGVkX2NjeV9yYXRlID0gRGVjaW1hbCg1KQoKICAgICAgICBjY3lfdXNkID0gbW9tbXkubWFrZShDdXJyZW5jeSwgbmFtZT0nVVNEJykKICAgICAgICBwbGFuID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlBheW1lbnRQbGFuKQogICAgICAgIGVfaW52X3BsYW4gPSBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLkVJbnZvaWNlUGxhbiwKICAgICAgICAgICAgc2hpcG1lbnRfbW9kZT0nTScsCiAgICAgICAgICAgIGN1cnJlbmN5X21vZGU9J0MnLAogICAgICAgICAgICBjdXJyZW5jeT1tb21teS5tYWtlKEN1cnJlbmN5LCBuYW1lPSdSTUInKSwKICAgICAgICAgICAgY2N5X3JhdGU9RGVjaW1hbCgxMCksCiAgICAgICAgICAgIHBheW1lbnRfcGxhbj1wbGFuLAogICAgICAgICkKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuRGV0YWlsLAogICAgICAgICAgICBmcmVpZ2h0X2luZm89bW9tbXkubWFrZSgKICAgICAgICAgICAgICAgIGZtc19tb2RlbHMuRnJlaWdodEluZm8sCiAgICAgICAgICAgICAgICBjdXJyZW5jeT1jY3lfdXNkLAogICAgICAgICAgICAgICAgaW52b2ljZT1tb21teS5tYWtlKAogICAgICAgICAgICAgICAgICAgIGZtc19tb2RlbHMuSW52b2ljZSwgbWJsPW1vbW15Lm1ha2UoZm1zX21vZGVscy5TaGlwbWVudE1CTCkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHBheW1lbnRfcGxhbj1wbGFuLAogICAgICAgICkKCiAgICAgICAgIyBhY3Rpb24KICAgICAgICByZXF1ZXN0X2RhdGEgPSB7CiAgICAgICAgICAgICdlX2ludl9wbGFuJzogewogICAgICAgICAgICAgICAgJ2lkJzogZV9pbnZfcGxhbi5waywKICAgICAgICAgICAgICAgICdwYXltZW50X3BsYW4nOiBwbGFuLnBrLAogICAgICAgICAgICAgICAgJ3NoaXBtZW50X21vZGUnOiBleHBlY3RlZF9zaGlwbWVudF9tb2RlLAogICAgICAgICAgICAgICAgJ2N1cnJlbmN5X21vZGUnOiBleHBlY3RlZF9jY3lfbW9kZSwKICAgICAgICAgICAgICAgICdjdXJyZW5jeSc6IGV4cGVjdGVkX2NjeS5pZCwKICAgICAgICAgICAgICAgICdjY3lfcmF0ZSc6IHN0cihleHBlY3RlZF9jY3lfcmF0ZSksCiAgICAgICAgICAgIH0sCiAgICAgICAgfQoKICAgICAgICB1cmwgPSBfVVJMX1BBWU1FTlRfUExBTl9VUERBVEVfQVBJX0ZNVCAlIHBsYW4ucGsKICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LnB1dCh1cmwsIGRhdGE9cmVxdWVzdF9kYXRhKQoKICAgICAgICAjIGFzc2VydAogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzcG9uc2Uuc3RhdHVzX2NvZGUsIHN0YXR1cy5IVFRQXzIwMF9PSykKCiAgICAgICAgcGxhbi5yZWZyZXNoX2Zyb21fZGIoKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXhwZWN0ZWRfc2hpcG1lbnRfbW9kZSwgcGxhbi5lX2ludl9wbGFuLnNoaXBtZW50X21vZGUpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChleHBlY3RlZF9jY3lfbW9kZSwgcGxhbi5lX2ludl9wbGFuLmN1cnJlbmN5X21vZGUpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChleHBlY3RlZF9jY3ksIHBsYW4uZV9pbnZfcGxhbi5jdXJyZW5jeSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGV4cGVjdGVkX2NjeV9yYXRlLCBwbGFuLmVfaW52X3BsYW4uY2N5X3JhdGUpCgogICAgICAgIGxhc3RfdXNlcl9sb2cgPSBmbXNfbW9kZWxzLlVzZXJIaXN0b3J5TG9nLm9iamVjdHMubGFzdCgpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwbGFuLCBsYXN0X3VzZXJfbG9nLnBheW1lbnRfcGxhbikKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGxvZ19kZWYuTE9HX0FDVElPTl9QQVlfUExBTl9FRElULCBsYXN0X3VzZXJfbG9nLmFjdGlvbikKCiAgICBkZWYgdGVzdF91cGRhdGVfcGF5bWVudF9wbGFuX2J5X2FkZF9wYXltZW50X2RldGFpbChzZWxmKToKICAgICAgICAjIGFycmFuZ2UKICAgICAgICBwbGFuID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5QYXltZW50UGxhbiwKICAgICAgICAgICAgcGF5bWVudF9wbGFuX25vPSdPUklHSU4nLAogICAgICAgICAgICBjdXN0b21lcj1tb21teS5tYWtlKGZtc19tb2RlbHMuVHJhZGVQYXJ0bmVyKSwKICAgICAgICApCiAgICAgICAgY2N5X3VzZCA9IG1vbW15Lm1ha2UoQ3VycmVuY3ksIG5hbWU9J1VTRCcpCiAgICAgICAgbmV3X2ZydCA9IG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuRnJlaWdodEluZm8sCiAgICAgICAgICAgIGN1cnJlbmN5PWNjeV91c2QsCiAgICAgICAgICAgIGludm9pY2U9bW9tbXkubWFrZSgKICAgICAgICAgICAgICAgIGZtc19tb2RlbHMuSW52b2ljZSwgbWJsPW1vbW15Lm1ha2UoZm1zX21vZGVscy5TaGlwbWVudE1CTCkKICAgICAgICAgICAgKSwKICAgICAgICApCiAgICAgICAgcGxhbl9kID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5QYXltZW50UGxhbkRldGFpbCwKICAgICAgICAgICAgZnJlaWdodF9pbmZvPW1vbW15Lm1ha2UoCiAgICAgICAgICAgICAgICBmbXNfbW9kZWxzLkZyZWlnaHRJbmZvLAogICAgICAgICAgICAgICAgY3VycmVuY3k9Y2N5X3VzZCwKICAgICAgICAgICAgICAgIGludm9pY2U9bW9tbXkubWFrZSgKICAgICAgICAgICAgICAgICAgICBmbXNfbW9kZWxzLkludm9pY2UsIG1ibD1tb21teS5tYWtlKGZtc19tb2RlbHMuU2hpcG1lbnRNQkwpCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICApLAogICAgICAgICAgICBwYXltZW50X3BsYW49cGxhbiwKICAgICAgICApCgogICAgICAgICMgYWN0aW9uCiAgICAgICAgcmVxdWVzdF9kYXRhID0gewogICAgICAgICAgICAncGF5bWVudF9wbGFuX2RldGFpbF9zZXQnOiBbCiAgICAgICAgICAgICAgICBQYXltZW50UGxhbkRldGFpbEVudHJ5U2VyaWFsaXplcihwbGFuX2QpLmRhdGEsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnRfcGxhbic6IHBsYW4ucGssCiAgICAgICAgICAgICAgICAgICAgJ2ZyZWlnaHRfaW5mbyc6IGtucy5GcmVpZ2h0SW5mb1NlcmlhbGl6ZXIobmV3X2ZydCkuZGF0YSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0KICAgICAgICB9CgogICAgICAgIHVybCA9IF9VUkxfUEFZTUVOVF9QTEFOX1VQREFURV9BUElfRk1UICUgcGxhbi5wawogICAgICAgIHJlc3BvbnNlID0gc2VsZi5jbGllbnQucHV0KHVybCwgZGF0YT1yZXF1ZXN0X2RhdGEpCgogICAgICAgICMgYXNzZXJ0CiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXNwb25zZS5zdGF0dXNfY29kZSwgc3RhdHVzLkhUVFBfMjAwX09LKQoKICAgICAgICBwbGFuLnJlZnJlc2hfZnJvbV9kYigpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgyLCBwbGFuLnBheW1lbnRfcGxhbl9kZXRhaWxfc2V0LmNvdW50KCkpCgogICAgICAgIGxhc3RfcGxhbl9kID0gcGxhbi5wYXltZW50X3BsYW5fZGV0YWlsX3NldC5sYXN0KCkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKG5ld19mcnQsIGxhc3RfcGxhbl9kLmZyZWlnaHRfaW5mbykKCiAgICAgICAgbGFzdF91c2VyX2xvZyA9IGZtc19tb2RlbHMuVXNlckhpc3RvcnlMb2cub2JqZWN0cy5sYXN0KCkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHBsYW4sIGxhc3RfdXNlcl9sb2cucGF5bWVudF9wbGFuKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwobG9nX2RlZi5MT0dfQUNUSU9OX1BBWV9QTEFOX0RFVEFJTF9FRElULCBsYXN0X3VzZXJfbG9nLmFjdGlvbikKCiAgICBkZWYgdGVzdF9yZWFkX3BheW1lbnRfcGxhbl9mdWxsKHNlbGYpOgogICAgICAgICMgYXJyYW5nZQogICAgICAgIHBsYW4gPSBtb21teS5tYWtlKGZtc19tb2RlbHMuUGF5bWVudFBsYW4pCiAgICAgICAgbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5QYXltZW50UGxhbkRldGFpbCwKICAgICAgICAgICAgZnJlaWdodF9pbmZvPW1vbW15Lm1ha2UoCiAgICAgICAgICAgICAgICBmbXNfbW9kZWxzLkZyZWlnaHRJbmZvLAogICAgICAgICAgICAgICAgaW52b2ljZT1tb21teS5tYWtlKAogICAgICAgICAgICAgICAgICAgIGZtc19tb2RlbHMuSW52b2ljZSwgbWJsPW1vbW15Lm1ha2UoZm1zX21vZGVscy5TaGlwbWVudE1CTCkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHBheW1lbnRfcGxhbj1wbGFuLAogICAgICAgICkKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLkVJbnZvaWNlUGxhbiwgcGF5bWVudF9wbGFuPXBsYW4sCiAgICAgICAgKQoKICAgICAgICAjIGFjdGlvbgogICAgICAgIHVybCA9IF9VUkxfUEFZTUVOVF9QTEFOX1VQREFURV9BUElfRk1UICUgcGxhbi5wawogICAgICAgIHJlc3BvbnNlID0gc2VsZi5jbGllbnQuZ2V0KHVybCkKCiAgICAgICAgIyBhc3NlcnQKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3BvbnNlLnN0YXR1c19jb2RlLCBzdGF0dXMuSFRUUF8yMDBfT0spCgogICAgICAgIGRhdGEgPSByZXNwb25zZS5kYXRhCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwbGFuLmlkLCBkYXRhWydpZCddKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocGxhbi5wYXltZW50X3BsYW5fbm8sIGRhdGFbJ3BheW1lbnRfcGxhbl9ubyddKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocGxhbi5jdXN0b21lci5jb2RlLCBkYXRhWydjdXN0b21lciddWydjb2RlJ10pCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwbGFuLmVfaW52X3BsYW4uaWQsIGRhdGFbJ2VfaW52X3BsYW4nXVsnaWQnXSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKAogICAgICAgICAgICBwbGFuLnBheW1lbnRfcGxhbl9kZXRhaWxfc2V0LmZpcnN0KCkuaWQsCiAgICAgICAgICAgIGRhdGFbJ3BheW1lbnRfcGxhbl9kZXRhaWxfc2V0J11bMF1bJ2lkJ10sCiAgICAgICAgKQoKICAgIGRlZiB0ZXN0X2RlbGV0ZV9wYXltZW50X3BsYW4oc2VsZik6CiAgICAgICAgIyBhcnJhbmdlCiAgICAgICAgcGxhbiA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbikKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuRGV0YWlsLAogICAgICAgICAgICBmcmVpZ2h0X2luZm89bW9tbXkubWFrZSgKICAgICAgICAgICAgICAgIGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9bW9tbXkubWFrZShmbXNfbW9kZWxzLkludm9pY2UpCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHBheW1lbnRfcGxhbj1wbGFuLAogICAgICAgICkKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLkVJbnZvaWNlUGxhbiwgcGF5bWVudF9wbGFuPXBsYW4sCiAgICAgICAgKQoKICAgICAgICAjIGFjdGlvbgogICAgICAgIHVybCA9IF9VUkxfUEFZTUVOVF9QTEFOX1VQREFURV9BUElfRk1UICUgcGxhbi5wawogICAgICAgIHJlc3BvbnNlID0gc2VsZi5jbGllbnQuZGVsZXRlKHVybCkKCiAgICAgICAgIyBhc3NlcnQKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3BvbnNlLnN0YXR1c19jb2RlLCBzdGF0dXMuSFRUUF8yMDRfTk9fQ09OVEVOVCkKCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgwLCBmbXNfbW9kZWxzLlBheW1lbnRQbGFuLm9iamVjdHMuY291bnQoKSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKDAsIGZtc19tb2RlbHMuUGF5bWVudFBsYW5EZXRhaWwub2JqZWN0cy5jb3VudCgpKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoMCwgZm1zX21vZGVscy5FSW52b2ljZVBsYW4ub2JqZWN0cy5jb3VudCgpKQoKICAgIGRlZiB0ZXN0X2VfaW52X3BsYW5fZV9pbnZvaWNlX2xpc3RfY3JlYXRlKHNlbGYpOgogICAgICAgICMgYXJyYW5nZQogICAgICAgIGNjeV91c2QgPSBtb21teS5tYWtlKEN1cnJlbmN5LCBuYW1lPSdVU0QnKQogICAgICAgIHBheW1lbnRfcGxhbiA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbikKICAgICAgICBwYXltZW50X3BsYW5fZCA9IG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuUGF5bWVudFBsYW5EZXRhaWwsCiAgICAgICAgICAgIHBheW1lbnRfcGxhbj1wYXltZW50X3BsYW4sCiAgICAgICAgICAgIGZyZWlnaHRfaW5mbz1tb21teS5tYWtlKAogICAgICAgICAgICAgICAgZm1zX21vZGVscy5GcmVpZ2h0SW5mbywKICAgICAgICAgICAgICAgIGN1cnJlbmN5PWNjeV91c2QsCiAgICAgICAgICAgICAgICBpbnZvaWNlPW1vbW15Lm1ha2UoCiAgICAgICAgICAgICAgICAgICAgZm1zX21vZGVscy5JbnZvaWNlLCBtYmw9bW9tbXkubWFrZShmbXNfbW9kZWxzLlNoaXBtZW50TUJMKQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgKSwKICAgICAgICApCiAgICAgICAgZV9pbnZfcGxhbiA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5FSW52b2ljZVBsYW4sIHBheW1lbnRfcGxhbj1wYXltZW50X3BsYW4pCiAgICAgICAgZXhwZWN0ZWRfY2N5ID0gbW9tbXkubWFrZShDdXJyZW5jeSkKICAgICAgICBleHBlY3RlZF9lbWFpbCA9ICd0ZXN0QGhhcmRjb3JldGVjaC5jbycKICAgICAgICBleHBlY3RlZF9yZW1hcmsgPSAnVEVTVCBSRU1BUksnCgogICAgICAgICMgYWN0aW9uCiAgICAgICAgcmVxdWVzdF9kYXRhID0gewogICAgICAgICAgICAnZV9pbnZfcGxhbic6IHsKICAgICAgICAgICAgICAgICdpZCc6IGVfaW52X3BsYW4uaWQsCiAgICAgICAgICAgICAgICAnZV9pbnZvaWNlX3NldCc6IFsKICAgICAgICAgICAgICAgICAgICBkaWN0KAogICAgICAgICAgICAgICAgICAgICAgICBlbWFpbD1leHBlY3RlZF9lbWFpbCwKICAgICAgICAgICAgICAgICAgICAgICAgcmVtYXJrPWV4cGVjdGVkX3JlbWFyaywKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3k9ZXhwZWN0ZWRfY2N5LmlkLAogICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50X3BsYW5fZGV0YWlsX3NldD1bcGF5bWVudF9wbGFuX2QuaWRdLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHVybCA9IF9VUkxfUEFZTUVOVF9QTEFOX1VQREFURV9BUElfRk1UICUgZV9pbnZfcGxhbi5wYXltZW50X3BsYW5faWQKICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LnB1dCh1cmwsIHJlcXVlc3RfZGF0YSkKCiAgICAgICAgIyBhc3NlcnQKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3BvbnNlLnN0YXR1c19jb2RlLCBzdGF0dXMuSFRUUF8yMDBfT0spCgogICAgICAgIGVfaW52X3BsYW4ucmVmcmVzaF9mcm9tX2RiKCkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKDEsIGVfaW52X3BsYW4uZV9pbnZvaWNlX3NldC5jb3VudCgpKQoKICAgICAgICBsYXN0X2VfaW52ID0gZV9pbnZfcGxhbi5lX2ludm9pY2Vfc2V0Lmxhc3QoKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZXhwZWN0ZWRfZW1haWwsIGxhc3RfZV9pbnYuZW1haWwpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChleHBlY3RlZF9yZW1hcmssIGxhc3RfZV9pbnYucmVtYXJrKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoCiAgICAgICAgICAgIFtwYXltZW50X3BsYW5fZC5pZF0sCiAgICAgICAgICAgIGxpc3QobGFzdF9lX2ludi5wYXltZW50X3BsYW5fZGV0YWlsX3NldC52YWx1ZXNfbGlzdCgnaWQnLCBmbGF0PVRydWUpKSwKICAgICAgICApCgogICAgZGVmIHRlc3RfZV9pbnZfcGxhbl9lX2ludm9pY2VfbGlzdF9yZWFkKHNlbGYpOgogICAgICAgICMgYXJyYW5nZQogICAgICAgIGVfaW52X3BsYW4gPSBtb21teS5tYWtlKGZtc19tb2RlbHMuRUludm9pY2VQbGFuKQogICAgICAgIG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuRUludm9pY2UsCiAgICAgICAgICAgIGVfaW52X3BsYW49ZV9pbnZfcGxhbiwKICAgICAgICAgICAgcGF5bWVudF9wbGFuX2RldGFpbF9zZXQ9WwogICAgICAgICAgICAgICAgbW9tbXkubWFrZSgKICAgICAgICAgICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuRGV0YWlsLAogICAgICAgICAgICAgICAgICAgIHBheW1lbnRfcGxhbj1lX2ludl9wbGFuLnBheW1lbnRfcGxhbiwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgIF0sCiAgICAgICAgKQogICAgICAgIG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuRUludm9pY2UsCiAgICAgICAgICAgIGVfaW52X3BsYW49ZV9pbnZfcGxhbiwKICAgICAgICAgICAgcGF5bWVudF9wbGFuX2RldGFpbF9zZXQ9WwogICAgICAgICAgICAgICAgbW9tbXkubWFrZSgKICAgICAgICAgICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuRGV0YWlsLAogICAgICAgICAgICAgICAgICAgIHBheW1lbnRfcGxhbj1lX2ludl9wbGFuLnBheW1lbnRfcGxhbiwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgIF0sCiAgICAgICAgKQoKICAgICAgICAjIGFjdGlvbgogICAgICAgIHVybCA9IF9VUkxfUEFZTUVOVF9QTEFOX1VQREFURV9BUElfRk1UICUgZV9pbnZfcGxhbi5wYXltZW50X3BsYW5faWQKICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LmdldCh1cmwpCgogICAgICAgICMgYXNzZXJ0CiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXNwb25zZS5zdGF0dXNfY29kZSwgc3RhdHVzLkhUVFBfMjAwX09LKQoKICAgICAgICBlX2ludl9wbGFuLnJlZnJlc2hfZnJvbV9kYigpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgyLCBlX2ludl9wbGFuLmVfaW52b2ljZV9zZXQuY291bnQoKSkKCiAgICBkZWYgdGVzdF9lX2ludl9wbGFuX2VfaW52b2ljZV9saXN0X3VwZGF0ZShzZWxmKToKICAgICAgICAjIGFycmFuZ2UKICAgICAgICBlX2ludl9wbGFuID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLkVJbnZvaWNlUGxhbikKCiAgICAgICAgcGRfMSA9IG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuUGF5bWVudFBsYW5EZXRhaWwsCiAgICAgICAgICAgIGZyZWlnaHRfaW5mbz1tb21teS5tYWtlKAogICAgICAgICAgICAgICAgZm1zX21vZGVscy5GcmVpZ2h0SW5mbywKICAgICAgICAgICAgICAgIF9maWxsX29wdGlvbmFsPVsnY3VycmVuY3knXSwKICAgICAgICAgICAgICAgIGludm9pY2U9bW9tbXkubWFrZShmbXNfbW9kZWxzLkludm9pY2UsIF9maWxsX29wdGlvbmFsPVsnbWJsJ10pLAogICAgICAgICAgICApLAogICAgICAgICAgICBwYXltZW50X3BsYW49ZV9pbnZfcGxhbi5wYXltZW50X3BsYW4sCiAgICAgICAgKQogICAgICAgIGVfaW52ID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5FSW52b2ljZSwKICAgICAgICAgICAgZV9pbnZfcGxhbj1lX2ludl9wbGFuLAogICAgICAgICAgICBwYXltZW50X3BsYW5fZGV0YWlsX3NldD1bcGRfMV0sCiAgICAgICAgKQoKICAgICAgICBwZF8yID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5QYXltZW50UGxhbkRldGFpbCwKICAgICAgICAgICAgZnJlaWdodF9pbmZvPW1vbW15Lm1ha2UoCiAgICAgICAgICAgICAgICBmbXNfbW9kZWxzLkZyZWlnaHRJbmZvLAogICAgICAgICAgICAgICAgX2ZpbGxfb3B0aW9uYWw9WydjdXJyZW5jeSddLAogICAgICAgICAgICAgICAgaW52b2ljZT1tb21teS5tYWtlKGZtc19tb2RlbHMuSW52b2ljZSwgX2ZpbGxfb3B0aW9uYWw9WydtYmwnXSksCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHBheW1lbnRfcGxhbj1lX2ludl9wbGFuLnBheW1lbnRfcGxhbiwKICAgICAgICApCgogICAgICAgIGV4cGVjdGVkX2NjeSA9IG1vbW15Lm1ha2UoQ3VycmVuY3kpCiAgICAgICAgZXhwZWN0ZWRfZW1haWxfMSA9ICd0ZXN0QGhhcmRjb3JldGVjaC5jbycKICAgICAgICBleHBlY3RlZF9yZW1hcmtfMSA9ICdURVNUIFJFTUFSSycKCiAgICAgICAgZXhwZWN0ZWRfZW1haWxfMiA9ICdmb29iYXJAaGFyZGNvcmV0ZWNoLmNvJwogICAgICAgIGV4cGVjdGVkX3JlbWFya18yID0gJ1RFU1QgUkVNQVJLIDInCgogICAgICAgICMgYWN0aW9uCiAgICAgICAgcmVxdWVzdF9kYXRhID0gewogICAgICAgICAgICAnZV9pbnZfcGxhbic6IHsKICAgICAgICAgICAgICAgICdpZCc6IGVfaW52X3BsYW4uaWQsCiAgICAgICAgICAgICAgICAnZV9pbnZvaWNlX3NldCc6IFsKICAgICAgICAgICAgICAgICAgICBkaWN0KAogICAgICAgICAgICAgICAgICAgICAgICBpZD1lX2ludi5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw9ZXhwZWN0ZWRfZW1haWxfMSwKICAgICAgICAgICAgICAgICAgICAgICAgcmVtYXJrPWV4cGVjdGVkX3JlbWFya18xLAogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeT1leHBlY3RlZF9jY3kuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRfcGxhbl9kZXRhaWxfc2V0PVtwZF8xLmlkXSwKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgIGRpY3QoCiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsPWV4cGVjdGVkX2VtYWlsXzIsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbWFyaz1leHBlY3RlZF9yZW1hcmtfMiwKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3k9ZXhwZWN0ZWRfY2N5LmlkLAogICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50X3BsYW5fZGV0YWlsX3NldD1bcGRfMi5pZF0sCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHVybCA9IF9VUkxfUEFZTUVOVF9QTEFOX1VQREFURV9BUElfRk1UICUgZV9pbnZfcGxhbi5wYXltZW50X3BsYW5faWQKICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LnB1dCh1cmwsIHJlcXVlc3RfZGF0YSkKCiAgICAgICAgIyBhc3NlcnQKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3BvbnNlLnN0YXR1c19jb2RlLCBzdGF0dXMuSFRUUF8yMDBfT0spCgogICAgICAgIGVfaW52X3BsYW4ucmVmcmVzaF9mcm9tX2RiKCkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKDIsIGVfaW52X3BsYW4uZV9pbnZvaWNlX3NldC5jb3VudCgpKQoKICAgICAgICBmaXJzdF9lX2ludiA9IGVfaW52X3BsYW4uZV9pbnZvaWNlX3NldC5maXJzdCgpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChlX2ludi5pZCwgZmlyc3RfZV9pbnYuaWQpCgogICAgICAgIHNlbGYuYXNzZXJ0TGlzdEVxdWFsKAogICAgICAgICAgICBsaXN0KGVfaW52X3BsYW4uZV9pbnZvaWNlX3NldC52YWx1ZXNfbGlzdCgnZW1haWwnLCAncmVtYXJrJywgJ2N1cnJlbmN5JykpLAogICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAoZXhwZWN0ZWRfZW1haWxfMSwgZXhwZWN0ZWRfcmVtYXJrXzEsIGV4cGVjdGVkX2NjeS5pZCksCiAgICAgICAgICAgICAgICAoZXhwZWN0ZWRfZW1haWxfMiwgZXhwZWN0ZWRfcmVtYXJrXzIsIGV4cGVjdGVkX2NjeS5pZCksCiAgICAgICAgICAgIF0sCiAgICAgICAgKQoKICAgIGRlZiB0ZXN0X2VfaW52X3BsYW5fZV9pbnZvaWNlX2xpc3RfdXBkYXRlX2tlZXBzX2RlYWN0aXZhdGVkX2VfaW52KHNlbGYpOgogICAgICAgICMgYXJyYW5nZQogICAgICAgIGVfaW52X3BsYW4gPSBtb21teS5tYWtlKGZtc19tb2RlbHMuRUludm9pY2VQbGFuKQoKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLkVJbnZvaWNlLAogICAgICAgICAgICBlX2ludl9wbGFuPWVfaW52X3BsYW4sCiAgICAgICAgICAgIGlzX2RlYWN0aXZhdGVkPVRydWUsCiAgICAgICAgKSAgIyBkZWFjdGl2YXRlZAoKICAgICAgICBjY3kgPSBtb21teS5tYWtlKEN1cnJlbmN5KQogICAgICAgIHBkID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5QYXltZW50UGxhbkRldGFpbCwKICAgICAgICAgICAgZnJlaWdodF9pbmZvPW1vbW15Lm1ha2UoCiAgICAgICAgICAgICAgICBmbXNfbW9kZWxzLkZyZWlnaHRJbmZvLAogICAgICAgICAgICAgICAgY3VycmVuY3k9Y2N5LAogICAgICAgICAgICAgICAgaW52b2ljZT1tb21teS5tYWtlKGZtc19tb2RlbHMuSW52b2ljZSwgX2ZpbGxfb3B0aW9uYWw9WydtYmwnXSksCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHBheW1lbnRfcGxhbj1lX2ludl9wbGFuLnBheW1lbnRfcGxhbiwKICAgICAgICApCgogICAgICAgICMgYWN0aW9uCiAgICAgICAgcmVxdWVzdF9kYXRhID0gewogICAgICAgICAgICAnZV9pbnZfcGxhbic6IHsKICAgICAgICAgICAgICAgICdpZCc6IGVfaW52X3BsYW4uaWQsCiAgICAgICAgICAgICAgICAnZV9pbnZvaWNlX3NldCc6IFsKICAgICAgICAgICAgICAgICAgICBkaWN0KAogICAgICAgICAgICAgICAgICAgICAgICBlbWFpbD0ndGVzdEBoYXJkY29yZXRlY2guY28nLAogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeT1jY3kuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRfcGxhbl9kZXRhaWxfc2V0PVtwZC5pZF0sCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH0KICAgICAgICB9ICAjIGRlYWN0aXZhdGVkIGUtaW52b2ljZSBzaG91bGQgbm90IGFwcGVhciBvbiBmcm9udGVuZAoKICAgICAgICB1cmwgPSBfVVJMX1BBWU1FTlRfUExBTl9VUERBVEVfQVBJX0ZNVCAlIGVfaW52X3BsYW4ucGF5bWVudF9wbGFuX2lkCiAgICAgICAgcmVzcG9uc2UgPSBzZWxmLmNsaWVudC5wdXQodXJsLCByZXF1ZXN0X2RhdGEpCgogICAgICAgICMgYXNzZXJ0CiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXNwb25zZS5zdGF0dXNfY29kZSwgc3RhdHVzLkhUVFBfMjAwX09LKQoKICAgICAgICBlX2ludl9wbGFuLnJlZnJlc2hfZnJvbV9kYigpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgyLCBlX2ludl9wbGFuLmVfaW52b2ljZV9zZXQuY291bnQoKSkgICMgZGVhY3RpdmF0ZWQgYW5kIG5ld2x5IGNyZWF0ZWQKCiAgICBkZWYgdGVzdF9lX2ludm9pY2VfbGlzdF9jb250YWluX3N0YXR1cyhzZWxmKToKICAgICAgICAjIGFycmFuZ2UKICAgICAgICBlX2ludl9wbGFuID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5FSW52b2ljZVBsYW4sIHBheW1lbnRfcGxhbj1tb21teS5tYWtlKGZtc19tb2RlbHMuUGF5bWVudFBsYW4pCiAgICAgICAgKQogICAgICAgIGVfaW52ID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5FSW52b2ljZSwKICAgICAgICAgICAgZV9pbnZfcGxhbj1lX2ludl9wbGFuLAogICAgICAgICAgICBwYXltZW50X3BsYW5fZGV0YWlsX3NldD1bCiAgICAgICAgICAgICAgICBtb21teS5tYWtlKGZtc19tb2RlbHMuUGF5bWVudFBsYW5EZXRhaWwsIHBheW1lbnRfcGxhbj1lX2ludl9wbGFuLnBheW1lbnRfcGxhbiksCiAgICAgICAgICAgIF0sCiAgICAgICAgKQogICAgICAgIGVfaW52X3JlY18xID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLkVJbnZvaWNlUmVjb3JkLCBlX2ludm9pY2U9ZV9pbnYsIHN0YXR1cz0iUCIpCiAgICAgICAgZV9pbnZfcmVjXzIgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuRUludm9pY2VSZWNvcmQsIGVfaW52b2ljZT1lX2ludiwgc3RhdHVzPSJTIikKCiAgICAgICAgIyBhc3NlcnQKICAgICAgICB1cmwgPSBfVVJMX1BBWU1FTlRfUExBTl9VUERBVEVfQVBJX0ZNVCAlIGVfaW52X3BsYW4ucGF5bWVudF9wbGFuX2lkCiAgICAgICAgcmVzcG9uc2UgPSBzZWxmLmNsaWVudC5nZXQodXJsKQoKICAgICAgICAjIGFjdGlvbgogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzcG9uc2Uuc3RhdHVzX2NvZGUsIHN0YXR1cy5IVFRQXzIwMF9PSykKCiAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICBsYXN0X3JlY29yZF9kYXRhID0gZGF0YVsnZV9pbnZfcGxhbiddWydlX2ludm9pY2Vfc2V0J11bMF1bJ2xhc3RfZV9pbnZvaWNlX3JlY29yZCddCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChlX2ludl9yZWNfMi5pZCwgbGFzdF9yZWNvcmRfZGF0YVsnaWQnXSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGVfaW52X3JlY18yLnN0YXR1cywgbGFzdF9yZWNvcmRfZGF0YVsnc3RhdHVzJ10pCgoKY2xhc3MgVGVzdFBheW1lbnRQbGFuU2hpcG1lbnRMaXN0QXBpKEZtc0FQSVRlc3RDYXNlKToKICAgIG1heERpZmYgPSBOb25lCgogICAgZGVmIHRlc3RfZnVsbF92YWx1ZShzZWxmKToKICAgICAgICAjIGFycmFuZ2UKICAgICAgICB0cCA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5UcmFkZVBhcnRuZXIpCiAgICAgICAgbWJsID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5TaGlwbWVudE1CTCwKICAgICAgICAgICAgZmlsaW5nX25vPSdGSUxFIE5PJywKICAgICAgICAgICAgTUJMX05PPSdNQkwgTk8nLAogICAgICAgICAgICB2ZXNzZWxfbmFtZT0nVkVTU0VMJywKICAgICAgICAgICAgdm95YWdlPSdWb3lhZ2UnLAogICAgICAgICAgICBfZmlsbF9vcHRpb25hbD1bJ29pX2luZm8nXSwKICAgICAgICApCiAgICAgICAgaGJsID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlNoaXBtZW50SEJMLCBtYmw9bWJsLCBIQkxfTk89J0hCTCBOTycpCiAgICAgICAgaW52XzEgPSBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLkludm9pY2UsCiAgICAgICAgICAgIG1ibD1tYmwsCiAgICAgICAgICAgIGludm9pY2Vfbm89J0lOViBOTyAxJywKICAgICAgICAgICAgcG9zdF9kYXRlPWRhdGUoMjAyMCwgNSwgMjApLAogICAgICAgICAgICB0cmFkZV9wYXJ0bmVyPXRwLAogICAgICAgICkKICAgICAgICBpbnZfMiA9IG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuSW52b2ljZSwKICAgICAgICAgICAgbWJsPW1ibCwKICAgICAgICAgICAgaGJsPWhibCwKICAgICAgICAgICAgaW52b2ljZV9ubz0nSU5WIE5PIDInLAogICAgICAgICAgICBwb3N0X2RhdGU9ZGF0ZSgyMDIwLCA1LCAyMSksCiAgICAgICAgICAgIHRyYWRlX3BhcnRuZXI9dHAsCiAgICAgICAgKQogICAgICAgIGNjeV8xID0gbW9tbXkubWFrZShDdXJyZW5jeSkKCiAgICAgICAgYmlsbGluZ18xID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLkJpbGxpbmcpCiAgICAgICAgZnJ0XzEgPSBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLkZyZWlnaHRJbmZvLAogICAgICAgICAgICBpbnZvaWNlPWludl8xLAogICAgICAgICAgICB0eXBlPSdCJywKICAgICAgICAgICAgYmlsbGluZz1iaWxsaW5nXzEsCiAgICAgICAgICAgIGFtb3VudD0xMCwKICAgICAgICAgICAgY3VycmVuY3k9Y2N5XzEsCiAgICAgICAgICAgIGN1cnJlbmN5X2Ftb3VudD0xMCwKICAgICAgICApCgogICAgICAgIGZydF8yID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5GcmVpZ2h0SW5mbywKICAgICAgICAgICAgaW52b2ljZT1pbnZfMiwKICAgICAgICAgICAgdHlwZT0nQicsCiAgICAgICAgICAgIGJpbGxpbmc9YmlsbGluZ18xLAogICAgICAgICAgICBhbW91bnQ9NSwKICAgICAgICAgICAgY3VycmVuY3k9Y2N5XzEsCiAgICAgICAgICAgIGN1cnJlbmN5X2Ftb3VudD01LAogICAgICAgICkKCiAgICAgICAgdGFyZ2V0X2VudHJ5X3VybF9mbXRfbWJsID0gJy9vY2Vhbi9pbXBvcnQvc2hpcG1lbnQvJXMvJwogICAgICAgIHRhcmdldF9lbnRyeV91cmxfZm10X2hibCA9ICcvb2NlYW4vaW1wb3J0L3NoaXBtZW50LyVzLz9oYmw9JWQnCiAgICAgICAgaW52X2VudHJ5X3VybF9mbXQgPSAnL2FjY291bnRpbmcvaW52b2ljZS9lbnRyeS8lZC8nCgogICAgICAgIGV4cGVjdF9kYXRhID0gWwogICAgICAgICAgICBkaWN0KAogICAgICAgICAgICAgICAgaWQ9ZnJ0XzEuaWQsCiAgICAgICAgICAgICAgICBuYW1lPWZydF8xLm5hbWUsCiAgICAgICAgICAgICAgICB0eXBlPWZydF8xLnR5cGUsCiAgICAgICAgICAgICAgICBjdXJyZW5jeT1mcnRfMS5jdXJyZW5jeS5pZCwKICAgICAgICAgICAgICAgIGN1cnJlbmN5X2Ftb3VudD1mcnRfMS5jdXJyZW5jeV9hbW91bnQsCiAgICAgICAgICAgICAgICBpbnZvaWNlPWludl8xLmlkLAogICAgICAgICAgICAgICAgaW52b2ljZV90eXBlPSdCJywKICAgICAgICAgICAgICAgIHBvc3RfZGF0ZT11dGlsLmRhdGUyc3RyX2lzbyhpbnZfMS5wb3N0X2RhdGUpLAogICAgICAgICAgICAgICAgaW52b2ljZV9kYXRlPXV0aWwuZGF0ZTJzdHJfaXNvKGludl8xLmludm9pY2VfZGF0ZSksCiAgICAgICAgICAgICAgICBkdWVfZGF0ZT11dGlsLmRhdGUyc3RyX2lzbyhpbnZfMS5kdWVfZGF0ZSksCiAgICAgICAgICAgICAgICBpc19nZW5lcmFsX2V4cGVuc2U9RmFsc2UsCiAgICAgICAgICAgICAgICBiaWxsaW5nPWRpY3QoCiAgICAgICAgICAgICAgICAgICAgaWQ9YmlsbGluZ18xLmlkLAogICAgICAgICAgICAgICAgICAgIGNvZGU9YmlsbGluZ18xLmNvZGUsCiAgICAgICAgICAgICAgICAgICAgbmFtZT1iaWxsaW5nXzEubmFtZSwKICAgICAgICAgICAgICAgICAgICBsb2NhbF9uYW1lPWJpbGxpbmdfMS5sb2NhbF9uYW1lLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIGludm9pY2Vfbm89aW52XzEuaW52b2ljZV9ubywKICAgICAgICAgICAgICAgIGluX3dhcmVob3VzZT1GYWxzZSwKICAgICAgICAgICAgICAgIGZpbGluZ19ubz1pbnZfMS50YXJnZXQuZmlsaW5nX25vLAogICAgICAgICAgICAgICAgbWJsX25vPWludl8xLnRhcmdldC5NQkxfTk8sCiAgICAgICAgICAgICAgICBoYmxfbm89Tm9uZSwKICAgICAgICAgICAgICAgIHZlc3NlbD1pbnZfMS50YXJnZXQudmVzc2VsX2ZsaWdodF9ubywKICAgICAgICAgICAgICAgIHZveWFnZT1pbnZfMS50YXJnZXQudm95YWdlLAogICAgICAgICAgICAgICAgb3BlcmF0b3I9aW52XzEudGFyZ2V0Lm9wZXJhdG9yLAogICAgICAgICAgICAgICAgc2FsZXM9aW52XzEudGFyZ2V0LnNhbGVzLAogICAgICAgICAgICAgICAgRVREPWludl8xLnRhcmdldC5FVEQsCiAgICAgICAgICAgICAgICBFVEE9aW52XzEudGFyZ2V0LkVUQSwKICAgICAgICAgICAgICAgIHRhcmdldF9lbnRyeV91cmw9dGFyZ2V0X2VudHJ5X3VybF9mbXRfbWJsICUgbWJsLmZpbGluZ19ubywKICAgICAgICAgICAgICAgIGludl9lbnRyeV91cmw9aW52X2VudHJ5X3VybF9mbXQgJSBpbnZfMS5pZCwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgZGljdCgKICAgICAgICAgICAgICAgIGlkPWZydF8yLmlkLAogICAgICAgICAgICAgICAgdHlwZT1mcnRfMi50eXBlLAogICAgICAgICAgICAgICAgbmFtZT1mcnRfMi5uYW1lLAogICAgICAgICAgICAgICAgY3VycmVuY3k9ZnJ0XzIuY3VycmVuY3kuaWQsCiAgICAgICAgICAgICAgICBjdXJyZW5jeV9hbW91bnQ9ZnJ0XzIuY3VycmVuY3lfYW1vdW50LAogICAgICAgICAgICAgICAgaW52b2ljZT1pbnZfMi5pZCwKICAgICAgICAgICAgICAgIGludm9pY2VfdHlwZT0nQicsCiAgICAgICAgICAgICAgICBwb3N0X2RhdGU9dXRpbC5kYXRlMnN0cl9pc28oaW52XzIucG9zdF9kYXRlKSwKICAgICAgICAgICAgICAgIGludm9pY2VfZGF0ZT11dGlsLmRhdGUyc3RyX2lzbyhpbnZfMi5pbnZvaWNlX2RhdGUpLAogICAgICAgICAgICAgICAgZHVlX2RhdGU9dXRpbC5kYXRlMnN0cl9pc28oaW52XzIuZHVlX2RhdGUpLAogICAgICAgICAgICAgICAgaXNfZ2VuZXJhbF9leHBlbnNlPUZhbHNlLAogICAgICAgICAgICAgICAgYmlsbGluZz1kaWN0KAogICAgICAgICAgICAgICAgICAgIGlkPWJpbGxpbmdfMS5pZCwKICAgICAgICAgICAgICAgICAgICBjb2RlPWJpbGxpbmdfMS5jb2RlLAogICAgICAgICAgICAgICAgICAgIG5hbWU9YmlsbGluZ18xLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgbG9jYWxfbmFtZT1iaWxsaW5nXzEubG9jYWxfbmFtZSwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBpbnZvaWNlX25vPWludl8yLmludm9pY2Vfbm8sCiAgICAgICAgICAgICAgICBpbl93YXJlaG91c2U9RmFsc2UsCiAgICAgICAgICAgICAgICBmaWxpbmdfbm89aW52XzIudGFyZ2V0LmZpbGluZ19ubywKICAgICAgICAgICAgICAgIG1ibF9ubz1pbnZfMi50YXJnZXQuTUJMX05PLAogICAgICAgICAgICAgICAgaGJsX25vPWludl8yLnRhcmdldC5IQkxfTk8sCiAgICAgICAgICAgICAgICB2ZXNzZWw9aW52XzIudGFyZ2V0LnZlc3NlbF9mbGlnaHRfbm8sCiAgICAgICAgICAgICAgICB2b3lhZ2U9aW52XzIudGFyZ2V0LnZveWFnZSwKICAgICAgICAgICAgICAgIG9wZXJhdG9yPWludl8yLnRhcmdldC5vcGVyYXRvciwKICAgICAgICAgICAgICAgIHNhbGVzPWludl8yLnRhcmdldC5zYWxlcywKICAgICAgICAgICAgICAgIEVURD1pbnZfMi50YXJnZXQuRVRELAogICAgICAgICAgICAgICAgRVRBPWludl8yLnRhcmdldC5FVEEsCiAgICAgICAgICAgICAgICB0YXJnZXRfZW50cnlfdXJsPXRhcmdldF9lbnRyeV91cmxfZm10X2hibCAlIChtYmwuZmlsaW5nX25vLCBoYmwuaWQpLAogICAgICAgICAgICAgICAgaW52X2VudHJ5X3VybD1pbnZfZW50cnlfdXJsX2ZtdCAlIGludl8yLmlkLAogICAgICAgICAgICApLAogICAgICAgIF0KCiAgICAgICAgIyBhY3Rpb24KICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICAgICdwYXJ0eV9jb2RlJzogdHAuY29kZSwKICAgICAgICB9CiAgICAgICAgcmVzcG9uc2UgPSBzZWxmLmNsaWVudC5nZXQoX1VSTF9QQVlNRU5UX1BMQU5fU0hJUE1FTlRfTElTVF9BUEksIHBhcmFtcykKCiAgICAgICAgIyBhc3NlcnQKICAgICAgICBkYXRhID0gcmVzcG9uc2UuZGF0YQogICAgICAgIGZvciBlX2QsIGQgaW4gemlwKGV4cGVjdF9kYXRhLCBkYXRhKToKICAgICAgICAgICAgc2VsZi5hc3NlcnREaWN0RXF1YWwoZV9kLCBkKQoKICAgIGRlZiB0ZXN0X2Fzc2lnbmVkX2ZyZWlnaHRzX3Nob3VsZF9ub3RfYmVfbGlzdGVkKHNlbGYpOgogICAgICAgICMgYXJyYW5nZQogICAgICAgIHRwID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlRyYWRlUGFydG5lcikKICAgICAgICBtYmwgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuU2hpcG1lbnRNQkwpCiAgICAgICAgaGJsID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlNoaXBtZW50SEJMLCBtYmw9bWJsKQogICAgICAgIGludl8xID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLkludm9pY2UsIG1ibD1tYmwsIHRyYWRlX3BhcnRuZXI9dHApCiAgICAgICAgaW52XzIgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuSW52b2ljZSwgbWJsPW1ibCwgaGJsPWhibCwgdHJhZGVfcGFydG5lcj10cCkKICAgICAgICBpbnZfMyA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5JbnZvaWNlLCBtYmw9bWJsLCBoYmw9aGJsLCB0cmFkZV9wYXJ0bmVyPXRwKSAgIyBub3QgYXNzaWduZWQKCiAgICAgICAgZnJ0XzEgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzEpCiAgICAgICAgZnJ0XzIgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzIpCiAgICAgICAgZnJ0XzMgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzMpICAjIG5vdCBhc3NpZ25lZAoKICAgICAgICBwX3BsYW5fMSA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbikKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuRGV0YWlsLCBwYXltZW50X3BsYW49cF9wbGFuXzEsIGZyZWlnaHRfaW5mbz1mcnRfMQogICAgICAgICkKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuRGV0YWlsLCBwYXltZW50X3BsYW49cF9wbGFuXzEsIGZyZWlnaHRfaW5mbz1mcnRfMgogICAgICAgICkKCiAgICAgICAgIyBhY3Rpb24KICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICAgICdwYXltZW50X3BsYW4nOiBwX3BsYW5fMS5pZCwgJ3BhcnR5X2NvZGUnOiB0cC5jb2RlLAogICAgICAgIH0KICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LmdldChfVVJMX1BBWU1FTlRfUExBTl9TSElQTUVOVF9MSVNUX0FQSSwgcGFyYW1zKQoKICAgICAgICAjIGFzc2VydAogICAgICAgIGRhdGEgPSByZXNwb25zZS5kYXRhCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgxLCBsZW4oZGF0YSkpCgogICAgICAgIGZydF9kYXRhID0gZGF0YVswXQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoZnJ0XzMuaWQsIGZydF9kYXRhWydpZCddKQoKICAgIGRlZiB0ZXN0X2xpbmtlZF9pbnZvaWNlX2Nhbl9vbmx5X2JlX3NlYXJjaGVkX2J5X3RoZV9saW5rZWRfcGF5bWVudF9wbGFuKHNlbGYpOgogICAgICAgICMgYXJyYW5nZQogICAgICAgIHRwID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlRyYWRlUGFydG5lcikKCiAgICAgICAgIyBmaXJzdCBzaGlwbWVudCBhbmQgaXRzIGludm9pY2VzCiAgICAgICAgbWJsXzEgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuU2hpcG1lbnRNQkwpCiAgICAgICAgaW52XzEgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuSW52b2ljZSwgbWJsPW1ibF8xLCB0cmFkZV9wYXJ0bmVyPXRwKQogICAgICAgIGludl8yID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLkludm9pY2UsIG1ibD1tYmxfMSwgdHJhZGVfcGFydG5lcj10cCkKICAgICAgICBpbnZfMV9mcnQgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzEpCiAgICAgICAgaW52XzJfZnJ0ID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLkZyZWlnaHRJbmZvLCBpbnZvaWNlPWludl8yKSAgIyBub3QgYXNzaWduZWQsIHNob3cgb24gYm90aCByZXN1bHRzCgogICAgICAgICMgaW52b2ljZSBvZiBhbm90aGVyIHNoaXBtZW50CiAgICAgICAgbWJsXzIgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuU2hpcG1lbnRNQkwpCiAgICAgICAgaW52XzMgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuSW52b2ljZSwgbWJsPW1ibF8yLCB0cmFkZV9wYXJ0bmVyPXRwKQogICAgICAgIGludl80ID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLkludm9pY2UsIG1ibD1tYmxfMiwgdHJhZGVfcGFydG5lcj10cCkKICAgICAgICBpbnZfM19mcnQgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzMpCiAgICAgICAgaW52XzRfZnJ0ID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLkZyZWlnaHRJbmZvLCBpbnZvaWNlPWludl80KSAgIyBub3QgYXNzaWduZWQsIHNob3cgb24gYm90aCByZXN1bHRzCgogICAgICAgICMgdGhlIGZpcnN0IHBsYW4KICAgICAgICBwX3BsYW5fMSA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbiwgY3VzdG9tZXI9dHApCiAgICAgICAgbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5QYXltZW50UGxhbkRldGFpbCwgcGF5bWVudF9wbGFuPXBfcGxhbl8xLCBmcmVpZ2h0X2luZm89aW52XzFfZnJ0CiAgICAgICAgKQoKICAgICAgICAjIHRoZSBzZWNvbmQgcGxhbgogICAgICAgIHBfcGxhbl8yID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlBheW1lbnRQbGFuLCBjdXN0b21lcj10cCkKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuRGV0YWlsLCBwYXltZW50X3BsYW49cF9wbGFuXzIsIGZyZWlnaHRfaW5mbz1pbnZfM19mcnQKICAgICAgICApCgogICAgICAgICMgYWN0aW9uCiAgICAgICAgcGFyYW1zID0geydwYXltZW50X3BsYW4nOiBwX3BsYW5fMS5pZCwgJ3BhcnR5X2NvZGUnOiB0cC5jb2RlfSAgIyBzZWFyY2ggdW5kZXIgcGxhbiAxCiAgICAgICAgcmVzcG9uc2VfZm9yX3BsYW5fMSA9IHNlbGYuY2xpZW50LmdldChfVVJMX1BBWU1FTlRfUExBTl9TSElQTUVOVF9MSVNUX0FQSSwgcGFyYW1zKQoKICAgICAgICBwYXJhbXMgPSB7J3BheW1lbnRfcGxhbic6IHBfcGxhbl8yLmlkLCAncGFydHlfY29kZSc6IHRwLmNvZGV9ICAjIHNlYXJjaCB1bmRlciBwbGFuIDIKICAgICAgICByZXNwb25zZV9mb3JfcGxhbl8yID0gc2VsZi5jbGllbnQuZ2V0KF9VUkxfUEFZTUVOVF9QTEFOX1NISVBNRU5UX0xJU1RfQVBJLCBwYXJhbXMpCgogICAgICAgICMgYXNzZXJ0CiAgICAgICAgZGF0YV8xID0gcmVzcG9uc2VfZm9yX3BsYW5fMS5kYXRhCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgyLCBsZW4oZGF0YV8xKSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludl8yX2ZydC5pZCwgZGF0YV8xWzBdWydpZCddKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoaW52XzRfZnJ0LmlkLCBkYXRhXzFbMV1bJ2lkJ10pCgogICAgICAgIGRhdGFfMiA9IHJlc3BvbnNlX2Zvcl9wbGFuXzIuZGF0YQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoMiwgbGVuKGRhdGFfMikpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChpbnZfMl9mcnQuaWQsIGRhdGFfMlswXVsnaWQnXSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludl80X2ZydC5pZCwgZGF0YV8yWzFdWydpZCddKQoKICAgIGRlZiB0ZXN0X3VubGlua2VkX3RwX29mX2FfbGlua2VkX3NoaXBtZW50X2Nhbl9iZV9zZWFyY2hlZF9ieV9vdGhlcl9wYXltZW50X3BsYW4oc2VsZik6CiAgICAgICAgIyBhcnJhbmdlCiAgICAgICAgdHBfMSA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5UcmFkZVBhcnRuZXIpCiAgICAgICAgdHBfMiA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5UcmFkZVBhcnRuZXIpCgogICAgICAgICMgZmlyc3Qgc2hpcG1lbnQgYW5kIGl0cyBpbnZvaWNlcwogICAgICAgIG1ibF8xID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlNoaXBtZW50TUJMKQogICAgICAgIGludl8xID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLkludm9pY2UsIG1ibD1tYmxfMSwgdHJhZGVfcGFydG5lcj10cF8xKQogICAgICAgIGludl8xX2ZydCA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5GcmVpZ2h0SW5mbywgaW52b2ljZT1pbnZfMSkKCiAgICAgICAgIyBub3QgYXNzaWduZWQsIHNob3cgb24gdGhlIHNlY29uZCByZXN1bHQKICAgICAgICBpbnZfMiA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5JbnZvaWNlLCBtYmw9bWJsXzEsIHRyYWRlX3BhcnRuZXI9dHBfMikKICAgICAgICBpbnZfMl9mcnQgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzIpCgogICAgICAgIHBfcGxhbiA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbiwgY3VzdG9tZXI9dHBfMSkKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuRGV0YWlsLCBwYXltZW50X3BsYW49cF9wbGFuLCBmcmVpZ2h0X2luZm89aW52XzFfZnJ0CiAgICAgICAgKQoKICAgICAgICAjIGFjdGlvbgogICAgICAgIHBhcmFtcyA9IHsncGF5bWVudF9wbGFuJzogcF9wbGFuLmlkLCAncGFydHlfY29kZSc6IHRwXzEuY29kZX0gICMgc2VhcmNoIHVuZGVyIHBsYW4gMQogICAgICAgIHJlc3BvbnNlX2Zvcl9wbGFuXzEgPSBzZWxmLmNsaWVudC5nZXQoX1VSTF9QQVlNRU5UX1BMQU5fU0hJUE1FTlRfTElTVF9BUEksIHBhcmFtcykKCiAgICAgICAgcGFyYW1zID0geydwYXJ0eV9jb2RlJzogdHBfMi5jb2RlfSAgIyBzZWFyY2ggdW5kZXIgbmV3IHBsYW4KICAgICAgICByZXNwb25zZV9mb3JfcGxhbl8yID0gc2VsZi5jbGllbnQuZ2V0KF9VUkxfUEFZTUVOVF9QTEFOX1NISVBNRU5UX0xJU1RfQVBJLCBwYXJhbXMpCgogICAgICAgICMgYXNzZXJ0CiAgICAgICAgZGF0YV8xID0gcmVzcG9uc2VfZm9yX3BsYW5fMS5kYXRhCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgwLCBsZW4oZGF0YV8xKSkgICMgbm8gbW9yZSB1bmFzc2lnbmVkIGZyZWlnaHRzIGZvciBwbGFuIDEKCiAgICAgICAgZGF0YV8yID0gcmVzcG9uc2VfZm9yX3BsYW5fMi5kYXRhCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgxLCBsZW4oZGF0YV8yKSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKGludl8yX2ZydC5pZCwgZGF0YV8yWzBdWydpZCddKQoKCkB0YWcoJ215c3FsJykKY2xhc3MgVGVzdFBheW1lbnRQbGFuTGlzdEFwaShGbXNBUElUZXN0Q2FzZSk6CiAgICBkZWYgc2V0VXAoc2VsZik6CiAgICAgICAgc3VwZXIoKS5zZXRVcCgpCiAgICAgICAgc2VsZi51cmwgPSAnL2FwaS9wYXltZW50LXBsYW4vbGlzdC8nCgogICAgZGVmIHRlc3RfZmlsdGVyX2J5X3Bvc3RfZGF0ZShzZWxmKToKICAgICAgICAjIGFycmFuZ2UKICAgICAgICBwX3BsYW5fMSA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbiwgcG9zdF9kYXRlPWRhdGUoMjAyMCwgNSwgMjgpKQogICAgICAgIHBfcGxhbl8yID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlBheW1lbnRQbGFuLCBwb3N0X2RhdGU9ZGF0ZSgyMDIwLCA1LCAyNykpCgogICAgICAgICMgYWN0aW9uCiAgICAgICAgcmVzcG9uc2UgPSBzZWxmLmNsaWVudC5nZXQoCiAgICAgICAgICAgIHNlbGYudXJsLCB7J3Bvc3RfZGF0ZV9zdGFydCc6ICcyMDIwLTUtMjgnLCAncG9zdF9kYXRlX2VuZCc6ICcyMDIwLTUtMjgnLCB9CiAgICAgICAgKQoKICAgICAgICAjIGFzc2VydAogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzcG9uc2Uuc3RhdHVzX2NvZGUsIHN0YXR1cy5IVFRQXzIwMF9PSykKCiAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKDEsIGRhdGFbJ2NvdW50J10pCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwX3BsYW5fMS5pZCwgZGF0YVsncmVzdWx0cyddWzBdWydpZCddKQoKIAoKICAgIGRlZiB0ZXN0X2ZpbHRlcl9ieV9jdXN0b21lcihzZWxmKToKICAgICAgICAjIGFycmFuZ2UKICAgICAgICB0cF8xID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlRyYWRlUGFydG5lciwgbmFtZT0nVEVTVCBUUCAxJykKICAgICAgICB0cF8yID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlRyYWRlUGFydG5lciwgbmFtZT0nVEVTVCBUUCAyJykKICAgICAgICBwX3BsYW5fMSA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbiwgY3VzdG9tZXI9dHBfMSkKICAgICAgICBwX3BsYW5fMiA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbiwgY3VzdG9tZXI9dHBfMikKCiAgICAgICAgIyBhY3Rpb24KICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LmdldChzZWxmLnVybCwgeydjdXN0b21lcic6IHRwXzEubmFtZSwgfSkKCiAgICAgICAgIyBhc3NlcnQKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3BvbnNlLnN0YXR1c19jb2RlLCBzdGF0dXMuSFRUUF8yMDBfT0spCgogICAgICAgIGRhdGEgPSByZXNwb25zZS5kYXRhCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgxLCBkYXRhWydjb3VudCddKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocF9wbGFuXzEuaWQsIGRhdGFbJ3Jlc3VsdHMnXVswXVsnaWQnXSkKCiAgICBkZWYgdGVzdF9maWx0ZXJfYnlfcGF5bWVudF9wbGFuX3R5cGUoc2VsZik6CiAgICAgICAgIyBhcnJhbmdlCiAgICAgICAgcF9wbGFuXzEgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuUGF5bWVudFBsYW4sIGlzX3BhaWRfYnlfY3VzdG9tZXI9VHJ1ZSkKICAgICAgICBwX3BsYW5fMiA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbiwgaXNfcGFpZF9ieV9jdXN0b21lcj1GYWxzZSkKCiAgICAgICAgIyBhY3Rpb24KICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LmdldChzZWxmLnVybCwgeydpc19wYWlkX2J5X2N1c3RvbWVyJzogJ3RydWUnLCB9KQoKICAgICAgICAjIGFzc2VydAogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzcG9uc2Uuc3RhdHVzX2NvZGUsIHN0YXR1cy5IVFRQXzIwMF9PSykKCiAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKDEsIGRhdGFbJ2NvdW50J10pCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwX3BsYW5fMS5pZCwgZGF0YVsncmVzdWx0cyddWzBdWydpZCddKQoKICAgIGRlZiB0ZXN0X2ZpbHRlcl9ieV9vZmZpY2Uoc2VsZik6CiAgICAgICAgIyBhcnJhbmdlCiAgICAgICAgb2ZjXzEgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuT2ZmaWNlKQogICAgICAgIG9mY18yID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLk9mZmljZSkKICAgICAgICBwX3BsYW5fMSA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbiwgb2ZmaWNlPW9mY18xKQogICAgICAgIHBfcGxhbl8yID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlBheW1lbnRQbGFuLCBvZmZpY2U9b2ZjXzIpCgogICAgICAgICMgYWN0aW9uCiAgICAgICAgcmVzcG9uc2UgPSBzZWxmLmNsaWVudC5nZXQoc2VsZi51cmwsIHsnb2ZmaWNlcyc6IFtvZmNfMS5pZF0sIH0pCgogICAgICAgICMgYXNzZXJ0CiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXNwb25zZS5zdGF0dXNfY29kZSwgc3RhdHVzLkhUVFBfMjAwX09LKQoKICAgICAgICBkYXRhID0gcmVzcG9uc2UuZGF0YQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwoMSwgZGF0YVsnY291bnQnXSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHBfcGxhbl8xLmlkLCBkYXRhWydyZXN1bHRzJ11bMF1bJ2lkJ10pCgogICAgZGVmIHRlc3RfZmlsdGVyX2J5X29mZmljZV9kZXBhcnRtZW50KHNlbGYpOgogICAgICAgICMgYXJyYW5nZQogICAgICAgIG9mYyA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5PZmZpY2UpCiAgICAgICAgb2ZjX2RlcHRfMSA9IG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuT2ZmaWNlRGVwYXJ0bWVudCwgbmFtZT0nVEVTVCBEZXB0LiAxJywgb2ZmaWNlPW9mYwogICAgICAgICkKICAgICAgICBvZmNfZGVwdF8yID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5PZmZpY2VEZXBhcnRtZW50LCBuYW1lPSdURVNUIERlcHQuIDInLCBvZmZpY2U9b2ZjCiAgICAgICAgKQogICAgICAgIHBfcGxhbl8xID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5QYXltZW50UGxhbiwgb2ZmaWNlPW9mYywgb2ZmaWNlX2RlcGFydG1lbnQ9b2ZjX2RlcHRfMQogICAgICAgICkKICAgICAgICBwX3BsYW5fMiA9IG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuUGF5bWVudFBsYW4sIG9mZmljZT1vZmMsIG9mZmljZV9kZXBhcnRtZW50PW9mY19kZXB0XzIKICAgICAgICApCgogICAgICAgICMgYWN0aW9uCiAgICAgICAgcmVzcG9uc2UgPSBzZWxmLmNsaWVudC5nZXQoc2VsZi51cmwsIHsnb2ZmaWNlX2RlcGFydG1lbnRzJzogW29mY19kZXB0XzEuaWRdLCB9KQoKICAgICAgICAjIGFzc2VydAogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzcG9uc2Uuc3RhdHVzX2NvZGUsIHN0YXR1cy5IVFRQXzIwMF9PSykKCiAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKDEsIGRhdGFbJ2NvdW50J10pCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwX3BsYW5fMS5pZCwgZGF0YVsncmVzdWx0cyddWzBdWydpZCddKQoKICAgIGRlZiB0ZXN0X2NhbGN1bGF0ZV90b3RhbF9hbW91bnRzX2Zyb21faW52b2ljZShzZWxmKToKICAgICAgICAjIGFycmFuZ2UKCiAgICAgICAgIyBSZWNlaXZlIFBheW1lbnQgUGxhbjogc2FtZSBJbnZvaWNlIHNob3VsZCBvbmx5IGNvdW50IG9uY2UKICAgICAgICBwX3BsYW5fMSA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbiwgaXNfcGFpZF9ieV9jdXN0b21lcj1UcnVlKQoKICAgICAgICBpbnZfMSA9IG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuSW52b2ljZSwKICAgICAgICAgICAgbWJsPW1vbW15Lm1ha2UoZm1zX21vZGVscy5TaGlwbWVudE1CTCwgX2ZpbGxfb3B0aW9uYWw9WydvaV9pbmZvJ10pLAogICAgICAgICAgICB0eXBlPSdTJywKICAgICAgICAgICAgYW1vdW50PTEwMCwKICAgICAgICAgICAgcGFpZF9hbW91bnQ9NTAsCiAgICAgICAgKQogICAgICAgIG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuUGF5bWVudFBsYW5EZXRhaWwsCiAgICAgICAgICAgIGZyZWlnaHRfaW5mbz1tb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzEpLAogICAgICAgICAgICBwYXltZW50X3BsYW49cF9wbGFuXzEsCiAgICAgICAgKQogICAgICAgIG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuUGF5bWVudFBsYW5EZXRhaWwsCiAgICAgICAgICAgIGZyZWlnaHRfaW5mbz1tb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzEpLAogICAgICAgICAgICBwYXltZW50X3BsYW49cF9wbGFuXzEsCiAgICAgICAgKQoKICAgICAgICAjIFJlY2VpdmUgUGF5bWVudCBQbGFuOiBpbnZvaWNlIHdpdGhvdXQgcGF5bWVudAogICAgICAgIHBfcGxhbl8yID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlBheW1lbnRQbGFuLCBpc19wYWlkX2J5X2N1c3RvbWVyPVRydWUpCgogICAgICAgIGludl8yID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5JbnZvaWNlLCB0eXBlPSdTJywgbWJsPW1vbW15Lm1ha2UoZm1zX21vZGVscy5TaGlwbWVudE1CTCwgX2ZpbGxfb3B0aW9uYWw9WydvaV9pbmZvJ10pLCBhbW91bnQ9MTAKICAgICAgICApCiAgICAgICAgbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5QYXltZW50UGxhbkRldGFpbCwKICAgICAgICAgICAgZnJlaWdodF9pbmZvPW1vbW15Lm1ha2UoZm1zX21vZGVscy5GcmVpZ2h0SW5mbywgaW52b2ljZT1pbnZfMiksCiAgICAgICAgICAgIHBheW1lbnRfcGxhbj1wX3BsYW5fMiwKICAgICAgICApCgogICAgICAgICMgTWFrZSBQYXltZW50IFBsYW46IG11bHRpcGxlIGludm9pY2VzCiAgICAgICAgcF9wbGFuXzMgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuUGF5bWVudFBsYW4sIGlzX3BhaWRfYnlfY3VzdG9tZXI9RmFsc2UpCgogICAgICAgIGludl8zID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5JbnZvaWNlLAogICAgICAgICAgICB0eXBlPSdTJywKICAgICAgICAgICAgbWJsPW1vbW15Lm1ha2UoZm1zX21vZGVscy5TaGlwbWVudE1CTCwgX2ZpbGxfb3B0aW9uYWw9WydvaV9pbmZvJ10pLAogICAgICAgICAgICBhbW91bnQ9MTAsCiAgICAgICAgICAgIHBhaWRfYW1vdW50PTUsCiAgICAgICAgKQogICAgICAgIGludl80ID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5JbnZvaWNlLAogICAgICAgICAgICB0eXBlPSdTJywKICAgICAgICAgICAgbWJsPW1vbW15Lm1ha2UoZm1zX21vZGVscy5TaGlwbWVudE1CTCwgX2ZpbGxfb3B0aW9uYWw9WydvaV9pbmZvJ10pLAogICAgICAgICAgICBhbW91bnQ9MjAsCiAgICAgICAgICAgIHBhaWRfYW1vdW50PTUsCiAgICAgICAgKQogICAgICAgIG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuUGF5bWVudFBsYW5EZXRhaWwsCiAgICAgICAgICAgIGZyZWlnaHRfaW5mbz1tb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzMpLAogICAgICAgICAgICBwYXltZW50X3BsYW49cF9wbGFuXzMsCiAgICAgICAgKQogICAgICAgIG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuUGF5bWVudFBsYW5EZXRhaWwsCiAgICAgICAgICAgIGZyZWlnaHRfaW5mbz1tb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzQpLAogICAgICAgICAgICBwYXltZW50X3BsYW49cF9wbGFuXzMsCiAgICAgICAgKQoKICAgICAgICAjIGFjdGlvbgogICAgICAgIHNlcnZpY2UudXBkYXRlX3RvdGFsX2Ftb3VudChwX3BsYW5fMSkKICAgICAgICBzZXJ2aWNlLnVwZGF0ZV90b3RhbF9hbW91bnQocF9wbGFuXzIpCiAgICAgICAgc2VydmljZS51cGRhdGVfdG90YWxfYW1vdW50KHBfcGxhbl8zKQoKICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LmdldChzZWxmLnVybCwgeydvcmRlcl9ieSc6ICdpZCcsICdvcmRlcl9hc2MnOiAndHJ1ZSd9KQoKICAgICAgICAjIGFzc2VydAogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzcG9uc2Uuc3RhdHVzX2NvZGUsIHN0YXR1cy5IVFRQXzIwMF9PSykKCiAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKDMsIGRhdGFbJ2NvdW50J10pCgogICAgICAgIHBfcGxhbl8xX2RhdGEgPSBkYXRhWydyZXN1bHRzJ11bMF0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKERlY2ltYWwoMTAwKSwgcF9wbGFuXzFfZGF0YVsndG90YWxfYW1vdW50J10pCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChEZWNpbWFsKDUwKSwgcF9wbGFuXzFfZGF0YVsndG90YWxfcGFpZF9hbW91bnQnXSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKERlY2ltYWwoNTApLCBwX3BsYW5fMV9kYXRhWyd0b3RhbF9iYWxhbmNlJ10pCgogICAgICAgIHBfcGxhbl8yX2RhdGEgPSBkYXRhWydyZXN1bHRzJ11bMV0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKERlY2ltYWwoMTApLCBwX3BsYW5fMl9kYXRhWyd0b3RhbF9hbW91bnQnXSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKERlY2ltYWwoMCksIHBfcGxhbl8yX2RhdGFbJ3RvdGFsX3BhaWRfYW1vdW50J10pCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChEZWNpbWFsKDEwKSwgcF9wbGFuXzJfZGF0YVsndG90YWxfYmFsYW5jZSddKQoKICAgICAgICBwX3BsYW5fM19kYXRhID0gZGF0YVsncmVzdWx0cyddWzJdCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChEZWNpbWFsKDMwKSwgcF9wbGFuXzNfZGF0YVsndG90YWxfYW1vdW50J10pCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChEZWNpbWFsKDEwKSwgcF9wbGFuXzNfZGF0YVsndG90YWxfcGFpZF9hbW91bnQnXSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKERlY2ltYWwoMjApLCBwX3BsYW5fM19kYXRhWyd0b3RhbF9iYWxhbmNlJ10pCgogICAgZGVmIHRlc3RfZmlsdGVyX2J5X3RvdGFsX2Ftb3VudHMoc2VsZik6CiAgICAgICAgIyBhcnJhbmdlCgogICAgICAgICMgUmVjZWl2ZSBQYXltZW50IFBsYW46IHNhbWUgSW52b2ljZSBzaG91bGQgb25seSBjb3VudCBvbmNlCiAgICAgICAgcF9wbGFuXzEgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuUGF5bWVudFBsYW4sIGlzX3BhaWRfYnlfY3VzdG9tZXI9VHJ1ZSkKCiAgICAgICAgaW52XzEgPSBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLkludm9pY2UsCiAgICAgICAgICAgIHR5cGU9J1MnLAogICAgICAgICAgICBtYmw9bW9tbXkubWFrZShmbXNfbW9kZWxzLlNoaXBtZW50TUJMLCBfZmlsbF9vcHRpb25hbD1bJ29pX2luZm8nXSksCiAgICAgICAgICAgIGFtb3VudD0xMDAsCiAgICAgICAgICAgIHBhaWRfYW1vdW50PTUwLAogICAgICAgICkKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuRGV0YWlsLAogICAgICAgICAgICBmcmVpZ2h0X2luZm89bW9tbXkubWFrZShmbXNfbW9kZWxzLkZyZWlnaHRJbmZvLCBpbnZvaWNlPWludl8xKSwKICAgICAgICAgICAgcGF5bWVudF9wbGFuPXBfcGxhbl8xLAogICAgICAgICkKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuRGV0YWlsLAogICAgICAgICAgICBmcmVpZ2h0X2luZm89bW9tbXkubWFrZShmbXNfbW9kZWxzLkZyZWlnaHRJbmZvLCBpbnZvaWNlPWludl8xKSwKICAgICAgICAgICAgcGF5bWVudF9wbGFuPXBfcGxhbl8xLAogICAgICAgICkKCiAgICAgICAgIyBSZWNlaXZlIFBheW1lbnQgUGxhbjogaW52b2ljZSB3aXRob3V0IHBheW1lbnQKICAgICAgICBwX3BsYW5fMiA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbiwgaXNfcGFpZF9ieV9jdXN0b21lcj1UcnVlKQoKICAgICAgICBpbnZfMiA9IG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuSW52b2ljZSwgdHlwZT0nUycsIG1ibD1tb21teS5tYWtlKGZtc19tb2RlbHMuU2hpcG1lbnRNQkwsIF9maWxsX29wdGlvbmFsPVsnb2lfaW5mbyddKSwgYW1vdW50PTEwCiAgICAgICAgKQogICAgICAgIG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuUGF5bWVudFBsYW5EZXRhaWwsCiAgICAgICAgICAgIGZyZWlnaHRfaW5mbz1tb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzIpLAogICAgICAgICAgICBwYXltZW50X3BsYW49cF9wbGFuXzIsCiAgICAgICAgKQoKICAgICAgICAjIGFjdGlvbgogICAgICAgIHNlcnZpY2UudXBkYXRlX3RvdGFsX2Ftb3VudChwX3BsYW5fMSkKICAgICAgICBzZXJ2aWNlLnVwZGF0ZV90b3RhbF9hbW91bnQocF9wbGFuXzIpCgogICAgICAgIHJlc3BvbnNlID0gc2VsZi5jbGllbnQuZ2V0KAogICAgICAgICAgICBzZWxmLnVybCwgeyd0b3RhbF9hbW91bnRfbWluJzogMTAwLCAndG90YWxfYW1vdW50X21heCc6IDEwMCwgfQogICAgICAgICkKCiAgICAgICAgIyBhc3NlcnQKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3BvbnNlLnN0YXR1c19jb2RlLCBzdGF0dXMuSFRUUF8yMDBfT0spCgogICAgICAgIGRhdGEgPSByZXNwb25zZS5kYXRhCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgxLCBkYXRhWydjb3VudCddKQoKICAgICAgICBwX3BsYW5fMV9kYXRhID0gZGF0YVsncmVzdWx0cyddWzBdCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwX3BsYW5fMS5pZCwgcF9wbGFuXzFfZGF0YVsnaWQnXSkKCiAgICBkZWYgdGVzdF9maWx0ZXJfYnlfdG90YWxfcGFpZF9hbW91bnRzKHNlbGYpOgogICAgICAgICMgYXJyYW5nZQoKICAgICAgICAjIFJlY2VpdmUgUGF5bWVudCBQbGFuOiBzYW1lIEludm9pY2Ugc2hvdWxkIG9ubHkgY291bnQgb25jZQogICAgICAgIHBfcGxhbl8xID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlBheW1lbnRQbGFuLCBpc19wYWlkX2J5X2N1c3RvbWVyPVRydWUpCgogICAgICAgIGludl8xID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5JbnZvaWNlLAogICAgICAgICAgICB0eXBlPSdTJywKICAgICAgICAgICAgbWJsPW1vbW15Lm1ha2UoZm1zX21vZGVscy5TaGlwbWVudE1CTCwgX2ZpbGxfb3B0aW9uYWw9WydvaV9pbmZvJ10pLAogICAgICAgICAgICBhbW91bnQ9MTAwLAogICAgICAgICAgICBwYWlkX2Ftb3VudD01MCwKICAgICAgICApCiAgICAgICAgbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5QYXltZW50UGxhbkRldGFpbCwKICAgICAgICAgICAgZnJlaWdodF9pbmZvPW1vbW15Lm1ha2UoZm1zX21vZGVscy5GcmVpZ2h0SW5mbywgaW52b2ljZT1pbnZfMSksCiAgICAgICAgICAgIHBheW1lbnRfcGxhbj1wX3BsYW5fMSwKICAgICAgICApCiAgICAgICAgbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5QYXltZW50UGxhbkRldGFpbCwKICAgICAgICAgICAgZnJlaWdodF9pbmZvPW1vbW15Lm1ha2UoZm1zX21vZGVscy5GcmVpZ2h0SW5mbywgaW52b2ljZT1pbnZfMSksCiAgICAgICAgICAgIHBheW1lbnRfcGxhbj1wX3BsYW5fMSwKICAgICAgICApCgogICAgICAgICMgUmVjZWl2ZSBQYXltZW50IFBsYW46IGludm9pY2Ugd2l0aG91dCBwYXltZW50CiAgICAgICAgcF9wbGFuXzIgPSBtb21teS5tYWtlKGZtc19tb2RlbHMuUGF5bWVudFBsYW4sIGlzX3BhaWRfYnlfY3VzdG9tZXI9VHJ1ZSkKCiAgICAgICAgaW52XzIgPSBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLkludm9pY2UsIHR5cGU9J1MnLCBtYmw9bW9tbXkubWFrZShmbXNfbW9kZWxzLlNoaXBtZW50TUJMLCBfZmlsbF9vcHRpb25hbD1bJ29pX2luZm8nXSksIGFtb3VudD0xMAogICAgICAgICkKICAgICAgICBtb21teS5tYWtlKAogICAgICAgICAgICBmbXNfbW9kZWxzLlBheW1lbnRQbGFuRGV0YWlsLAogICAgICAgICAgICBmcmVpZ2h0X2luZm89bW9tbXkubWFrZShmbXNfbW9kZWxzLkZyZWlnaHRJbmZvLCBpbnZvaWNlPWludl8yKSwKICAgICAgICAgICAgcGF5bWVudF9wbGFuPXBfcGxhbl8yLAogICAgICAgICkKCiAgICAgICAgIyBhY3Rpb24KICAgICAgICBzZXJ2aWNlLnVwZGF0ZV90b3RhbF9hbW91bnQocF9wbGFuXzEpCiAgICAgICAgc2VydmljZS51cGRhdGVfdG90YWxfYW1vdW50KHBfcGxhbl8yKQoKICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LmdldCgKICAgICAgICAgICAgc2VsZi51cmwsIHsndG90YWxfcGFpZF9hbW91bnRfbWluJzogNTAsICd0b3RhbF9wYWlkX2Ftb3VudF9tYXgnOiA1MCwgfQogICAgICAgICkKCiAgICAgICAgIyBhc3NlcnQKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3BvbnNlLnN0YXR1c19jb2RlLCBzdGF0dXMuSFRUUF8yMDBfT0spCgogICAgICAgIGRhdGEgPSByZXNwb25zZS5kYXRhCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbCgxLCBkYXRhWydjb3VudCddKQoKICAgICAgICBwX3BsYW5fMV9kYXRhID0gZGF0YVsncmVzdWx0cyddWzBdCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChwX3BsYW5fMS5pZCwgcF9wbGFuXzFfZGF0YVsnaWQnXSkKCiAgICBkZWYgdGVzdF9maWx0ZXJfYnlfdG90YWxfYmFsYW5jZShzZWxmKToKICAgICAgICAjIGFycmFuZ2UKCiAgICAgICAgIyBSZWNlaXZlIFBheW1lbnQgUGxhbjogc2FtZSBJbnZvaWNlIHNob3VsZCBvbmx5IGNvdW50IG9uY2UKICAgICAgICBwX3BsYW5fMSA9IG1vbW15Lm1ha2UoZm1zX21vZGVscy5QYXltZW50UGxhbiwgaXNfcGFpZF9ieV9jdXN0b21lcj1UcnVlKQoKICAgICAgICBpbnZfMSA9IG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuSW52b2ljZSwKICAgICAgICAgICAgdHlwZT0nUycsCiAgICAgICAgICAgIG1ibD1tb21teS5tYWtlKGZtc19tb2RlbHMuU2hpcG1lbnRNQkwsIF9maWxsX29wdGlvbmFsPVsnb2lfaW5mbyddKSwKICAgICAgICAgICAgYW1vdW50PTEwMCwKICAgICAgICAgICAgcGFpZF9hbW91bnQ9NTAsCiAgICAgICAgKQogICAgICAgIG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuUGF5bWVudFBsYW5EZXRhaWwsCiAgICAgICAgICAgIGZyZWlnaHRfaW5mbz1tb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzEpLAogICAgICAgICAgICBwYXltZW50X3BsYW49cF9wbGFuXzEsCiAgICAgICAgKQogICAgICAgIG1vbW15Lm1ha2UoCiAgICAgICAgICAgIGZtc19tb2RlbHMuUGF5bWVudFBsYW5EZXRhaWwsCiAgICAgICAgICAgIGZyZWlnaHRfaW5mbz1tb21teS5tYWtlKGZtc19tb2RlbHMuRnJlaWdodEluZm8sIGludm9pY2U9aW52XzEpLAogICAgICAgICAgICBwYXltZW50X3BsYW49cF9wbGFuXzEsCiAgICAgICAgKQoKICAgICAgICAjIFJlY2VpdmUgUGF5bWVudCBQbGFuOiBpbnZvaWNlIHdpdGhvdXQgcGF5bWVudAogICAgICAgIHBfcGxhbl8yID0gbW9tbXkubWFrZShmbXNfbW9kZWxzLlBheW1lbnRQbGFuLCBpc19wYWlkX2J5X2N1c3RvbWVyPVRydWUpCgogICAgICAgIGludl8yID0gbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5JbnZvaWNlLCB0eXBlPSdTJywgbWJsPW1vbW15Lm1ha2UoZm1zX21vZGVscy5TaGlwbWVudE1CTCwgX2ZpbGxfb3B0aW9uYWw9WydvaV9pbmZvJ10pLCBhbW91bnQ9MTAKICAgICAgICApCiAgICAgICAgbW9tbXkubWFrZSgKICAgICAgICAgICAgZm1zX21vZGVscy5QYXltZW50UGxhbkRldGFpbCwKICAgICAgICAgICAgZnJlaWdodF9pbmZvPW1vbW15Lm1ha2UoZm1zX21vZGVscy5GcmVpZ2h0SW5mbywgaW52b2ljZT1pbnZfMiksCiAgICAgICAgICAgIHBheW1lbnRfcGxhbj1wX3BsYW5fMiwKICAgICAgICApCgogICAgICAgICMgYWN0aW9uCiAgICAgICAgc2VydmljZS51cGRhdGVfdG90YWxfYW1vdW50KHBfcGxhbl8xKQogICAgICAgIHNlcnZpY2UudXBkYXRlX3RvdGFsX2Ftb3VudChwX3BsYW5fMikKCiAgICAgICAgcmVzcG9uc2UgPSBzZWxmLmNsaWVudC5nZXQoCiAgICAgICAgICAgIHNlbGYudXJsLCB7J3RvdGFsX2JhbGFuY2VfbWluJzogNTAsICd0b3RhbF9iYWxhbmNlX21heCc6IDUwLCB9CiAgICAgICAgKQoKICAgICAgICAjIGFzc2VydAogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzcG9uc2Uuc3RhdHVzX2NvZGUsIHN0YXR1cy5IVFRQXzIwMF9PSykKCiAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKDEsIGRhdGFbJ2NvdW50J10pCgogICAgICAgIHBfcGxhbl8xX2RhdGEgPSBkYXRhWydyZXN1bHRzJ11bMF0KICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHBfcGxhbl8xLmlkLCBwX3BsYW5fMV9kYXRhWydpZCddKQo=</text>
      </register>
      <register name="w" type="4">
        <keys>
          <key char="94" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="91" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
          <key char="102" code="0" mods="0" />
          <key char="61" code="0" mods="0" />
          <key char="105" code="0" mods="0" />
          <key char="93" code="0" mods="0" />
          <key char="65535" code="27" mods="0" />
        </keys>
      </register>
      <register name="8" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="y" type="4">
        <text />
      </register>
      <register name=":" type="4">
        <text>875</text>
      </register>
    </registers>
  </component>
  <component name="VimSearchSettings">
    <search>
      <last-dir>0</last-dir>
      <show-last>false</show-last>
    </search>
  </component>
  <component name="VimSettings">
    <state version="6" enabled="true" />
    <notifications>
      <idea-join enabled="false" />
      <idea-put enabled="false" />
    </notifications>
  </component>
</application>